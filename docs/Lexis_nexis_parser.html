<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ana Macanovic" />

<meta name="date" content="2023-12-06" />

<title>Nexis_data_handling</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a>
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="index.html">Code homepage</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon glyphicon glyphicon-list"></span>
     
    Scripts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="SQL_tutorial.html">Intro: SQL tutorial</a>
    </li>
    <li>
      <a href="OpenAlex_Altmetric_data_download.html">1. Open Alex and Altmetric data download</a>
    </li>
    <li>
      <a href="Gender_inference.html">2. Gender inference</a>
    </li>
    <li>
      <a href="Grant_parsing.html">3. Grant parsing</a>
    </li>
    <li>
      <a href="Lexis_nexis_parser.html">4. Lexis data parser</a>
    </li>
    <li>
      <a href="Mention_url_extraction.html">5. Mention URL extraction</a>
    </li>
    <li>
      <a href="Data_descriptives.html">5. Database description and coverage</a>
    </li>
    <li>
      <a href="Panel_data_compilation.html">6. Panel data compilation</a>
    </li>
    <li>
      <a href="analyses.html">7. Various analyses</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/amacanovic/dutch_media_profs">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Nexis_data_handling</h1>
<h4 class="author">Ana Macanovic</h4>
<h4 class="date">2023-12-06</h4>

</div>


<p>This script reads in and parses data from LexisNexis.</p>
<p>Load the packages:</p>
<pre class="r"><code>library(groundhog)
packages_to_load &lt;- c(&quot;readr&quot;, &quot;dplyr&quot;, &quot;stringr&quot;, &quot;tidyr&quot;, &quot;tidyverse&quot;,
                      &quot;RPostgres&quot;, &quot;lubridate&quot;, &quot;readtext&quot;,
                      &quot;DBI&quot;, &quot;RODBC&quot;, &quot;odbc&quot;)
groundhog.library(packages_to_load, date = &quot;2023-12-01&quot;)

packages_to_load &lt;- c(&quot;openalexR&quot;)
groundhog.library(packages_to_load, date = &quot;2024-03-01&quot;)</code></pre>
<p>Load the R package by J. Grubber that conveniently tidies up the
LexisNexis data:</p>
<pre class="r"><code># remotes::install_github(&quot;JBGruber/LexisNexisTools&quot;)
library(&quot;LexisNexisTools&quot;)</code></pre>
<div id="tidy-up-professor-data-from-narcis" class="section level1"
number="1">
<h1><span class="header-section-number">1</span> Tidy up professor data
from NARCIS</h1>
<p>Connect to database:</p>
<pre class="r"><code># default port here, change if needed
port &lt;- 5432
# username
user &lt;- &quot;&quot;
# password
password &lt;- &quot;&quot;
# database name
database_name &lt;- &quot;&quot;

con &lt;- RPostgres::dbConnect(RPostgres::Postgres(),
                 dbname= database_name,
                 port = port,
                 user = user, 
                 password = password)</code></pre>
</div>
<div id="loading-in-the-data" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Loading in the
data</h1>
<p>Script “lexis_helper_compile.R” compiles data from various download
sub-folders, cleans it, and removes professors we do not consider due to
ambiguous names.</p>
<p>Below, we leave an example of the code we use to extract the data
from files downloaded from Lexis Uni.</p>
<p>Load the word files from the individual professor zips and extract
the article texts:</p>
<pre class="r"><code>folder &lt;- &quot;../downloads/zipfiles&quot;
all_docs &lt;- lnt_read(x = folder, convert_date = F, extract_paragraphs = F)
meta_data &lt;- all_docs@meta
meta_data$profile_id &lt;- str_split_i(meta_data$Source_File, &quot;/zips/&quot;, 2)
meta_data$profile_id &lt;- str_split_i(meta_data$profile_id, &quot;_&quot;, 1)</code></pre>
</div>
<div id="clean-the-lexisnexis-data" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Clean the LexisNexis
data</h1>
<p>Tidy up the dates:</p>
<pre class="r"><code>meta_data$date_eng &lt;- tolower(meta_data$Date)
# replace dutch dates with english for easier conversion later on
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;januari&quot;,
                                  &quot;january&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;februari&quot;,
                                  &quot;february&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;maart&quot;,
                                  &quot;march&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;mei&quot;,
                                  &quot;may&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;mai&quot;,
                                  &quot;may&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;juni&quot;,
                                  &quot;june&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;juli&quot;,
                                  &quot;july&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;augustus&quot;,
                                  &quot;august&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;oktober&quot;,
                                  &quot;october&quot;)
meta_data$date_eng &lt;- str_replace(meta_data$date_eng,
                                  &quot;dezember&quot;,
                                  &quot;december&quot;)

# convert the dates
meta_data$date_tidy &lt;- lubridate::parse_date_time(meta_data$date_eng,  c(&quot;dmy&quot;, &quot;md,y&quot;))

# get the year
meta_data$year &lt;- year(meta_data$date_tidy)

# select columns of interest
meta_data_sel &lt;- meta_data %&gt;%
  select(ID, Newspaper, Length:Author, Headline, profile_id, date_tidy, year)

colnames(meta_data_sel) &lt;- tolower(colnames(meta_data_sel))</code></pre>
<p>Prepare the article texts:</p>
<pre class="r"><code>article_content &lt;- all_docs@articles
colnames(article_content) &lt;- tolower(colnames(article_content))</code></pre>
<p>Clean up the memory:</p>
<pre class="r"><code>rm(all_docs)
rm(missing_indices)
gc()</code></pre>
<p>Merge the metadata and the content</p>
<pre class="r"><code>news_mentions &lt;- merge(meta_data_sel,
                       article_content,
                       by = &quot;id&quot;)

# profile ID to match the rest
news_mentions$profile_id &lt;- paste0(&quot;https://www.narcis.nl/person/RecordID/&quot;, news_mentions$profile_id)</code></pre>
<p>Filter our professors we do not want to consider due to ambiguous
names:</p>
<pre class="r"><code>exclude_profs &lt;- c(&#39;PRS1260654&#39;, &#39;PRS1264232&#39;, &#39;PRS1290223&#39;,
                   &#39;PRS1290912&#39;,&#39;PRS1291282&#39;, &#39;PRS1298775&#39;,
                   &#39;PRS1299517&#39;, &#39;PRS1303190&#39;, &#39;PRS1308364&#39;,
                   &#39;PRS1313821&#39;, &#39;PRS1314292&#39;, &#39;PRS1315919&#39;,
                   &#39;PRS1316094&#39;, &#39;PRS1321926&#39;, &#39;PRS1324504&#39;,
                   &#39;PRS1325131&#39;, &#39;PRS1329040&#39;, &#39;PRS1330089&#39;,
                   &#39;PRS1331627&#39;, &#39;PRS1331980&#39;, &#39;PRS1332877&#39;,
                   &#39;PRS1334007&#39;, &#39;PRS1338934&#39;, &#39;PRS1341238&#39;,
                   &#39;PRS1349009&#39;, &#39;PRS1350774&#39;, &#39;PRS1260039&#39;,
                   &#39;PRS1265665&#39;, &#39;PRS1276211&#39;, &#39;PRS1336203&#39;,
                   &#39;PRS1329967&#39;, &#39;PRS1334028&#39;)</code></pre>
</div>
<div id="article-classification" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Article
classification</h1>
<p>Denote whether an article is from a national, regional or specialized
Dutch source, or perhaps a higher-profile international source:</p>
<pre class="r"><code>source(&quot;resources/altmetric_news_outlet_classification.R&quot;)</code></pre>
<p>Remove spaces around / for easier identification:</p>
<pre class="r"><code>news_mentions$newspaper_tidy &lt;- str_replace(news_mentions$newspaper, &quot; \\/ &quot;, &quot;\\/&quot;)</code></pre>
<p>Denote whether the article belongs to any of these, and then also
exclude one source that works a lot with newsletters, but not actual
news:</p>
<pre class="r"><code># national Dutch sources
news_mentions$national_nl &lt;- ifelse(tolower(news_mentions$newspaper_tidy) %in% tolower(national_news_nl), 1, 0)
# local Dutch sources
news_mentions$regional_nl &lt;- ifelse(tolower(news_mentions$newspaper_tidy) %in% tolower(regional_news_nl), 1, 0)
# higher-profile interantional sources
news_mentions$high_prof_intl &lt;- ifelse(tolower(news_mentions$newspaper_tidy) %in% tolower(high_profile_int), 1, 0)
# newsletters by &quot;news bites&quot;
news_mentions$newsletter &lt;- ifelse(tolower(news_mentions$newspaper_tidy) %in% tolower(news_bites), 1, 0)
# PR documents
news_mentions$pr_news &lt;- ifelse(tolower(news_mentions$newspaper_tidy) %in% tolower(pr_govt), 1, 0)
# unviersity newspapers
news_mentions$uni_news &lt;- ifelse(tolower(news_mentions$newspaper_tidy) %in% tolower(uni_news), 1, 0)
# blogs
news_mentions$blog &lt;- ifelse(str_detect(tolower(news_mentions$newspaper_tidy), &quot;blog&quot;), 1, 0)
news_mentions$blog &lt;- ifelse(is.na(news_mentions$blog), 0, news_mentions$blog)
# irrelevant
news_mentions$irrelevant &lt;- ifelse(tolower(news_mentions$newspaper_tidy) %in% tolower(irrelevant), 1, 0)

# no source
news_mentions$source_unknown &lt;- ifelse(news_mentions$newspaper_tidy == &quot;&quot;, 1, 0)
news_mentions$source_unknown &lt;- ifelse(is.na(news_mentions$newspaper_tidy), 1, news_mentions$source_unknown)

# and the remainder
news_mentions$source_unclassified &lt;- ifelse(news_mentions$national_nl == 0 &amp; news_mentions$regional_nl == 0 &amp;
                                              news_mentions$high_prof_intl == 0 &amp; news_mentions$newsletter == 0 &amp;
                                              news_mentions$pr_news == 0 &amp; news_mentions$uni_news == 0 &amp;
                                              news_mentions$blog == 0 &amp;
                                              news_mentions$source_unknown == 0, 1, 0)

# get a categorical variable
news_mentions$source_type &lt;- ifelse(news_mentions$national_nl == 1,
                                    &quot;national_nl&quot;,
                                    ifelse(news_mentions$regional_nl == 1,
                                           &quot;regional_nl&quot;,
                                           ifelse(news_mentions$high_prof_intl == 1,
                                                  &quot;high_prof_intl&quot;,
                                                  ifelse(news_mentions$newsletter == 1,
                                                         &quot;newsletter&quot;,
                                                         ifelse(news_mentions$pr_news == 1,
                                                                &quot;pr_news&quot;, 
                                                                ifelse(news_mentions$uni_news == 1,
                                                                       &quot;uni_news&quot;,
                                                                       ifelse(news_mentions$blog == 1,
                                                                              &quot;blog&quot;,
                                                                              ifelse(news_mentions$irrelevant == 1,
                                                                                     &quot;irrelevant&quot;,
                                                                                     ifelse(news_mentions$source_unknown == 1,
                                                                                            &quot;unknown&quot;,
                                                                                            &quot;other&quot;)))))))))</code></pre>
<p>See if the source is an online outlet/website:</p>
<pre class="r"><code>news_mentions$online_resource &lt;- str_detect(tolower(news_mentions$newspaper_tidy), &quot;\\.nl&quot;)
news_mentions$online_resource_2 &lt;- str_detect(tolower(news_mentions$newspaper_tidy), &quot;\\.co&quot;)
news_mentions$online_resource &lt;- ifelse(news_mentions$online_resource == TRUE | news_mentions$online_resource_2 == TRUE,
                                        1,
                                        0)

news_mentions &lt;- news_mentions %&gt;% select(-online_resource_2)</code></pre>
<div id="see-mentions-of-professors-names-and-institutions"
class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> See mentions of
professor’s names AND institutions</h2>
<p>For robustness checks, we might want to know which articles include
both the professor’s last name and any of the institutions they have
been affiliated with during their lifetimes. This could help us exclude
articles about people with the same name and some sort of
academic/university affiliation, but who are not our professor in
question.</p>
<p>Read in the institutional search:</p>
<pre class="r"><code>all_prof_inst_search &lt;- dbReadTable(con, &quot;oa_affiliation_string_search&quot;)</code></pre>
<p>Now, merge the professor IDs with Lexis outputs:</p>
<pre class="r"><code>colnames(all_prof_inst_search)[1] &lt;- &quot;profile_id&quot;
news_mentions_profs &lt;- merge(news_mentions,
                             all_prof_inst_search,
                             by = &quot;profile_id&quot;,
                             all.x = TRUE)</code></pre>
<p>Now also include their last name:</p>
<pre class="r"><code>profs_full &lt;- dbReadTable(con, &quot;narcis_prof_info&quot;)

news_mentions_profs &lt;- merge(news_mentions_profs,
                             profs_full[c(&quot;profile_id&quot;, &quot;last&quot;)],
                             by = &quot;profile_id&quot;)

# lowercase text and uni strings
news_mentions_profs$article_lowercase &lt;- tolower(news_mentions_profs$article)
news_mentions_profs$string_match_names_lower &lt;- tolower(news_mentions_profs$string_match_names)

# remove special characters from the string match columns
news_mentions_profs$string_match_names_lower &lt;- gsub(&quot;[\U4E00-\U9FFF\U3000-\U303F]&quot;, &quot;&quot;, news_mentions_profs$string_match_names_lower)
news_mentions_profs$string_match_names_lower &lt;- gsub(&quot;（)&quot;, &quot;&quot;, news_mentions_profs$string_match_names_lower)
news_mentions_profs$string_match_names_lower &lt;- gsub(&quot;\\b\\b|&quot;, &quot;&quot;, news_mentions_profs$string_match_names_lower)
news_mentions_profs$string_match_names_lower &lt;- gsub(&quot;\\)&quot;, &quot;&quot;, news_mentions_profs$string_match_names_lower)
news_mentions_profs$string_match_names_lower &lt;- gsub(&quot;\\(&quot;, &quot;&quot;, news_mentions_profs$string_match_names_lower)</code></pre>
<p>Detect affiliation:</p>
<pre class="r"><code>news_mentions_profs$affiliation &lt;- str_detect(news_mentions_profs$article_lowercase, news_mentions_profs$string_match_names_lower)</code></pre>
<p>Flag mentions to remove multiple regional newspapers discussing the
same person:</p>
<pre class="r"><code>news_mentions_profs$regional_duplicate &lt;- duplicated(news_mentions_profs[c(&quot;profile_id&quot;, &quot;headline&quot;, &quot;length&quot;)])</code></pre>
<p>Drop redundant fields:</p>
<pre class="r"><code>news_mentions_profs &lt;- news_mentions_profs %&gt;%
    select(-string_match_names, -last, -article_lowercase, -string_match_names_lower)</code></pre>
<p>Write this out to our database:</p>
<pre class="r"><code>dbWriteTable(con, &quot;lexis_nexis_mentions&quot;, news_mentions_profs)</code></pre>
<p>```</p>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIk5leGlzX2RhdGFfaGFuZGxpbmciDQphdXRob3I6ICJBbmEgTWFjYW5vdmljIg0KZGF0ZTogIjIwMjMtMTItMDYiDQotLS0NClRoaXMgc2NyaXB0IHJlYWRzIGluIGFuZCBwYXJzZXMgZGF0YSBmcm9tIExleGlzTmV4aXMuDQoNCg0KYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9DQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpDQprbml0cjo6b3B0c19jaHVuayRzZXQoZXZhbCA9IEZBTFNFKQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KHdhcm5pbmcgPSBGQUxTRSkNCmtuaXRyOjpvcHRzX2NodW5rJHNldChtZXNzYWdlID0gRkFMU0UpDQpgYGANCg0KTG9hZCB0aGUgcGFja2FnZXM6DQpgYGB7ciBtZXNzYWdlPSAgRiwgd2FybmluZyA9IEZ9DQpsaWJyYXJ5KGdyb3VuZGhvZykNCnBhY2thZ2VzX3RvX2xvYWQgPC0gYygicmVhZHIiLCAiZHBseXIiLCAic3RyaW5nciIsICJ0aWR5ciIsICJ0aWR5dmVyc2UiLA0KICAgICAgICAgICAgICAgICAgICAgICJSUG9zdGdyZXMiLCAibHVicmlkYXRlIiwgInJlYWR0ZXh0IiwNCiAgICAgICAgICAgICAgICAgICAgICAiREJJIiwgIlJPREJDIiwgIm9kYmMiKQ0KZ3JvdW5kaG9nLmxpYnJhcnkocGFja2FnZXNfdG9fbG9hZCwgZGF0ZSA9ICIyMDIzLTEyLTAxIikNCg0KcGFja2FnZXNfdG9fbG9hZCA8LSBjKCJvcGVuYWxleFIiKQ0KZ3JvdW5kaG9nLmxpYnJhcnkocGFja2FnZXNfdG9fbG9hZCwgZGF0ZSA9ICIyMDI0LTAzLTAxIikNCmBgYA0KDQpMb2FkIHRoZSBSIHBhY2thZ2UgYnkgSi4gR3J1YmJlciB0aGF0IGNvbnZlbmllbnRseSB0aWRpZXMgdXAgdGhlIExleGlzTmV4aXMgZGF0YToNCmBgYHtyIG1lc3NhZ2U9ICBGLCB3YXJuaW5nID0gRn0NCiMgcmVtb3Rlczo6aW5zdGFsbF9naXRodWIoIkpCR3J1YmVyL0xleGlzTmV4aXNUb29scyIpDQpsaWJyYXJ5KCJMZXhpc05leGlzVG9vbHMiKQ0KYGBgDQoNCiMgVGlkeSB1cCBwcm9mZXNzb3IgZGF0YSBmcm9tIE5BUkNJUw0KDQpDb25uZWN0IHRvIGRhdGFiYXNlOg0KYGBge3J9DQojIGRlZmF1bHQgcG9ydCBoZXJlLCBjaGFuZ2UgaWYgbmVlZGVkDQpwb3J0IDwtIDU0MzINCiMgdXNlcm5hbWUNCnVzZXIgPC0gIiINCiMgcGFzc3dvcmQNCnBhc3N3b3JkIDwtICIiDQojIGRhdGFiYXNlIG5hbWUNCmRhdGFiYXNlX25hbWUgPC0gIiINCg0KY29uIDwtIFJQb3N0Z3Jlczo6ZGJDb25uZWN0KFJQb3N0Z3Jlczo6UG9zdGdyZXMoKSwNCiAgICAgICAgICAgICAgICAgZGJuYW1lPSBkYXRhYmFzZV9uYW1lLA0KICAgICAgICAgICAgICAgICBwb3J0ID0gcG9ydCwNCiAgICAgICAgICAgICAgICAgdXNlciA9IHVzZXIsIA0KICAgICAgICAgICAgICAgICBwYXNzd29yZCA9IHBhc3N3b3JkKQ0KDQpgYGANCg0KIyBMb2FkaW5nIGluIHRoZSBkYXRhDQoNClNjcmlwdCAibGV4aXNfaGVscGVyX2NvbXBpbGUuUiIgY29tcGlsZXMgZGF0YSBmcm9tIHZhcmlvdXMgZG93bmxvYWQgc3ViLWZvbGRlcnMsIA0KY2xlYW5zIGl0LCBhbmQgcmVtb3ZlcyBwcm9mZXNzb3JzIHdlIGRvIG5vdCBjb25zaWRlciBkdWUgdG8gYW1iaWd1b3VzIG5hbWVzLg0KDQpCZWxvdywgd2UgbGVhdmUgYW4gZXhhbXBsZSBvZiB0aGUgY29kZSB3ZSB1c2UgdG8gZXh0cmFjdCB0aGUgZGF0YSBmcm9tIGZpbGVzDQpkb3dubG9hZGVkIGZyb20gTGV4aXMgVW5pLg0KDQpMb2FkIHRoZSB3b3JkIGZpbGVzIGZyb20gdGhlIGluZGl2aWR1YWwgcHJvZmVzc29yIHppcHMgYW5kIGV4dHJhY3QgdGhlIA0KYXJ0aWNsZSB0ZXh0czoNCmBgYHtyfQ0KZm9sZGVyIDwtICIuLi9kb3dubG9hZHMvemlwZmlsZXMiDQphbGxfZG9jcyA8LSBsbnRfcmVhZCh4ID0gZm9sZGVyLCBjb252ZXJ0X2RhdGUgPSBGLCBleHRyYWN0X3BhcmFncmFwaHMgPSBGKQ0KbWV0YV9kYXRhIDwtIGFsbF9kb2NzQG1ldGENCm1ldGFfZGF0YSRwcm9maWxlX2lkIDwtIHN0cl9zcGxpdF9pKG1ldGFfZGF0YSRTb3VyY2VfRmlsZSwgIi96aXBzLyIsIDIpDQptZXRhX2RhdGEkcHJvZmlsZV9pZCA8LSBzdHJfc3BsaXRfaShtZXRhX2RhdGEkcHJvZmlsZV9pZCwgIl8iLCAxKQ0KYGBgDQoNCiMgQ2xlYW4gdGhlIExleGlzTmV4aXMgZGF0YQ0KDQpUaWR5IHVwIHRoZSBkYXRlczoNCmBgYHtyfQ0KbWV0YV9kYXRhJGRhdGVfZW5nIDwtIHRvbG93ZXIobWV0YV9kYXRhJERhdGUpDQojIHJlcGxhY2UgZHV0Y2ggZGF0ZXMgd2l0aCBlbmdsaXNoIGZvciBlYXNpZXIgY29udmVyc2lvbiBsYXRlciBvbg0KbWV0YV9kYXRhJGRhdGVfZW5nIDwtIHN0cl9yZXBsYWNlKG1ldGFfZGF0YSRkYXRlX2VuZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiamFudWFyaSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImphbnVhcnkiKQ0KbWV0YV9kYXRhJGRhdGVfZW5nIDwtIHN0cl9yZXBsYWNlKG1ldGFfZGF0YSRkYXRlX2VuZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZmVicnVhcmkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmZWJydWFyeSIpDQptZXRhX2RhdGEkZGF0ZV9lbmcgPC0gc3RyX3JlcGxhY2UobWV0YV9kYXRhJGRhdGVfZW5nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYWFydCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1hcmNoIikNCm1ldGFfZGF0YSRkYXRlX2VuZyA8LSBzdHJfcmVwbGFjZShtZXRhX2RhdGEkZGF0ZV9lbmcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1laSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1heSIpDQptZXRhX2RhdGEkZGF0ZV9lbmcgPC0gc3RyX3JlcGxhY2UobWV0YV9kYXRhJGRhdGVfZW5nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYWkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXkiKQ0KbWV0YV9kYXRhJGRhdGVfZW5nIDwtIHN0cl9yZXBsYWNlKG1ldGFfZGF0YSRkYXRlX2VuZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAianVuaSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImp1bmUiKQ0KbWV0YV9kYXRhJGRhdGVfZW5nIDwtIHN0cl9yZXBsYWNlKG1ldGFfZGF0YSRkYXRlX2VuZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAianVsaSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImp1bHkiKQ0KbWV0YV9kYXRhJGRhdGVfZW5nIDwtIHN0cl9yZXBsYWNlKG1ldGFfZGF0YSRkYXRlX2VuZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXVndXN0dXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJhdWd1c3QiKQ0KbWV0YV9kYXRhJGRhdGVfZW5nIDwtIHN0cl9yZXBsYWNlKG1ldGFfZGF0YSRkYXRlX2VuZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib2t0b2JlciIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9jdG9iZXIiKQ0KbWV0YV9kYXRhJGRhdGVfZW5nIDwtIHN0cl9yZXBsYWNlKG1ldGFfZGF0YSRkYXRlX2VuZywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGV6ZW1iZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkZWNlbWJlciIpDQoNCiMgY29udmVydCB0aGUgZGF0ZXMNCm1ldGFfZGF0YSRkYXRlX3RpZHkgPC0gbHVicmlkYXRlOjpwYXJzZV9kYXRlX3RpbWUobWV0YV9kYXRhJGRhdGVfZW5nLCAgYygiZG15IiwgIm1kLHkiKSkNCg0KIyBnZXQgdGhlIHllYXINCm1ldGFfZGF0YSR5ZWFyIDwtIHllYXIobWV0YV9kYXRhJGRhdGVfdGlkeSkNCg0KIyBzZWxlY3QgY29sdW1ucyBvZiBpbnRlcmVzdA0KbWV0YV9kYXRhX3NlbCA8LSBtZXRhX2RhdGEgJT4lDQogIHNlbGVjdChJRCwgTmV3c3BhcGVyLCBMZW5ndGg6QXV0aG9yLCBIZWFkbGluZSwgcHJvZmlsZV9pZCwgZGF0ZV90aWR5LCB5ZWFyKQ0KDQpjb2xuYW1lcyhtZXRhX2RhdGFfc2VsKSA8LSB0b2xvd2VyKGNvbG5hbWVzKG1ldGFfZGF0YV9zZWwpKQ0KYGBgDQoNClByZXBhcmUgdGhlIGFydGljbGUgdGV4dHM6DQpgYGB7cn0NCmFydGljbGVfY29udGVudCA8LSBhbGxfZG9jc0BhcnRpY2xlcw0KY29sbmFtZXMoYXJ0aWNsZV9jb250ZW50KSA8LSB0b2xvd2VyKGNvbG5hbWVzKGFydGljbGVfY29udGVudCkpDQpgYGANCg0KQ2xlYW4gdXAgdGhlIG1lbW9yeToNCmBgYHtyfQ0Kcm0oYWxsX2RvY3MpDQpybShtaXNzaW5nX2luZGljZXMpDQpnYygpDQpgYGANCg0KTWVyZ2UgdGhlIG1ldGFkYXRhIGFuZCB0aGUgY29udGVudA0KYGBge3J9DQpuZXdzX21lbnRpb25zIDwtIG1lcmdlKG1ldGFfZGF0YV9zZWwsDQogICAgICAgICAgICAgICAgICAgICAgIGFydGljbGVfY29udGVudCwNCiAgICAgICAgICAgICAgICAgICAgICAgYnkgPSAiaWQiKQ0KDQojIHByb2ZpbGUgSUQgdG8gbWF0Y2ggdGhlIHJlc3QNCm5ld3NfbWVudGlvbnMkcHJvZmlsZV9pZCA8LSBwYXN0ZTAoImh0dHBzOi8vd3d3Lm5hcmNpcy5ubC9wZXJzb24vUmVjb3JkSUQvIiwgbmV3c19tZW50aW9ucyRwcm9maWxlX2lkKQ0KYGBgDQoNCkZpbHRlciBvdXIgcHJvZmVzc29ycyB3ZSBkbyBub3Qgd2FudCB0byBjb25zaWRlciBkdWUgdG8gYW1iaWd1b3VzIG5hbWVzOg0KYGBge3J9DQpleGNsdWRlX3Byb2ZzIDwtIGMoJ1BSUzEyNjA2NTQnLCAnUFJTMTI2NDIzMicsICdQUlMxMjkwMjIzJywNCiAgICAgICAgICAgICAgICAgICAnUFJTMTI5MDkxMicsJ1BSUzEyOTEyODInLCAnUFJTMTI5ODc3NScsDQogICAgICAgICAgICAgICAgICAgJ1BSUzEyOTk1MTcnLCAnUFJTMTMwMzE5MCcsICdQUlMxMzA4MzY0JywNCiAgICAgICAgICAgICAgICAgICAnUFJTMTMxMzgyMScsICdQUlMxMzE0MjkyJywgJ1BSUzEzMTU5MTknLA0KICAgICAgICAgICAgICAgICAgICdQUlMxMzE2MDk0JywgJ1BSUzEzMjE5MjYnLCAnUFJTMTMyNDUwNCcsDQogICAgICAgICAgICAgICAgICAgJ1BSUzEzMjUxMzEnLCAnUFJTMTMyOTA0MCcsICdQUlMxMzMwMDg5JywNCiAgICAgICAgICAgICAgICAgICAnUFJTMTMzMTYyNycsICdQUlMxMzMxOTgwJywgJ1BSUzEzMzI4NzcnLA0KICAgICAgICAgICAgICAgICAgICdQUlMxMzM0MDA3JywgJ1BSUzEzMzg5MzQnLCAnUFJTMTM0MTIzOCcsDQogICAgICAgICAgICAgICAgICAgJ1BSUzEzNDkwMDknLCAnUFJTMTM1MDc3NCcsICdQUlMxMjYwMDM5JywNCiAgICAgICAgICAgICAgICAgICAnUFJTMTI2NTY2NScsICdQUlMxMjc2MjExJywgJ1BSUzEzMzYyMDMnLA0KICAgICAgICAgICAgICAgICAgICdQUlMxMzI5OTY3JywgJ1BSUzEzMzQwMjgnKQ0KYGBgDQoNCg0KIyBBcnRpY2xlIGNsYXNzaWZpY2F0aW9uDQpEZW5vdGUgd2hldGhlciBhbiBhcnRpY2xlIGlzIGZyb20gYSBuYXRpb25hbCwgcmVnaW9uYWwgb3Igc3BlY2lhbGl6ZWQgRHV0Y2ggc291cmNlLCBvciBwZXJoYXBzIGEgaGlnaGVyLXByb2ZpbGUgaW50ZXJuYXRpb25hbCBzb3VyY2U6DQpgYGB7cn0NCnNvdXJjZSgicmVzb3VyY2VzL2FsdG1ldHJpY19uZXdzX291dGxldF9jbGFzc2lmaWNhdGlvbi5SIikNCmBgYA0KDQoNClJlbW92ZSBzcGFjZXMgYXJvdW5kIC8gZm9yIGVhc2llciBpZGVudGlmaWNhdGlvbjoNCmBgYHtyfQ0KbmV3c19tZW50aW9ucyRuZXdzcGFwZXJfdGlkeSA8LSBzdHJfcmVwbGFjZShuZXdzX21lbnRpb25zJG5ld3NwYXBlciwgIiBcXC8gIiwgIlxcLyIpDQpgYGANCg0KRGVub3RlIHdoZXRoZXIgdGhlIGFydGljbGUgYmVsb25ncyB0byBhbnkgb2YgdGhlc2UsIGFuZCB0aGVuIGFsc28gZXhjbHVkZQ0Kb25lIHNvdXJjZSB0aGF0IHdvcmtzIGEgbG90IHdpdGggbmV3c2xldHRlcnMsIGJ1dCBub3QgYWN0dWFsIG5ld3M6DQpgYGB7cn0NCiMgbmF0aW9uYWwgRHV0Y2ggc291cmNlcw0KbmV3c19tZW50aW9ucyRuYXRpb25hbF9ubCA8LSBpZmVsc2UodG9sb3dlcihuZXdzX21lbnRpb25zJG5ld3NwYXBlcl90aWR5KSAlaW4lIHRvbG93ZXIobmF0aW9uYWxfbmV3c19ubCksIDEsIDApDQojIGxvY2FsIER1dGNoIHNvdXJjZXMNCm5ld3NfbWVudGlvbnMkcmVnaW9uYWxfbmwgPC0gaWZlbHNlKHRvbG93ZXIobmV3c19tZW50aW9ucyRuZXdzcGFwZXJfdGlkeSkgJWluJSB0b2xvd2VyKHJlZ2lvbmFsX25ld3NfbmwpLCAxLCAwKQ0KIyBoaWdoZXItcHJvZmlsZSBpbnRlcmFudGlvbmFsIHNvdXJjZXMNCm5ld3NfbWVudGlvbnMkaGlnaF9wcm9mX2ludGwgPC0gaWZlbHNlKHRvbG93ZXIobmV3c19tZW50aW9ucyRuZXdzcGFwZXJfdGlkeSkgJWluJSB0b2xvd2VyKGhpZ2hfcHJvZmlsZV9pbnQpLCAxLCAwKQ0KIyBuZXdzbGV0dGVycyBieSAibmV3cyBiaXRlcyINCm5ld3NfbWVudGlvbnMkbmV3c2xldHRlciA8LSBpZmVsc2UodG9sb3dlcihuZXdzX21lbnRpb25zJG5ld3NwYXBlcl90aWR5KSAlaW4lIHRvbG93ZXIobmV3c19iaXRlcyksIDEsIDApDQojIFBSIGRvY3VtZW50cw0KbmV3c19tZW50aW9ucyRwcl9uZXdzIDwtIGlmZWxzZSh0b2xvd2VyKG5ld3NfbWVudGlvbnMkbmV3c3BhcGVyX3RpZHkpICVpbiUgdG9sb3dlcihwcl9nb3Z0KSwgMSwgMCkNCiMgdW52aWVyc2l0eSBuZXdzcGFwZXJzDQpuZXdzX21lbnRpb25zJHVuaV9uZXdzIDwtIGlmZWxzZSh0b2xvd2VyKG5ld3NfbWVudGlvbnMkbmV3c3BhcGVyX3RpZHkpICVpbiUgdG9sb3dlcih1bmlfbmV3cyksIDEsIDApDQojIGJsb2dzDQpuZXdzX21lbnRpb25zJGJsb2cgPC0gaWZlbHNlKHN0cl9kZXRlY3QodG9sb3dlcihuZXdzX21lbnRpb25zJG5ld3NwYXBlcl90aWR5KSwgImJsb2ciKSwgMSwgMCkNCm5ld3NfbWVudGlvbnMkYmxvZyA8LSBpZmVsc2UoaXMubmEobmV3c19tZW50aW9ucyRibG9nKSwgMCwgbmV3c19tZW50aW9ucyRibG9nKQ0KIyBpcnJlbGV2YW50DQpuZXdzX21lbnRpb25zJGlycmVsZXZhbnQgPC0gaWZlbHNlKHRvbG93ZXIobmV3c19tZW50aW9ucyRuZXdzcGFwZXJfdGlkeSkgJWluJSB0b2xvd2VyKGlycmVsZXZhbnQpLCAxLCAwKQ0KDQojIG5vIHNvdXJjZQ0KbmV3c19tZW50aW9ucyRzb3VyY2VfdW5rbm93biA8LSBpZmVsc2UobmV3c19tZW50aW9ucyRuZXdzcGFwZXJfdGlkeSA9PSAiIiwgMSwgMCkNCm5ld3NfbWVudGlvbnMkc291cmNlX3Vua25vd24gPC0gaWZlbHNlKGlzLm5hKG5ld3NfbWVudGlvbnMkbmV3c3BhcGVyX3RpZHkpLCAxLCBuZXdzX21lbnRpb25zJHNvdXJjZV91bmtub3duKQ0KDQojIGFuZCB0aGUgcmVtYWluZGVyDQpuZXdzX21lbnRpb25zJHNvdXJjZV91bmNsYXNzaWZpZWQgPC0gaWZlbHNlKG5ld3NfbWVudGlvbnMkbmF0aW9uYWxfbmwgPT0gMCAmIG5ld3NfbWVudGlvbnMkcmVnaW9uYWxfbmwgPT0gMCAmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3c19tZW50aW9ucyRoaWdoX3Byb2ZfaW50bCA9PSAwICYgbmV3c19tZW50aW9ucyRuZXdzbGV0dGVyID09IDAgJg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld3NfbWVudGlvbnMkcHJfbmV3cyA9PSAwICYgbmV3c19tZW50aW9ucyR1bmlfbmV3cyA9PSAwICYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdzX21lbnRpb25zJGJsb2cgPT0gMCAmDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3c19tZW50aW9ucyRzb3VyY2VfdW5rbm93biA9PSAwLCAxLCAwKQ0KDQojIGdldCBhIGNhdGVnb3JpY2FsIHZhcmlhYmxlDQpuZXdzX21lbnRpb25zJHNvdXJjZV90eXBlIDwtIGlmZWxzZShuZXdzX21lbnRpb25zJG5hdGlvbmFsX25sID09IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmF0aW9uYWxfbmwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKG5ld3NfbWVudGlvbnMkcmVnaW9uYWxfbmwgPT0gMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAicmVnaW9uYWxfbmwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShuZXdzX21lbnRpb25zJGhpZ2hfcHJvZl9pbnRsID09IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJoaWdoX3Byb2ZfaW50bCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShuZXdzX21lbnRpb25zJG5ld3NsZXR0ZXIgPT0gMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzbGV0dGVyIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShuZXdzX21lbnRpb25zJHByX25ld3MgPT0gMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAicHJfbmV3cyIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShuZXdzX21lbnRpb25zJHVuaV9uZXdzID09IDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1bmlfbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShuZXdzX21lbnRpb25zJGJsb2cgPT0gMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJibG9nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShuZXdzX21lbnRpb25zJGlycmVsZXZhbnQgPT0gMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaXJyZWxldmFudCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKG5ld3NfbWVudGlvbnMkc291cmNlX3Vua25vd24gPT0gMSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInVua25vd24iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3RoZXIiKSkpKSkpKSkpDQpgYGANCg0KU2VlIGlmIHRoZSBzb3VyY2UgaXMgYW4gb25saW5lIG91dGxldC93ZWJzaXRlOg0KYGBge3J9DQpuZXdzX21lbnRpb25zJG9ubGluZV9yZXNvdXJjZSA8LSBzdHJfZGV0ZWN0KHRvbG93ZXIobmV3c19tZW50aW9ucyRuZXdzcGFwZXJfdGlkeSksICJcXC5ubCIpDQpuZXdzX21lbnRpb25zJG9ubGluZV9yZXNvdXJjZV8yIDwtIHN0cl9kZXRlY3QodG9sb3dlcihuZXdzX21lbnRpb25zJG5ld3NwYXBlcl90aWR5KSwgIlxcLmNvIikNCm5ld3NfbWVudGlvbnMkb25saW5lX3Jlc291cmNlIDwtIGlmZWxzZShuZXdzX21lbnRpb25zJG9ubGluZV9yZXNvdXJjZSA9PSBUUlVFIHwgbmV3c19tZW50aW9ucyRvbmxpbmVfcmVzb3VyY2VfMiA9PSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCkNCg0KbmV3c19tZW50aW9ucyA8LSBuZXdzX21lbnRpb25zICU+JSBzZWxlY3QoLW9ubGluZV9yZXNvdXJjZV8yKQ0KYGBgDQoNCg0KIyMgU2VlIG1lbnRpb25zIG9mIHByb2Zlc3NvcidzIG5hbWVzIEFORCBpbnN0aXR1dGlvbnMNCg0KRm9yIHJvYnVzdG5lc3MgY2hlY2tzLCB3ZSBtaWdodCB3YW50IHRvIGtub3cgd2hpY2ggYXJ0aWNsZXMgaW5jbHVkZSBib3RoIHRoZQ0KcHJvZmVzc29yJ3MgbGFzdCBuYW1lIGFuZCBhbnkgb2YgdGhlIGluc3RpdHV0aW9ucyB0aGV5IGhhdmUgYmVlbiBhZmZpbGlhdGVkIHdpdGgNCmR1cmluZyB0aGVpciBsaWZldGltZXMuIFRoaXMgY291bGQgaGVscCB1cyBleGNsdWRlIGFydGljbGVzIGFib3V0IHBlb3BsZSB3aXRoIHRoZQ0Kc2FtZSBuYW1lIGFuZCBzb21lIHNvcnQgb2YgYWNhZGVtaWMvdW5pdmVyc2l0eSBhZmZpbGlhdGlvbiwgYnV0IHdobyBhcmUgbm90IG91cg0KcHJvZmVzc29yIGluIHF1ZXN0aW9uLiANCg0KUmVhZCBpbiB0aGUgaW5zdGl0dXRpb25hbCBzZWFyY2g6DQpgYGB7cn0NCmFsbF9wcm9mX2luc3Rfc2VhcmNoIDwtIGRiUmVhZFRhYmxlKGNvbiwgIm9hX2FmZmlsaWF0aW9uX3N0cmluZ19zZWFyY2giKQ0KYGBgDQoNCg0KTm93LCBtZXJnZSB0aGUgcHJvZmVzc29yIElEcyB3aXRoIExleGlzIG91dHB1dHM6DQpgYGB7cn0NCmNvbG5hbWVzKGFsbF9wcm9mX2luc3Rfc2VhcmNoKVsxXSA8LSAicHJvZmlsZV9pZCINCm5ld3NfbWVudGlvbnNfcHJvZnMgPC0gbWVyZ2UobmV3c19tZW50aW9ucywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsX3Byb2ZfaW5zdF9zZWFyY2gsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gInByb2ZpbGVfaWQiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQpgYGANCg0KTm93IGFsc28gaW5jbHVkZSB0aGVpciBsYXN0IG5hbWU6DQpgYGB7cn0NCnByb2ZzX2Z1bGwgPC0gZGJSZWFkVGFibGUoY29uLCAibmFyY2lzX3Byb2ZfaW5mbyIpDQoNCm5ld3NfbWVudGlvbnNfcHJvZnMgPC0gbWVyZ2UobmV3c19tZW50aW9uc19wcm9mcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZnNfZnVsbFtjKCJwcm9maWxlX2lkIiwgImxhc3QiKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gInByb2ZpbGVfaWQiKQ0KDQojIGxvd2VyY2FzZSB0ZXh0IGFuZCB1bmkgc3RyaW5ncw0KbmV3c19tZW50aW9uc19wcm9mcyRhcnRpY2xlX2xvd2VyY2FzZSA8LSB0b2xvd2VyKG5ld3NfbWVudGlvbnNfcHJvZnMkYXJ0aWNsZSkNCm5ld3NfbWVudGlvbnNfcHJvZnMkc3RyaW5nX21hdGNoX25hbWVzX2xvd2VyIDwtIHRvbG93ZXIobmV3c19tZW50aW9uc19wcm9mcyRzdHJpbmdfbWF0Y2hfbmFtZXMpDQoNCiMgcmVtb3ZlIHNwZWNpYWwgY2hhcmFjdGVycyBmcm9tIHRoZSBzdHJpbmcgbWF0Y2ggY29sdW1ucw0KbmV3c19tZW50aW9uc19wcm9mcyRzdHJpbmdfbWF0Y2hfbmFtZXNfbG93ZXIgPC0gZ3N1YigiW1xVNEUwMC1cVTlGRkZcVTMwMDAtXFUzMDNGXSIsICIiLCBuZXdzX21lbnRpb25zX3Byb2ZzJHN0cmluZ19tYXRjaF9uYW1lc19sb3dlcikNCm5ld3NfbWVudGlvbnNfcHJvZnMkc3RyaW5nX21hdGNoX25hbWVzX2xvd2VyIDwtIGdzdWIoIu+8iCkiLCAiIiwgbmV3c19tZW50aW9uc19wcm9mcyRzdHJpbmdfbWF0Y2hfbmFtZXNfbG93ZXIpDQpuZXdzX21lbnRpb25zX3Byb2ZzJHN0cmluZ19tYXRjaF9uYW1lc19sb3dlciA8LSBnc3ViKCJcXGJcXGJ8IiwgIiIsIG5ld3NfbWVudGlvbnNfcHJvZnMkc3RyaW5nX21hdGNoX25hbWVzX2xvd2VyKQ0KbmV3c19tZW50aW9uc19wcm9mcyRzdHJpbmdfbWF0Y2hfbmFtZXNfbG93ZXIgPC0gZ3N1YigiXFwpIiwgIiIsIG5ld3NfbWVudGlvbnNfcHJvZnMkc3RyaW5nX21hdGNoX25hbWVzX2xvd2VyKQ0KbmV3c19tZW50aW9uc19wcm9mcyRzdHJpbmdfbWF0Y2hfbmFtZXNfbG93ZXIgPC0gZ3N1YigiXFwoIiwgIiIsIG5ld3NfbWVudGlvbnNfcHJvZnMkc3RyaW5nX21hdGNoX25hbWVzX2xvd2VyKQ0KYGBgDQoNCkRldGVjdCBhZmZpbGlhdGlvbjoNCmBgYHtyfQ0KbmV3c19tZW50aW9uc19wcm9mcyRhZmZpbGlhdGlvbiA8LSBzdHJfZGV0ZWN0KG5ld3NfbWVudGlvbnNfcHJvZnMkYXJ0aWNsZV9sb3dlcmNhc2UsIG5ld3NfbWVudGlvbnNfcHJvZnMkc3RyaW5nX21hdGNoX25hbWVzX2xvd2VyKQ0KYGBgDQoNCg0KRmxhZyBtZW50aW9ucyB0byByZW1vdmUgbXVsdGlwbGUgcmVnaW9uYWwgbmV3c3BhcGVycyBkaXNjdXNzaW5nIHRoZSBzYW1lDQpwZXJzb246DQpgYGB7cn0NCm5ld3NfbWVudGlvbnNfcHJvZnMkcmVnaW9uYWxfZHVwbGljYXRlIDwtIGR1cGxpY2F0ZWQobmV3c19tZW50aW9uc19wcm9mc1tjKCJwcm9maWxlX2lkIiwgImhlYWRsaW5lIiwgImxlbmd0aCIpXSkNCmBgYA0KDQpEcm9wIHJlZHVuZGFudCBmaWVsZHM6DQpgYGB7cn0NCm5ld3NfbWVudGlvbnNfcHJvZnMgPC0gbmV3c19tZW50aW9uc19wcm9mcyAlPiUNCiAgICBzZWxlY3QoLXN0cmluZ19tYXRjaF9uYW1lcywgLWxhc3QsIC1hcnRpY2xlX2xvd2VyY2FzZSwgLXN0cmluZ19tYXRjaF9uYW1lc19sb3dlcikNCmBgYA0KDQoNCldyaXRlIHRoaXMgb3V0IHRvIG91ciBkYXRhYmFzZToNCmBgYHtyfQ0KZGJXcml0ZVRhYmxlKGNvbiwgImxleGlzX25leGlzX21lbnRpb25zIiwgbmV3c19tZW50aW9uc19wcm9mcykNCmBgYA0KDQpgYGANCg0KDQo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Lexis_nexis_parser.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
