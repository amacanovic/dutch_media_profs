<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ana Macanovic" />

<meta name="date" content="2023-12-19" />

<title>Inference on professor gender</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a>
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="index.html">Code homepage</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon glyphicon glyphicon-list"></span>
     
    Scripts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="SQL_tutorial.html">Intro: SQL tutorial</a>
    </li>
    <li>
      <a href="OpenAlex_Altmetric_data_download.html">Prep. 1: Open Alex and Altmetric data download</a>
    </li>
    <li>
      <a href="Gender_inference.html">Prep. 2: Gender inference</a>
    </li>
    <li>
      <a href="Grant_parsing.html">Prep. 3: Grant parsing</a>
    </li>
    <li>
      <a href="Lexis_nexis_parser.html">Prep. 4: Lexis data parser</a>
    </li>
    <li>
      <a href="Panel_data_compilation.html">Prep. 5: Panel data compilation</a>
    </li>
    <li>
      <a href="Analyses_main.html">Main analyses</a>
    </li>
    <li>
      <a href="Supplement_data_information.html">Supplement 1: Database description and coverage</a>
    </li>
    <li>
      <a href="Data_coverage.html">Supplement 2: NARCIS and OA database comparison</a>
    </li>
    <li>
      <a href="Analyses_supplemental.html">Supplement 3: Additional analyses and robustness checks</a>
    </li>
    <li>
      <a href="News_classification_other_functions.html">Supplement 4: Additional resources and functions</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/amacanovic/dutch_media_profs">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Inference on professor gender</h1>
<h4 class="author">Ana Macanovic</h4>
<h4 class="date">2023-12-19</h4>

</div>


<p>This script checks assigns professor names as male or female. Because
there are no self-reports of gender in the Narcis database, we infer a
professor’s gender from the first name filed in the database using
Genderize.io API and combine it with the data from the Dutch database of
first names (Voornamenbank).</p>
<p>Bear in mind that our inference is based on the “roepnaam”, i.e.,
“calling name”, which, in the Netherlands, does not have to match one’s
name given at birth. Therefore, we can assume that, in many cases,
professors could have adjusted their name in the database from their
name given at birth to the “roepnaam” that best reflected their gender
identity. We, then, base our inference on this entry.</p>
<p>Load the libraries that we need:</p>
<p>Connect to the postgres database. Use own credentials.</p>
<pre class="r"><code>port &lt;- 5432
user &lt;- &quot;postgres&quot;
password &lt;- &quot;dutchmediaprofssql&quot;
database_name &lt;- &quot;postgres&quot;

con &lt;- dbConnect(Postgres(),
                 dbname= database_name,
                 port = port,
                 user = user, 
                 password = password)

con # Checks connection is working</code></pre>
<div id="professors" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Professors</h1>
<div id="tidy-up-professor-data-from-narcis" class="section level2"
number="1.1">
<h2><span class="header-section-number">1.1</span> Tidy up professor
data from NARCIS</h2>
<p>Load the professor profiles:</p>
<pre class="r"><code>load(&quot;raw_data/media_profs_profiles.rda&quot;)
profs &lt;- read_csv(&quot;raw_data/dutch_profs_urls.csv&quot;)

# merge the profs with their ORCIDs
colnames(profs)[c(1,7)] &lt;- c(&quot;id&quot;, &quot;profile_id&quot;)

profs_full &lt;- merge(profs,
                    metadf[, c(1:4, 361)],
                    by = &quot;profile_id&quot;)

# fix some first names that were cut short by mistake
profs_full$first[which(profs_full$first == &quot;wilfrie&quot;)] &lt;- &quot;wilfried&quot;
profs_full$first[which(profs_full$first == &quot;j&quot;)] &lt;- &quot;jan-willem&quot;
profs_full$first[which(profs_full$first == &quot;d&quot;)] &lt;- &quot;drona&quot;
profs_full$first[which(profs_full$first == &quot;l&quot;)] &lt;- &quot;luc&quot;
profs_full$first[which(profs_full$first == &quot;a&quot;)] &lt;- &quot;anna&quot;
profs_full$first[which(profs_full$full == &quot;vermunt, tina&quot;)] &lt;- &quot;tina&quot;
profs_full$first[which(profs_full$full == &quot;steennis, tom&quot;)] &lt;- &quot;tom&quot;
profs_full$first[which(profs_full$first == &quot;m&quot;)] &lt;- &quot;martijn&quot;
profs_full$first[which(profs_full$first == &quot;wouter\\&quot;)] &lt;- &quot;wouter&quot;
profs_full$first[which(profs_full$first == &quot;geert-j&quot;)] &lt;- &quot;geert-jan&quot;
profs_full$first[which(profs_full$first == &quot;jean-sébastie&quot;)] &lt;- &quot;jean-sébastien&quot;
profs_full$first[which(profs_full$first == &quot;jean-pier&quot;)] &lt;- &quot;jean-pierre&quot;
profs_full$first[which(profs_full$first == &quot;jean-bern&quot;)] &lt;- &quot;jean-bernard&quot;
profs_full$first[which(profs_full$first == &quot;anne-ma&quot;)] &lt;- &quot;anne-marie&quot;
profs_full$first[which(profs_full$first == &quot;peter-arn&quot;)] &lt;- &quot;peter-arno&quot;
profs_full$first[which(profs_full$first == &quot;frans-wille&quot;)] &lt;- &quot;frans-willem&quot;
profs_full$first[which(profs_full$first == &quot;jan-diede&quot;)] &lt;- &quot;jan-diederik&quot;
profs_full$first[which(profs_full$first == &quot;peter-pau&quot;)] &lt;- &quot;peter-paul&quot;
profs_full$first[which(profs_full$first == &quot;willem-ja&quot;)] &lt;- &quot;willem-jan&quot;
profs_full$first[which(profs_full$first == &quot;marie-colet&quot;)] &lt;- &quot;marie-colette&quot;
profs_full$first[which(profs_full$first == &quot;marie-jos&quot;)] &lt;- &quot;marie-josé&quot;
profs_full$first[which(profs_full$first == &quot;jean-sébastie&quot;)] &lt;- &quot;jean-sébastien&quot;
profs_full$first[which(profs_full$first == &quot;diederi&quot;)] &lt;- &quot;diederik&quot;
profs_full$first[which(profs_full$first == &quot;britas kl&quot;)] &lt;- &quot;britas klemens&quot;
profs_full$first[which(profs_full$first == &quot;gert-will&quot;)] &lt;- &quot;gert-willem&quot;
profs_full$first[which(profs_full$first == &quot;jean-christop&quot;)] &lt;- &quot;jean-christophe&quot;
profs_full$first[which(profs_full$first == &quot;genseri&quot;)] &lt;- &quot;genserik&quot;
profs_full$first[which(profs_full$first == &quot;marie-jea&quot;)] &lt;- &quot;marie-jeanne&quot;
profs_full$first[which(profs_full$full == &quot;posthuma,  danielle&quot;)] &lt;- &quot;danielle&quot;
profs_full$first[which(profs_full$first == &quot;huppertz&quot;)] &lt;- &quot;thom&quot;
# save the corrected data
saveRDS(profs_full, &quot;processed_data/narcis_prof_info_fixed.RDS&quot;)</code></pre>
</div>
<div id="using-genderize.io" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Using
Genderize.io</h2>
<div id="inferring-gender" class="section level3" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Inferring
gender</h3>
<pre class="r"><code># fill in own api key
genderize_api_key &lt;- &#39;&#39;

# list of names
names &lt;- unique(profs_full$first)

prof_name_gender &lt;- data.frame(matrix(NA, nrow = 0, ncol = 4))

for (i in 1:length(names)){
  name &lt;- names[i]
  output &lt;- genderize_io_function(name,
                      api_key = genderize_api_key,
                      country_id = &quot;NL&quot;)
  
  prof_name_gender &lt;- rbind(prof_name_gender,
                            output)
  print(paste(&quot;done with&quot;, i, &quot;out of&quot;, length(names)))
}

saveRDS(genderize_data , &quot;processed_data/prof_gender_genderize.RDS&quot;)</code></pre>
</div>
</div>
<div id="inference-using-the-voornamenbank" class="section level2"
number="1.3">
<h2><span class="header-section-number">1.3</span> Inference using the
Voornamenbank</h2>
<p>Use the same name list to get the data from the Dutch register by
calling the Nederlandes Voornamenbank:</p>
<pre class="r"><code>voornamenbank_data &lt;- data.frame(matrix(NA, nrow = 0, ncol = 5))

for (i in 1:length(names)) {
  name &lt;- names[i]
  url_call &lt;- paste0(&quot;https://nvb.meertens.knaw.nl/naam/is/&quot;, name)
  
  name_webpage &lt;- NA
  try(name_webpage &lt;- read_html(url_call))
  
  # extract name frequency table and gender info
  # if anything was retrieved
  if (!is.na(name_webpage)){
    if (length(name_webpage %&gt;% html_table()) &gt; 0) { # if there is info in a table
      
      table &lt;- name_webpage %&gt;% html_table() # extract a html_table
      
      table[[1]][table[[1]]==&quot;--&quot;] &lt;- &quot;0&quot;
      
      # find men, with first name and middle name counts
      gender_m_first &lt;- as.numeric(table[[1]]$X3[2])
      gender_m_volg &lt;- as.numeric(table[[1]]$X3[3])
      
      # find women, with first name and middle name counts
      gender_w_first &lt;- as.numeric(table[[1]]$X3[6])
      gender_w_volg &lt;- as.numeric(table[[1]]$X3[7])
      
      # build a row
      row &lt;- cbind.data.frame(name, 
                              gender_m_first,
                              gender_m_volg,
                              gender_w_first,
                              gender_w_volg)
      
      # bind to the overall dataframe
      voornamenbank_data &lt;- rbind(voornamenbank_data,
                                  row)
      
      print(paste(&quot;done with&quot;, i, &quot;out of&quot;, length(names)))
      
      # wait for 35 sec to be kind to the website
      Sys.sleep(35)
    }
  }
}</code></pre>
<p>Save this:</p>
<pre class="r"><code>saveRDS(voornamenbank_data, &quot;processed_data/prof_gender_voornamenbank.RDS&quot;)</code></pre>
</div>
<div
id="combine-the-genderize-and-voornamenbank-data-for-final-inference"
class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Combine the genderize
and voornamenbank data for final inference</h2>
<pre class="r"><code>genderize_data &lt;- readRDS(&quot;processed_data/prof_gender_genderize.RDS&quot;)
voornamenbank_data &lt;- readRDS(&quot;processed_data/prof_gender_voornamenbank.RDS&quot;)</code></pre>
<p>For the voornamenbank data, assign the gender based on a majority
rule. First, focus only on the given name (first name)</p>
<pre class="r"><code>voornamenbank_data &lt;- voornamenbank_data[c(&quot;name&quot;, &quot;gender_m_first&quot;, &quot;gender_w_first&quot;)]
# share men
voornamenbank_data$share_m &lt;- round(voornamenbank_data$gender_m_first / (voornamenbank_data$gender_m_first + voornamenbank_data$gender_w_first), 2)
# share women
voornamenbank_data$share_w &lt;- round(voornamenbank_data$gender_w_first / (voornamenbank_data$gender_m_first + voornamenbank_data$gender_w_first), 2)

# classify based on the simple majority rule
# select those in the range 0.4 - 0.6 as ambiguous
voornamenbank_data$gender &lt;- ifelse(voornamenbank_data$share_m &gt; 0.5, &quot;m&quot;,
                                    ifelse(voornamenbank_data$share_w &gt; 0.5, &quot;w&quot;,
                                           &quot;amb&quot;))

# we can then check the ambiguous names manually for the 33 names
table(voornamenbank_data$gender)</code></pre>
<p>Manual check for the ambiguous names and filter out empty and
typos:</p>
<pre class="r"><code>voornamenbank_data$gender[which(voornamenbank_data$name == &quot;rez&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;marijk&quot;)] &lt;- &quot;w&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;afshin&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;uli&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;keita&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;liviu&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;evgeny&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;andrey&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;joti&quot;)] &lt;- &quot;w&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;aurelien&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;cathal&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;jol&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;anupam&quot;)] &lt;- &quot;m&quot;
voornamenbank_data$gender[which(voornamenbank_data$name == &quot;uta&quot;)] &lt;- &quot;w&quot;

voornamenbank_data &lt;- filter(voornamenbank_data,
                             !is.na(name))

voornamenbank_data &lt;- filter(voornamenbank_data,
                             name != &quot;wilfrie&quot;)</code></pre>
<p>Understand the missclassification rate, which appears negligible at
0.55%:</p>
<pre class="r"><code># the share of people who might be missclassified in this manner
voornamenbank_data$missclassification &lt;- ifelse(voornamenbank_data$gender == &quot;m&quot;,
                                                voornamenbank_data$share_w,
                                                voornamenbank_data$share_m)
# total occurrences
voornamenbank_data$total_ocurrence &lt;- voornamenbank_data$gender_m_first + voornamenbank_data$gender_w_first

# weighted missclassification
weighted.mean(voornamenbank_data$missclassification, voornamenbank_data$total_ocurrence)*100</code></pre>
<p>Understand the missclassification rate for the genderize data, which
still appears negligible at 0.799%:</p>
<pre class="r"><code># the share of people who might be missclassified in this manner
genderize_data$missclassification &lt;- 1 - genderize_data$probability
# total occurrences
genderize_data$total_ocurrence &lt;- genderize_data$count

# weighted missclassification
weighted.mean(genderize_data$missclassification, genderize_data$total_ocurrence, na.rm = TRUE)*100</code></pre>
<p>Bind the data from genderize.io and voornamenbank:</p>
<pre class="r"><code># tidy up a bit
genderize_predictions &lt;- genderize_data[c(&quot;name&quot;, &quot;gender&quot;)]
colnames(genderize_predictions)[2] &lt;- &quot;gender_genderize&quot;
genderize_predictions$gender_genderize &lt;- ifelse(genderize_predictions$gender_genderize == &quot;male&quot;, &quot;m&quot;, &quot;w&quot;)
voornamenbank_predictions &lt;- voornamenbank_data[c(&quot;name&quot;, &quot;gender&quot;)]
colnames(voornamenbank_predictions)[2] &lt;- &quot;gender_voornamenbank&quot;

# combine
predictions_combined &lt;- merge(voornamenbank_predictions,
                              genderize_predictions,
                              by = &quot;name&quot;,
                              all.x = TRUE,
                              all.y = TRUE)

# filter out names not in the full prof list
predictions_combined &lt;- filter(predictions_combined,
                               name %in% profs_full$first)</code></pre>
<p>Check for disagreement:</p>
<pre class="r"><code>predictions_combined$agreement &lt;- ifelse(predictions_combined$gender_voornamenbank == predictions_combined$gender_genderize,
                                         &quot;yes&quot;,
                                         &quot;no&quot;)

predictions_combined$agreement &lt;- ifelse(is.na(predictions_combined$gender_voornamenbank)|is.na(predictions_combined$gender_genderize),
                                         &quot;missing&quot;,
                                         predictions_combined$agreement)

table(predictions_combined$agreement)</code></pre>
<p>There is only 38 instances of disagreement, and 211 missing
instances. For the missing instances, choose the one that is present.
For the missing ones or disagreements, resolve manually:</p>
<pre class="r"><code>predictions_combined$final_decision &lt;- ifelse(predictions_combined$agreement == &quot;yes&quot;,
                                              predictions_combined$gender_voornamenbank,
                                              ifelse(is.na(predictions_combined$gender_voornamenbank) &amp; is.na(predictions_combined$gender_genderize),
                                                     &quot;none&quot;,
                                                     ifelse(is.na(predictions_combined$gender_genderize),
                                                            predictions_combined$gender_voornamenbank,
                                                            ifelse(is.na(predictions_combined$gender_voornamenbank),
                                                                   predictions_combined$gender_genderize, 
                                                                   &quot;disagreement&quot;))))

predictions_combined$final_decision &lt;- ifelse(is.na(predictions_combined$final_decision), &quot;missing&quot;, predictions_combined$final_decision)

table(predictions_combined$final_decision)</code></pre>
<p>Bind the final decision with the professor list based on the
name:</p>
<pre class="r"><code>predictions_combined &lt;- predictions_combined[c(&quot;name&quot;, &quot;final_decision&quot;)]
colnames(predictions_combined) &lt;- c(&quot;first&quot;, &quot;inferred_gender&quot;)
profs_full_gender &lt;- merge(profs_full,
                           predictions_combined,
                           by = &quot;first&quot;,
                           all.x = TRUE)

# get the missing ones
profs_full_gender_missing &lt;- filter(profs_full_gender,
                                    inferred_gender %in% c(&quot;none&quot;, &quot;disagreement&quot;)| is.na(inferred_gender))</code></pre>
<p>For the people with missing names, manually double check (e.g., Jose
can be a woman’s or a man’s name based on their country of origin). Here
are the results:</p>
<pre class="r"><code>full_manual &lt;- c(&quot;seshan, kulathuiyer&quot;, &quot;denters, bas&quot;, &quot;bovenberg, lans&quot;, 
                 &quot;kemp, bas&quot;, &quot;lagendijk, inald&quot;, &quot;tjittes, rieme-jan&quot;, 
                 &quot;jacobs, haike&quot;, &quot;van dijck, josé&quot;, &quot;muris, jean&quot;, &quot;bruijn, jan-antoni&quot;, 
                 &quot;herings, jean-jacque&quot;, &quot;hancher, leigh&quot;, &quot;ten cate, olle&quot;, 
                 &quot;katoen, joost-pieter&quot;, &quot;eiben, gusz&quot;, &quot;de la rosette, jean&quot;, 
                 &quot;kuiper, wilmad&quot;, &quot;visscher, adrie&quot;, &quot;stougie, leen&quot;, &quot;grube, dirk-martin&quot;, 
                 &quot;kirn, hans-martin&quot;, &quot;werker, bas&quot;, &quot;de man, ard-pieter&quot;, 
                 &quot;venugopal, venkataraman&quot;, &quot;dorsman, leen&quot;, &quot;steketee, majone&quot;, 
                 &quot;herder, just&quot;, &quot;van bavel, bas&quot;, &quot;vroomen, jean&quot;, &quot;van der klaauw, bas&quot;, 
                 &quot;hillebrand, bas&quot;, &quot;donkers, bas&quot;, &quot;gupta, joyeeta&quot;, &quot;elzinga, bernet&quot;, 
                 &quot;peijnenburg, willie&quot;, &quot;vossen, piek&quot;, &quot;van de wiel, bas&quot;, &quot;tillie, jean&quot;, 
                 &quot;mijatovic, velja&quot;, &quot;kerstholt, josé&quot;, &quot;beekhoven van den boezem, frits-joost&quot;, 
                 &quot;jacobs, bas&quot;, &quot;van nieuwenhuizen, chijs&quot;, &quot;pras, aiko&quot;, &quot;van rijn, hedderik&quot;,
                 &quot;van steensel, bas&quot;, &quot;van den putte, bas&quot;, &quot;geenen, rinie&quot;, &quot;zhang, kouchi&quot;, 
                 &quot;ter weel, bas&quot;, &quot;schuurmans, ymre&quot;, &quot;rodenburg, bas&quot;, &quot;haring, bas&quot;,
                 &quot;battjes, hemme&quot;, &quot;suh, sangwon&quot;, &quot;chen, aoju&quot;, &quot;bloemer, jose&quot;, 
                 &quot;tzankova, ianika&quot;, &quot;moraga gonzález, jose&quot;, &quot;de bruin, bas&quot;, 
                 &quot;zeitler, uli&quot;, &quot;raaymakers, bas&quot;, &quot;ter haar romeny, bas&quot;, 
                 &quot;van riel, natal&quot;, &quot;bossier, philiep&quot;, &quot;bloem, bas&quot;, &quot;mulder, bela&quot;,
                 &quot;rothenberg, gadi&quot;, &quot;sibon, ody&quot;, &quot;arts, bas&quot;, &quot;van der bom, anske&quot;,
                 &quot;manohar, srirang&quot;, &quot;janssen, hans-gerd&quot;, &quot;mugele, frieder&quot;, &quot;de weijs, rolef&quot;,
                 &quot;eliantonio, mariolina&quot;, &quot;&#39;t hoen, peter-bram&quot;, &quot;ren, yijin&quot;, &quot;borghans, josé&quot;, 
                 &quot;liu, fenrong&quot;, &quot;murshed, mansoob&quot;, &quot;de jong, bas&quot;, &quot;van zelst, bas&quot;, &quot;novoselov, kostya&quot;, 
                 &quot;iacob, maria-eugenia&quot;, &quot;de leeuw, frank-erik&quot;, &quot;mcgonagle, tarlach&quot;, &quot;demmers, jolle&quot;, 
                 &quot;von stuckrad, kocku&quot;, &quot;pineda de gyvez, jose&quot;, &quot;zaura, egija&quot;, 
                 &quot;simons, tal&quot;, &quot;bai, yuling&quot;, &quot;bruining, hilgo&quot;, &quot;paape, leen&quot;,
                 &quot;takano, eriko&quot;, &quot;banerjee, tamalika&quot;,  &quot;staufer, urs&quot;, &quot;teusink, bas&quot;, 
                 &quot;oldenburg, bas&quot;, &quot;sanders, josé&quot;, &quot;plaat, aske&quot;, &quot;van der meer, devaraj&quot;, 
                 &quot;pei, yutao&quot;, &quot;bhargava, manjul&quot;, &quot;van de meerakker, bas&quot;, &quot;kuramae, eiko&quot;, 
                 &quot;zwaan, bas&quot;, &quot;van solingen, rini&quot;, &quot;esser, raingard&quot;, &quot;li, yuwen&quot;, 
                 &quot;weusten, bas&quot;, &quot;rasouli, soora&quot;, &quot;jonkman, bas&quot;, &quot;pena claros, marielos&quot;, 
                 &quot;van spronsen, francjan&quot;, &quot;ye, jianting&quot;, &quot;lowie, wander&quot;, 
                 &quot;lerm hayes, christa-maria&quot;, &quot;reniers, genseri&quot;, &quot;li, zili&quot;, 
                 &quot;kubat, bela&quot;, &quot;clarkson, carrol&quot;, &quot;scharnhorst, volkher&quot;,
                 &quot;kodden, bas&quot;, &quot;gangopadhyay, shubhashis&quot;, &quot;ananworanich, jintanat&quot;,
                 &quot;landsman-schwartz, vardit&quot;, &quot;dayal, pratika&quot;, &quot;simão henriques, josé&quot;,
                 &quot;spruit, leen&quot;, &quot;rietjens, bas&quot;, &quot;broekhuizen, kleis&quot;, &quot;kramer, eric-hans&quot;, 
                 &quot;zhang, xuehua&quot;, &quot;van erp, nielka&quot;, &quot;alphen, bas&quot;, &quot;chen, huilin&quot;, 
                 &quot;koelman, vianney&quot;, &quot;hernández, gleider&quot;, &quot;bouma, gerd&quot;, &quot;vries, jean paul&quot;, 
                 &quot;scholz, sven-bodo&quot;, &quot;spinellis, diomidis&quot;, &quot;wada, yoshihide&quot;, 
                 &quot;veersema, bas&quot;, &quot;mikkola, mari&quot;, &quot;saeed, peeroz&quot;, &quot;loomans, bas&quot;,
                 &quot;eriksson, britas kl&quot;, &quot;martens, jean-bern&quot;, &quot;huppertz, huppertz&quot;)

gender_manual &lt;- c(&quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, 
                   &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, 
                   &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, 
                   &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;,
                   &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, 
                   &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;,
                   &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;,
                   &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, 
                   &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;,
                   &quot;m&quot;, &quot;w&quot;, &quot;w&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;,
                   &quot;m&quot;, &quot;w&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, 
                   &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, 
                   &quot;m&quot;, &quot;m&quot;, &quot;w&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;, &quot;m&quot;)

manual_combination &lt;- cbind.data.frame(full = full_manual,
                                       final_decision = gender_manual)</code></pre>
<p>Combine for the missing ones, and replace the missingness with the
manually inferred gender:</p>
<pre class="r"><code>profs_full_gender_missing &lt;- merge(profs_full_gender_missing,
                                   manual_combination,
                                   by = &quot;full&quot;,
                                   all.x = TRUE)

profs_full_gender_missing$inferred_gender &lt;- profs_full_gender_missing$final_decision

profs_full_gender_missing &lt;- profs_full_gender_missing[colnames(profs_full_gender)]</code></pre>
<p>Combine the full prof list again:</p>
<pre class="r"><code>profs_full_gender &lt;- filter(profs_full_gender,
                            inferred_gender %in% c(&quot;m&quot;, &quot;w&quot;))

profs_full_gender &lt;- rbind(profs_full_gender,
                           profs_full_gender_missing)</code></pre>
<p>Save the output:</p>
<pre class="r"><code>dbWriteTable(con, &quot;gender_table&quot;, profs_full_gender, row.names=FALSE, append=TRUE)</code></pre>
</div>
<div id="plots" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Plots</h2>
<p>Proportions:</p>
<pre class="r"><code>round(prop.table(table(profs_full_gender$inferred_gender))*100)</code></pre>
<p>Plot the proportions:</p>
<pre class="r"><code>ggplot(profs_full_gender) + 
  geom_bar(mapping = aes(x = inferred_gender, y = after_stat(prop), group = 1), stat = &quot;count&quot;)</code></pre>
<p><img src="Gender_inference_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>Plot the counts:</p>
<pre class="r"><code>ggplot(profs_full_gender, aes(format(inferred_gender))) +
    geom_bar(stat = &quot;count&quot;) +
    labs(x = &quot;Number&quot;)</code></pre>
<p><img src="Gender_inference_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
</div>
</div>
<div id="coauthors" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Coauthors</h1>
<p>Retrieve the full list of coauthor names from the database:</p>
<pre class="r"><code>coauthor_names &lt;- dbReadTable(con, &quot;oa_coauthor_name_list&quot;)
# lowercase the names
coauthor_names$first_lowercase &lt;- tolower(coauthor_names$first)
# remove any remaining special characters apart from dashes that enter many names
coauthor_names$first_lowercase &lt;- gsub(&quot;[^-[:^punct:]]&quot;, &quot;&quot;, coauthor_names$first_lowercase, perl=T)</code></pre>
<p>Get unique names in our dataset:</p>
<pre class="r"><code>unique_names &lt;- distinct(coauthor_names, first_lowercase)</code></pre>
<p>Inferring gender with genderize.io:</p>
<pre class="r"><code># fill in own api key
genderize_api_key &lt;- &#39;&#39;

# list of names
names &lt;- unique_names$first_lowercase

coauthor_name_gender &lt;- data.frame(matrix(NA, nrow = 0, ncol = 4))

for (i in 1:length(names)){
  name &lt;- names[i]
  output &lt;- genderize_io_function(name,
                      api_key = genderize_api_key)
  
  coauthor_name_gender  &lt;- rbind(coauthor_name_gender ,
                            output)
  print(paste(&quot;done with&quot;, i, &quot;out of&quot;, length(names)))
}

dbWriteTable(con, &quot;coauthor_name_gender&quot;, coauthor_name_gender , row.names=FALSE, append=TRUE)</code></pre>
</div>
<div id="journalists-from-mentions-data" class="section level1"
number="3">
<h1><span class="header-section-number">3</span> Journalists from
Mentions data</h1>
<p>Get the journalist names where applicable:</p>
<p>First, check which names we already have in our NARCIS and coauthor
lists:</p>
<pre class="r"><code># load the mention names
full_mention_data_names &lt;- dbReadTable(con, &quot;pub_att_news_author_names&quot;)
# load NARCIS and coauathor gender inference
narcis_gender &lt;- dbReadTable(con, &quot;gender_table&quot;)
coauthor_gender &lt;- dbReadTable(con, &quot;coauthor_name_gender&quot;)
# combine the existing sources together
narcis_gender &lt;- narcis_gender %&gt;%
  select(first, inferred_gender)%&gt;%
  distinct(first, inferred_gender)

coauthor_gender &lt;- coauthor_gender %&gt;%
  select(name, gender)%&gt;%
  distinct(name, gender)

colnames(narcis_gender) &lt;- c(&quot;name&quot;, &quot;gender&quot;)

full_name_list &lt;- rbind(narcis_gender,
                        coauthor_gender) %&gt;%
  distinct(name, .keep_all = TRUE)

# check which names are already there
unique_mention_names &lt;- full_mention_data_names %&gt;%
  distinct(author_first_name)

missing_mention_names &lt;- filter(unique_mention_names,
                                ! author_first_name %in% full_name_list$name)

# infer gender for them
# list of names
missing_mention_names &lt;- missing_mention_names$author_first_name

mention_name_gender &lt;- data.frame(matrix(NA, nrow = 0, ncol = 4))

for (i in 1:length(missing_mention_names)){
  name &lt;- missing_mention_names[i]
  output &lt;- genderize_io_function(name,
                                  api_key = genderize_api_key)
  
  mention_name_gender  &lt;- rbind(mention_name_gender ,
                                output)
  print(paste(&quot;done with&quot;, i, &quot;out of&quot;, length(missing_mention_names)))
}


# bind with the full list
full_name_list &lt;- rbind(full_name_list,
                        mention_name_gender[c(&quot;name&quot;, &quot;gender&quot;)])</code></pre>
<p>And finally, infer the gender for our mention authors:</p>
<pre class="r"><code>colnames(full_mention_data_names)[2] &lt;- &quot;name&quot;

full_mention_data_names_gender &lt;- merge(full_mention_data_names,
                                        full_name_list,
                                        by = &quot;name&quot;, 
                                        all.x = TRUE)</code></pre>
<p>Now, write this into our database:</p>
<pre class="r"><code>dbWriteTable(con, &quot;pub_att_news_author_names_gender&quot;, full_mention_data_names_gender)</code></pre>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkluZmVyZW5jZSBvbiBwcm9mZXNzb3IgZ2VuZGVyIg0KYXV0aG9yOiAiQW5hIE1hY2Fub3ZpYyINCmRhdGU6ICIyMDIzLTEyLTE5Ig0KLS0tDQoNClRoaXMgc2NyaXB0IGNoZWNrcyBhc3NpZ25zIHByb2Zlc3NvciBuYW1lcyBhcyBtYWxlIG9yIGZlbWFsZS4gDQpCZWNhdXNlIHRoZXJlIGFyZSBubyBzZWxmLXJlcG9ydHMgb2YgZ2VuZGVyIGluIHRoZSBOYXJjaXMgZGF0YWJhc2UsIA0Kd2UgaW5mZXIgYSBwcm9mZXNzb3IncyBnZW5kZXIgZnJvbSB0aGUgZmlyc3QgbmFtZSBmaWxlZCBpbiB0aGUgZGF0YWJhc2UgdXNpbmcNCkdlbmRlcml6ZS5pbyBBUEkgYW5kIGNvbWJpbmUgaXQgd2l0aCB0aGUgZGF0YSBmcm9tIHRoZSBEdXRjaCBkYXRhYmFzZSBvZiBmaXJzdA0KbmFtZXMgKFZvb3JuYW1lbmJhbmspLg0KDQpCZWFyIGluIG1pbmQgdGhhdCBvdXIgaW5mZXJlbmNlIGlzIGJhc2VkIG9uIHRoZSAicm9lcG5hYW0iLCBpLmUuLCAiY2FsbGluZyBuYW1lIiwNCndoaWNoLCBpbiB0aGUgTmV0aGVybGFuZHMsIGRvZXMgbm90IGhhdmUgdG8gbWF0Y2ggb25lJ3MgbmFtZSBnaXZlbiBhdCBiaXJ0aC4NClRoZXJlZm9yZSwgd2UgY2FuIGFzc3VtZSB0aGF0LCBpbiBtYW55IGNhc2VzLCBwcm9mZXNzb3JzIGNvdWxkIGhhdmUgYWRqdXN0ZWQgdGhlaXINCm5hbWUgaW4gdGhlIGRhdGFiYXNlIGZyb20gdGhlaXIgbmFtZSBnaXZlbiBhdCBiaXJ0aCB0byB0aGUgInJvZXBuYWFtIiB0aGF0IGJlc3QgcmVmbGVjdGVkDQp0aGVpciBnZW5kZXIgaWRlbnRpdHkuIFdlLCB0aGVuLCBiYXNlIG91ciBpbmZlcmVuY2Ugb24gdGhpcyBlbnRyeS4NCg0KTG9hZCB0aGUgbGlicmFyaWVzIHRoYXQgd2UgbmVlZDoNCmBgYHtyIHdhcm5pbmcgPSBGLCBtZXNzYWdlID0gRiwgZXZhbCA9IFQsIGVjaG8gPSBGLCByZXN1bHRzID0gJ2hpZGUnfQ0KIyBsb2FkIHRoZSBoZWxwZXIgZnVuY3Rpb24gZmlsZQ0Kc291cmNlKCJoZWxwZXJfZnVuY3Rpb25zLlIiKQ0KcGFja2FnZXNfdG9fbG9hZCA8LSBjKCJyZWFkciIsICJkcGx5ciIsICJqc29ubGl0ZSIsDQogICAgICAgICAgICAgICAgICAgICAgInN0cmluZ3IiLCAiZ2dwbG90MiIsICJSUG9zdGdyZXMiLCANCiAgICAgICAgICAgICAgICAgICAgICAiZGlnZXN0IiwiREJJIiwgIlJPREJDIiwgIm9kYmMiLCAia25pdHIiKQ0KDQpmcGFja2FnZV9jaGVjayhwYWNrYWdlc190b19sb2FkKQ0KDQojIEZvciBmdWxsIHJlcHJvZHVjaWJpbGl0eSwgbG9hZCB0aGUgcGFja2FnZXMgd2l0aCBncm91bmRob2cgdXNpbmcgdGhlIGNvZGUgYmVsb3cgaW5zdGVhZA0KIyBvZiB0aGUgZnBhY2thZ2VfY2hlY2sgZnVuY3Rpb24NCg0KIyBsaWJyYXJ5KGdyb3VuZGhvZykNCiMgZ3JvdW5kaG9nLmxpYnJhcnkocGFja2FnZXNfdG9fbG9hZCwgZGF0ZSA9ICIyMDIzLTEyLTAxIikNCmBgYA0KDQpgYGB7ciBpbmNsdWRlID0gRn0NCm9wdHNfY2h1bmskc2V0KGVjaG8gPSBUUlVFKQ0Kb3B0c19jaHVuayRzZXQoZXZhbCA9IEZBTFNFKQ0Kb3B0c19jaHVuayRzZXQod2FybmluZyA9IEZBTFNFKQ0Kb3B0c19jaHVuayRzZXQobWVzc2FnZSA9IEZBTFNFKQ0KYGBgDQoNCg0KQ29ubmVjdCB0byB0aGUgcG9zdGdyZXMgZGF0YWJhc2UuDQpVc2Ugb3duIGNyZWRlbnRpYWxzLg0KYGBge3J9DQpwb3J0IDwtIDU0MzINCnVzZXIgPC0gInBvc3RncmVzIg0KcGFzc3dvcmQgPC0gImR1dGNobWVkaWFwcm9mc3NxbCINCmRhdGFiYXNlX25hbWUgPC0gInBvc3RncmVzIg0KDQpjb24gPC0gZGJDb25uZWN0KFBvc3RncmVzKCksDQogICAgICAgICAgICAgICAgIGRibmFtZT0gZGF0YWJhc2VfbmFtZSwNCiAgICAgICAgICAgICAgICAgcG9ydCA9IHBvcnQsDQogICAgICAgICAgICAgICAgIHVzZXIgPSB1c2VyLCANCiAgICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBwYXNzd29yZCkNCg0KY29uICMgQ2hlY2tzIGNvbm5lY3Rpb24gaXMgd29ya2luZw0KYGBgDQoNCiMgUHJvZmVzc29ycw0KIyMgVGlkeSB1cCBwcm9mZXNzb3IgZGF0YSBmcm9tIE5BUkNJUw0KDQpMb2FkIHRoZSBwcm9mZXNzb3IgcHJvZmlsZXM6DQpgYGB7ciBtZXNzYWdlID0gRiwgd2FybmluZyA9IEZ9DQpsb2FkKCJyYXdfZGF0YS9tZWRpYV9wcm9mc19wcm9maWxlcy5yZGEiKQ0KcHJvZnMgPC0gcmVhZF9jc3YoInJhd19kYXRhL2R1dGNoX3Byb2ZzX3VybHMuY3N2IikNCg0KIyBtZXJnZSB0aGUgcHJvZnMgd2l0aCB0aGVpciBPUkNJRHMNCmNvbG5hbWVzKHByb2ZzKVtjKDEsNyldIDwtIGMoImlkIiwgInByb2ZpbGVfaWQiKQ0KDQpwcm9mc19mdWxsIDwtIG1lcmdlKHByb2ZzLA0KICAgICAgICAgICAgICAgICAgICBtZXRhZGZbLCBjKDE6NCwgMzYxKV0sDQogICAgICAgICAgICAgICAgICAgIGJ5ID0gInByb2ZpbGVfaWQiKQ0KDQojIGZpeCBzb21lIGZpcnN0IG5hbWVzIHRoYXQgd2VyZSBjdXQgc2hvcnQgYnkgbWlzdGFrZQ0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJ3aWxmcmllIildIDwtICJ3aWxmcmllZCINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAiaiIpXSA8LSAiamFuLXdpbGxlbSINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAiZCIpXSA8LSAiZHJvbmEiDQpwcm9mc19mdWxsJGZpcnN0W3doaWNoKHByb2ZzX2Z1bGwkZmlyc3QgPT0gImwiKV0gPC0gImx1YyINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAiYSIpXSA8LSAiYW5uYSINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmdWxsID09ICJ2ZXJtdW50LCB0aW5hIildIDwtICJ0aW5hIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZ1bGwgPT0gInN0ZWVubmlzLCB0b20iKV0gPC0gInRvbSINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAibSIpXSA8LSAibWFydGlqbiINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAid291dGVyXFwiKV0gPC0gIndvdXRlciINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAiZ2VlcnQtaiIpXSA8LSAiZ2VlcnQtamFuIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJqZWFuLXPDqWJhc3RpZSIpXSA8LSAiamVhbi1zw6liYXN0aWVuIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJqZWFuLXBpZXIiKV0gPC0gImplYW4tcGllcnJlIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJqZWFuLWJlcm4iKV0gPC0gImplYW4tYmVybmFyZCINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAiYW5uZS1tYSIpXSA8LSAiYW5uZS1tYXJpZSINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAicGV0ZXItYXJuIildIDwtICJwZXRlci1hcm5vIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJmcmFucy13aWxsZSIpXSA8LSAiZnJhbnMtd2lsbGVtIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJqYW4tZGllZGUiKV0gPC0gImphbi1kaWVkZXJpayINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAicGV0ZXItcGF1IildIDwtICJwZXRlci1wYXVsIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJ3aWxsZW0tamEiKV0gPC0gIndpbGxlbS1qYW4iDQpwcm9mc19mdWxsJGZpcnN0W3doaWNoKHByb2ZzX2Z1bGwkZmlyc3QgPT0gIm1hcmllLWNvbGV0IildIDwtICJtYXJpZS1jb2xldHRlIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJtYXJpZS1qb3MiKV0gPC0gIm1hcmllLWpvc8OpIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJqZWFuLXPDqWJhc3RpZSIpXSA8LSAiamVhbi1zw6liYXN0aWVuIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJkaWVkZXJpIildIDwtICJkaWVkZXJpayINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAiYnJpdGFzIGtsIildIDwtICJicml0YXMga2xlbWVucyINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAiZ2VydC13aWxsIildIDwtICJnZXJ0LXdpbGxlbSINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAiamVhbi1jaHJpc3RvcCIpXSA8LSAiamVhbi1jaHJpc3RvcGhlIg0KcHJvZnNfZnVsbCRmaXJzdFt3aGljaChwcm9mc19mdWxsJGZpcnN0ID09ICJnZW5zZXJpIildIDwtICJnZW5zZXJpayINCnByb2ZzX2Z1bGwkZmlyc3Rbd2hpY2gocHJvZnNfZnVsbCRmaXJzdCA9PSAibWFyaWUtamVhIildIDwtICJtYXJpZS1qZWFubmUiDQpwcm9mc19mdWxsJGZpcnN0W3doaWNoKHByb2ZzX2Z1bGwkZnVsbCA9PSAicG9zdGh1bWEsICBkYW5pZWxsZSIpXSA8LSAiZGFuaWVsbGUiDQpwcm9mc19mdWxsJGZpcnN0W3doaWNoKHByb2ZzX2Z1bGwkZmlyc3QgPT0gImh1cHBlcnR6IildIDwtICJ0aG9tIg0KIyBzYXZlIHRoZSBjb3JyZWN0ZWQgZGF0YQ0Kc2F2ZVJEUyhwcm9mc19mdWxsLCAicHJvY2Vzc2VkX2RhdGEvbmFyY2lzX3Byb2ZfaW5mb19maXhlZC5SRFMiKQ0KYGBgDQoNCg0KIyMgVXNpbmcgR2VuZGVyaXplLmlvDQoNCiMjIyBJbmZlcnJpbmcgZ2VuZGVyDQpgYGB7ciB3YXJuaW5nID0gRiwgbWVzc2FnZSA9IEZ9DQojIGZpbGwgaW4gb3duIGFwaSBrZXkNCmdlbmRlcml6ZV9hcGlfa2V5IDwtICcnDQoNCiMgbGlzdCBvZiBuYW1lcw0KbmFtZXMgPC0gdW5pcXVlKHByb2ZzX2Z1bGwkZmlyc3QpDQoNCnByb2ZfbmFtZV9nZW5kZXIgPC0gZGF0YS5mcmFtZShtYXRyaXgoTkEsIG5yb3cgPSAwLCBuY29sID0gNCkpDQoNCmZvciAoaSBpbiAxOmxlbmd0aChuYW1lcykpew0KICBuYW1lIDwtIG5hbWVzW2ldDQogIG91dHB1dCA8LSBnZW5kZXJpemVfaW9fZnVuY3Rpb24obmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICBhcGlfa2V5ID0gZ2VuZGVyaXplX2FwaV9rZXksDQogICAgICAgICAgICAgICAgICAgICAgY291bnRyeV9pZCA9ICJOTCIpDQogIA0KICBwcm9mX25hbWVfZ2VuZGVyIDwtIHJiaW5kKHByb2ZfbmFtZV9nZW5kZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0KQ0KICBwcmludChwYXN0ZSgiZG9uZSB3aXRoIiwgaSwgIm91dCBvZiIsIGxlbmd0aChuYW1lcykpKQ0KfQ0KDQpzYXZlUkRTKGdlbmRlcml6ZV9kYXRhICwgInByb2Nlc3NlZF9kYXRhL3Byb2ZfZ2VuZGVyX2dlbmRlcml6ZS5SRFMiKQ0KYGBgDQoNCg0KIyMgSW5mZXJlbmNlIHVzaW5nIHRoZSBWb29ybmFtZW5iYW5rDQoNClVzZSB0aGUgc2FtZSBuYW1lIGxpc3QgdG8gZ2V0IHRoZSBkYXRhIGZyb20gdGhlIER1dGNoIHJlZ2lzdGVyIGJ5IGNhbGxpbmcgdGhlDQpOZWRlcmxhbmRlcyBWb29ybmFtZW5iYW5rOg0KYGBge3J9DQp2b29ybmFtZW5iYW5rX2RhdGEgPC0gZGF0YS5mcmFtZShtYXRyaXgoTkEsIG5yb3cgPSAwLCBuY29sID0gNSkpDQoNCmZvciAoaSBpbiAxOmxlbmd0aChuYW1lcykpIHsNCiAgbmFtZSA8LSBuYW1lc1tpXQ0KICB1cmxfY2FsbCA8LSBwYXN0ZTAoImh0dHBzOi8vbnZiLm1lZXJ0ZW5zLmtuYXcubmwvbmFhbS9pcy8iLCBuYW1lKQ0KICANCiAgbmFtZV93ZWJwYWdlIDwtIE5BDQogIHRyeShuYW1lX3dlYnBhZ2UgPC0gcmVhZF9odG1sKHVybF9jYWxsKSkNCiAgDQogICMgZXh0cmFjdCBuYW1lIGZyZXF1ZW5jeSB0YWJsZSBhbmQgZ2VuZGVyIGluZm8NCiAgIyBpZiBhbnl0aGluZyB3YXMgcmV0cmlldmVkDQogIGlmICghaXMubmEobmFtZV93ZWJwYWdlKSl7DQogICAgaWYgKGxlbmd0aChuYW1lX3dlYnBhZ2UgJT4lIGh0bWxfdGFibGUoKSkgPiAwKSB7ICMgaWYgdGhlcmUgaXMgaW5mbyBpbiBhIHRhYmxlDQogICAgICANCiAgICAgIHRhYmxlIDwtIG5hbWVfd2VicGFnZSAlPiUgaHRtbF90YWJsZSgpICMgZXh0cmFjdCBhIGh0bWxfdGFibGUNCiAgICAgIA0KICAgICAgdGFibGVbWzFdXVt0YWJsZVtbMV1dPT0iLS0iXSA8LSAiMCINCiAgICAgIA0KICAgICAgIyBmaW5kIG1lbiwgd2l0aCBmaXJzdCBuYW1lIGFuZCBtaWRkbGUgbmFtZSBjb3VudHMNCiAgICAgIGdlbmRlcl9tX2ZpcnN0IDwtIGFzLm51bWVyaWModGFibGVbWzFdXSRYM1syXSkNCiAgICAgIGdlbmRlcl9tX3ZvbGcgPC0gYXMubnVtZXJpYyh0YWJsZVtbMV1dJFgzWzNdKQ0KICAgICAgDQogICAgICAjIGZpbmQgd29tZW4sIHdpdGggZmlyc3QgbmFtZSBhbmQgbWlkZGxlIG5hbWUgY291bnRzDQogICAgICBnZW5kZXJfd19maXJzdCA8LSBhcy5udW1lcmljKHRhYmxlW1sxXV0kWDNbNl0pDQogICAgICBnZW5kZXJfd192b2xnIDwtIGFzLm51bWVyaWModGFibGVbWzFdXSRYM1s3XSkNCiAgICAgIA0KICAgICAgIyBidWlsZCBhIHJvdw0KICAgICAgcm93IDwtIGNiaW5kLmRhdGEuZnJhbWUobmFtZSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5kZXJfbV9maXJzdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmRlcl9tX3ZvbGcsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5kZXJfd19maXJzdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmRlcl93X3ZvbGcpDQogICAgICANCiAgICAgICMgYmluZCB0byB0aGUgb3ZlcmFsbCBkYXRhZnJhbWUNCiAgICAgIHZvb3JuYW1lbmJhbmtfZGF0YSA8LSByYmluZCh2b29ybmFtZW5iYW5rX2RhdGEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93KQ0KICAgICAgDQogICAgICBwcmludChwYXN0ZSgiZG9uZSB3aXRoIiwgaSwgIm91dCBvZiIsIGxlbmd0aChuYW1lcykpKQ0KICAgICAgDQogICAgICAjIHdhaXQgZm9yIDM1IHNlYyB0byBiZSBraW5kIHRvIHRoZSB3ZWJzaXRlDQogICAgICBTeXMuc2xlZXAoMzUpDQogICAgfQ0KICB9DQp9DQpgYGANCg0KU2F2ZSB0aGlzOg0KYGBge3J9DQpzYXZlUkRTKHZvb3JuYW1lbmJhbmtfZGF0YSwgInByb2Nlc3NlZF9kYXRhL3Byb2ZfZ2VuZGVyX3Zvb3JuYW1lbmJhbmsuUkRTIikNCmBgYA0KDQojIyBDb21iaW5lIHRoZSBnZW5kZXJpemUgYW5kIHZvb3JuYW1lbmJhbmsgZGF0YSBmb3IgZmluYWwgaW5mZXJlbmNlDQoNCmBgYHtyfQ0KZ2VuZGVyaXplX2RhdGEgPC0gcmVhZFJEUygicHJvY2Vzc2VkX2RhdGEvcHJvZl9nZW5kZXJfZ2VuZGVyaXplLlJEUyIpDQp2b29ybmFtZW5iYW5rX2RhdGEgPC0gcmVhZFJEUygicHJvY2Vzc2VkX2RhdGEvcHJvZl9nZW5kZXJfdm9vcm5hbWVuYmFuay5SRFMiKQ0KYGBgDQoNCkZvciB0aGUgdm9vcm5hbWVuYmFuayBkYXRhLCBhc3NpZ24gdGhlIGdlbmRlciBiYXNlZCBvbiBhIG1ham9yaXR5IHJ1bGUuDQpGaXJzdCwgZm9jdXMgb25seSBvbiB0aGUgZ2l2ZW4gbmFtZSAoZmlyc3QgbmFtZSkNCmBgYHtyfQ0Kdm9vcm5hbWVuYmFua19kYXRhIDwtIHZvb3JuYW1lbmJhbmtfZGF0YVtjKCJuYW1lIiwgImdlbmRlcl9tX2ZpcnN0IiwgImdlbmRlcl93X2ZpcnN0IildDQojIHNoYXJlIG1lbg0Kdm9vcm5hbWVuYmFua19kYXRhJHNoYXJlX20gPC0gcm91bmQodm9vcm5hbWVuYmFua19kYXRhJGdlbmRlcl9tX2ZpcnN0IC8gKHZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJfbV9maXJzdCArIHZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJfd19maXJzdCksIDIpDQojIHNoYXJlIHdvbWVuDQp2b29ybmFtZW5iYW5rX2RhdGEkc2hhcmVfdyA8LSByb3VuZCh2b29ybmFtZW5iYW5rX2RhdGEkZ2VuZGVyX3dfZmlyc3QgLyAodm9vcm5hbWVuYmFua19kYXRhJGdlbmRlcl9tX2ZpcnN0ICsgdm9vcm5hbWVuYmFua19kYXRhJGdlbmRlcl93X2ZpcnN0KSwgMikNCg0KIyBjbGFzc2lmeSBiYXNlZCBvbiB0aGUgc2ltcGxlIG1ham9yaXR5IHJ1bGUNCiMgc2VsZWN0IHRob3NlIGluIHRoZSByYW5nZSAwLjQgLSAwLjYgYXMgYW1iaWd1b3VzDQp2b29ybmFtZW5iYW5rX2RhdGEkZ2VuZGVyIDwtIGlmZWxzZSh2b29ybmFtZW5iYW5rX2RhdGEkc2hhcmVfbSA+IDAuNSwgIm0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHZvb3JuYW1lbmJhbmtfZGF0YSRzaGFyZV93ID4gMC41LCAidyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFtYiIpKQ0KDQojIHdlIGNhbiB0aGVuIGNoZWNrIHRoZSBhbWJpZ3VvdXMgbmFtZXMgbWFudWFsbHkgZm9yIHRoZSAzMyBuYW1lcw0KdGFibGUodm9vcm5hbWVuYmFua19kYXRhJGdlbmRlcikNCmBgYA0KTWFudWFsIGNoZWNrIGZvciB0aGUgYW1iaWd1b3VzIG5hbWVzIGFuZCBmaWx0ZXIgb3V0IGVtcHR5IGFuZCB0eXBvczoNCmBgYHtyfQ0Kdm9vcm5hbWVuYmFua19kYXRhJGdlbmRlclt3aGljaCh2b29ybmFtZW5iYW5rX2RhdGEkbmFtZSA9PSAicmV6IildIDwtICJtIg0Kdm9vcm5hbWVuYmFua19kYXRhJGdlbmRlclt3aGljaCh2b29ybmFtZW5iYW5rX2RhdGEkbmFtZSA9PSAibWFyaWprIildIDwtICJ3Ig0Kdm9vcm5hbWVuYmFua19kYXRhJGdlbmRlclt3aGljaCh2b29ybmFtZW5iYW5rX2RhdGEkbmFtZSA9PSAiYWZzaGluIildIDwtICJtIg0Kdm9vcm5hbWVuYmFua19kYXRhJGdlbmRlclt3aGljaCh2b29ybmFtZW5iYW5rX2RhdGEkbmFtZSA9PSAidWxpIildIDwtICJtIg0Kdm9vcm5hbWVuYmFua19kYXRhJGdlbmRlclt3aGljaCh2b29ybmFtZW5iYW5rX2RhdGEkbmFtZSA9PSAia2VpdGEiKV0gPC0gIm0iDQp2b29ybmFtZW5iYW5rX2RhdGEkZ2VuZGVyW3doaWNoKHZvb3JuYW1lbmJhbmtfZGF0YSRuYW1lID09ICJsaXZpdSIpXSA8LSAibSINCnZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJbd2hpY2godm9vcm5hbWVuYmFua19kYXRhJG5hbWUgPT0gImV2Z2VueSIpXSA8LSAibSINCnZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJbd2hpY2godm9vcm5hbWVuYmFua19kYXRhJG5hbWUgPT0gImFuZHJleSIpXSA8LSAibSINCnZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJbd2hpY2godm9vcm5hbWVuYmFua19kYXRhJG5hbWUgPT0gImpvdGkiKV0gPC0gInciDQp2b29ybmFtZW5iYW5rX2RhdGEkZ2VuZGVyW3doaWNoKHZvb3JuYW1lbmJhbmtfZGF0YSRuYW1lID09ICJhdXJlbGllbiIpXSA8LSAibSINCnZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJbd2hpY2godm9vcm5hbWVuYmFua19kYXRhJG5hbWUgPT0gImNhdGhhbCIpXSA8LSAibSINCnZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJbd2hpY2godm9vcm5hbWVuYmFua19kYXRhJG5hbWUgPT0gImpvbCIpXSA8LSAibSINCnZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJbd2hpY2godm9vcm5hbWVuYmFua19kYXRhJG5hbWUgPT0gImFudXBhbSIpXSA8LSAibSINCnZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXJbd2hpY2godm9vcm5hbWVuYmFua19kYXRhJG5hbWUgPT0gInV0YSIpXSA8LSAidyINCg0Kdm9vcm5hbWVuYmFua19kYXRhIDwtIGZpbHRlcih2b29ybmFtZW5iYW5rX2RhdGEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpcy5uYShuYW1lKSkNCg0Kdm9vcm5hbWVuYmFua19kYXRhIDwtIGZpbHRlcih2b29ybmFtZW5iYW5rX2RhdGEsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgIT0gIndpbGZyaWUiKQ0KYGBgDQoNClVuZGVyc3RhbmQgdGhlIG1pc3NjbGFzc2lmaWNhdGlvbiByYXRlLCB3aGljaCBhcHBlYXJzIG5lZ2xpZ2libGUgYXQgMC41NSU6DQpgYGB7cn0NCiMgdGhlIHNoYXJlIG9mIHBlb3BsZSB3aG8gbWlnaHQgYmUgbWlzc2NsYXNzaWZpZWQgaW4gdGhpcyBtYW5uZXINCnZvb3JuYW1lbmJhbmtfZGF0YSRtaXNzY2xhc3NpZmljYXRpb24gPC0gaWZlbHNlKHZvb3JuYW1lbmJhbmtfZGF0YSRnZW5kZXIgPT0gIm0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9vcm5hbWVuYmFua19kYXRhJHNoYXJlX3csDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b29ybmFtZW5iYW5rX2RhdGEkc2hhcmVfbSkNCiMgdG90YWwgb2NjdXJyZW5jZXMNCnZvb3JuYW1lbmJhbmtfZGF0YSR0b3RhbF9vY3VycmVuY2UgPC0gdm9vcm5hbWVuYmFua19kYXRhJGdlbmRlcl9tX2ZpcnN0ICsgdm9vcm5hbWVuYmFua19kYXRhJGdlbmRlcl93X2ZpcnN0DQoNCiMgd2VpZ2h0ZWQgbWlzc2NsYXNzaWZpY2F0aW9uDQp3ZWlnaHRlZC5tZWFuKHZvb3JuYW1lbmJhbmtfZGF0YSRtaXNzY2xhc3NpZmljYXRpb24sIHZvb3JuYW1lbmJhbmtfZGF0YSR0b3RhbF9vY3VycmVuY2UpKjEwMA0KYGBgDQpVbmRlcnN0YW5kIHRoZSBtaXNzY2xhc3NpZmljYXRpb24gcmF0ZSBmb3IgdGhlIGdlbmRlcml6ZSBkYXRhLCB3aGljaCBzdGlsbCBhcHBlYXJzIG5lZ2xpZ2libGUgYXQgMC43OTklOg0KYGBge3J9DQoNCiMgdGhlIHNoYXJlIG9mIHBlb3BsZSB3aG8gbWlnaHQgYmUgbWlzc2NsYXNzaWZpZWQgaW4gdGhpcyBtYW5uZXINCmdlbmRlcml6ZV9kYXRhJG1pc3NjbGFzc2lmaWNhdGlvbiA8LSAxIC0gZ2VuZGVyaXplX2RhdGEkcHJvYmFiaWxpdHkNCiMgdG90YWwgb2NjdXJyZW5jZXMNCmdlbmRlcml6ZV9kYXRhJHRvdGFsX29jdXJyZW5jZSA8LSBnZW5kZXJpemVfZGF0YSRjb3VudA0KDQojIHdlaWdodGVkIG1pc3NjbGFzc2lmaWNhdGlvbg0Kd2VpZ2h0ZWQubWVhbihnZW5kZXJpemVfZGF0YSRtaXNzY2xhc3NpZmljYXRpb24sIGdlbmRlcml6ZV9kYXRhJHRvdGFsX29jdXJyZW5jZSwgbmEucm0gPSBUUlVFKSoxMDANCmBgYA0KQmluZCB0aGUgZGF0YSBmcm9tIGdlbmRlcml6ZS5pbyBhbmQgdm9vcm5hbWVuYmFuazoNCmBgYHtyfQ0KIyB0aWR5IHVwIGEgYml0DQpnZW5kZXJpemVfcHJlZGljdGlvbnMgPC0gZ2VuZGVyaXplX2RhdGFbYygibmFtZSIsICJnZW5kZXIiKV0NCmNvbG5hbWVzKGdlbmRlcml6ZV9wcmVkaWN0aW9ucylbMl0gPC0gImdlbmRlcl9nZW5kZXJpemUiDQpnZW5kZXJpemVfcHJlZGljdGlvbnMkZ2VuZGVyX2dlbmRlcml6ZSA8LSBpZmVsc2UoZ2VuZGVyaXplX3ByZWRpY3Rpb25zJGdlbmRlcl9nZW5kZXJpemUgPT0gIm1hbGUiLCAibSIsICJ3IikNCnZvb3JuYW1lbmJhbmtfcHJlZGljdGlvbnMgPC0gdm9vcm5hbWVuYmFua19kYXRhW2MoIm5hbWUiLCAiZ2VuZGVyIildDQpjb2xuYW1lcyh2b29ybmFtZW5iYW5rX3ByZWRpY3Rpb25zKVsyXSA8LSAiZ2VuZGVyX3Zvb3JuYW1lbmJhbmsiDQoNCiMgY29tYmluZQ0KcHJlZGljdGlvbnNfY29tYmluZWQgPC0gbWVyZ2Uodm9vcm5hbWVuYmFua19wcmVkaWN0aW9ucywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmRlcml6ZV9wcmVkaWN0aW9ucywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gIm5hbWUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnkgPSBUUlVFKQ0KDQojIGZpbHRlciBvdXQgbmFtZXMgbm90IGluIHRoZSBmdWxsIHByb2YgbGlzdA0KcHJlZGljdGlvbnNfY29tYmluZWQgPC0gZmlsdGVyKHByZWRpY3Rpb25zX2NvbWJpbmVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgJWluJSBwcm9mc19mdWxsJGZpcnN0KQ0KYGBgDQoNCkNoZWNrIGZvciBkaXNhZ3JlZW1lbnQ6DQpgYGB7cn0NCnByZWRpY3Rpb25zX2NvbWJpbmVkJGFncmVlbWVudCA8LSBpZmVsc2UocHJlZGljdGlvbnNfY29tYmluZWQkZ2VuZGVyX3Zvb3JuYW1lbmJhbmsgPT0gcHJlZGljdGlvbnNfY29tYmluZWQkZ2VuZGVyX2dlbmRlcml6ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInllcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJubyIpDQoNCnByZWRpY3Rpb25zX2NvbWJpbmVkJGFncmVlbWVudCA8LSBpZmVsc2UoaXMubmEocHJlZGljdGlvbnNfY29tYmluZWQkZ2VuZGVyX3Zvb3JuYW1lbmJhbmspfGlzLm5hKHByZWRpY3Rpb25zX2NvbWJpbmVkJGdlbmRlcl9nZW5kZXJpemUpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWlzc2luZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY3Rpb25zX2NvbWJpbmVkJGFncmVlbWVudCkNCg0KdGFibGUocHJlZGljdGlvbnNfY29tYmluZWQkYWdyZWVtZW50KQ0KYGBgDQoNClRoZXJlIGlzIG9ubHkgMzggaW5zdGFuY2VzIG9mIGRpc2FncmVlbWVudCwgYW5kIDIxMSBtaXNzaW5nIGluc3RhbmNlcy4gDQpGb3IgdGhlIG1pc3NpbmcgaW5zdGFuY2VzLCBjaG9vc2UgdGhlIG9uZSB0aGF0IGlzIHByZXNlbnQuIEZvciB0aGUgbWlzc2luZyBvbmVzIG9yDQpkaXNhZ3JlZW1lbnRzLCByZXNvbHZlIG1hbnVhbGx5Og0KYGBge3J9DQpwcmVkaWN0aW9uc19jb21iaW5lZCRmaW5hbF9kZWNpc2lvbiA8LSBpZmVsc2UocHJlZGljdGlvbnNfY29tYmluZWQkYWdyZWVtZW50ID09ICJ5ZXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY3Rpb25zX2NvbWJpbmVkJGdlbmRlcl92b29ybmFtZW5iYW5rLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShpcy5uYShwcmVkaWN0aW9uc19jb21iaW5lZCRnZW5kZXJfdm9vcm5hbWVuYmFuaykgJiBpcy5uYShwcmVkaWN0aW9uc19jb21iaW5lZCRnZW5kZXJfZ2VuZGVyaXplKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5vbmUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoaXMubmEocHJlZGljdGlvbnNfY29tYmluZWQkZ2VuZGVyX2dlbmRlcml6ZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWN0aW9uc19jb21iaW5lZCRnZW5kZXJfdm9vcm5hbWVuYmFuaywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShpcy5uYShwcmVkaWN0aW9uc19jb21iaW5lZCRnZW5kZXJfdm9vcm5hbWVuYmFuayksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljdGlvbnNfY29tYmluZWQkZ2VuZGVyX2dlbmRlcml6ZSwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRpc2FncmVlbWVudCIpKSkpDQoNCnByZWRpY3Rpb25zX2NvbWJpbmVkJGZpbmFsX2RlY2lzaW9uIDwtIGlmZWxzZShpcy5uYShwcmVkaWN0aW9uc19jb21iaW5lZCRmaW5hbF9kZWNpc2lvbiksICJtaXNzaW5nIiwgcHJlZGljdGlvbnNfY29tYmluZWQkZmluYWxfZGVjaXNpb24pDQoNCnRhYmxlKHByZWRpY3Rpb25zX2NvbWJpbmVkJGZpbmFsX2RlY2lzaW9uKQ0KYGBgDQpCaW5kIHRoZSBmaW5hbCBkZWNpc2lvbiB3aXRoIHRoZSBwcm9mZXNzb3IgbGlzdCBiYXNlZCBvbiB0aGUgbmFtZToNCmBgYHtyfQ0KcHJlZGljdGlvbnNfY29tYmluZWQgPC0gcHJlZGljdGlvbnNfY29tYmluZWRbYygibmFtZSIsICJmaW5hbF9kZWNpc2lvbiIpXQ0KY29sbmFtZXMocHJlZGljdGlvbnNfY29tYmluZWQpIDwtIGMoImZpcnN0IiwgImluZmVycmVkX2dlbmRlciIpDQpwcm9mc19mdWxsX2dlbmRlciA8LSBtZXJnZShwcm9mc19mdWxsLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljdGlvbnNfY29tYmluZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9ICJmaXJzdCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQoNCiMgZ2V0IHRoZSBtaXNzaW5nIG9uZXMNCnByb2ZzX2Z1bGxfZ2VuZGVyX21pc3NpbmcgPC0gZmlsdGVyKHByb2ZzX2Z1bGxfZ2VuZGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mZXJyZWRfZ2VuZGVyICVpbiUgYygibm9uZSIsICJkaXNhZ3JlZW1lbnQiKXwgaXMubmEoaW5mZXJyZWRfZ2VuZGVyKSkNCmBgYA0KDQpGb3IgdGhlIHBlb3BsZSB3aXRoIG1pc3NpbmcgbmFtZXMsIG1hbnVhbGx5IGRvdWJsZSBjaGVjayAoZS5nLiwgSm9zZSBjYW4gYmUgYSB3b21hbidzIG9yIGEgbWFuJ3MNCm5hbWUgYmFzZWQgb24gdGhlaXIgY291bnRyeSBvZiBvcmlnaW4pLiBIZXJlIGFyZSB0aGUgcmVzdWx0czoNCmBgYHtyfQ0KZnVsbF9tYW51YWwgPC0gYygic2VzaGFuLCBrdWxhdGh1aXllciIsICJkZW50ZXJzLCBiYXMiLCAiYm92ZW5iZXJnLCBsYW5zIiwgDQogICAgICAgICAgICAgICAgICJrZW1wLCBiYXMiLCAibGFnZW5kaWprLCBpbmFsZCIsICJ0aml0dGVzLCByaWVtZS1qYW4iLCANCiAgICAgICAgICAgICAgICAgImphY29icywgaGFpa2UiLCAidmFuIGRpamNrLCBqb3PDqSIsICJtdXJpcywgamVhbiIsICJicnVpam4sIGphbi1hbnRvbmkiLCANCiAgICAgICAgICAgICAgICAgImhlcmluZ3MsIGplYW4tamFjcXVlIiwgImhhbmNoZXIsIGxlaWdoIiwgInRlbiBjYXRlLCBvbGxlIiwgDQogICAgICAgICAgICAgICAgICJrYXRvZW4sIGpvb3N0LXBpZXRlciIsICJlaWJlbiwgZ3VzeiIsICJkZSBsYSByb3NldHRlLCBqZWFuIiwgDQogICAgICAgICAgICAgICAgICJrdWlwZXIsIHdpbG1hZCIsICJ2aXNzY2hlciwgYWRyaWUiLCAic3RvdWdpZSwgbGVlbiIsICJncnViZSwgZGlyay1tYXJ0aW4iLCANCiAgICAgICAgICAgICAgICAgImtpcm4sIGhhbnMtbWFydGluIiwgIndlcmtlciwgYmFzIiwgImRlIG1hbiwgYXJkLXBpZXRlciIsIA0KICAgICAgICAgICAgICAgICAidmVudWdvcGFsLCB2ZW5rYXRhcmFtYW4iLCAiZG9yc21hbiwgbGVlbiIsICJzdGVrZXRlZSwgbWFqb25lIiwgDQogICAgICAgICAgICAgICAgICJoZXJkZXIsIGp1c3QiLCAidmFuIGJhdmVsLCBiYXMiLCAidnJvb21lbiwgamVhbiIsICJ2YW4gZGVyIGtsYWF1dywgYmFzIiwgDQogICAgICAgICAgICAgICAgICJoaWxsZWJyYW5kLCBiYXMiLCAiZG9ua2VycywgYmFzIiwgImd1cHRhLCBqb3llZXRhIiwgImVsemluZ2EsIGJlcm5ldCIsIA0KICAgICAgICAgICAgICAgICAicGVpam5lbmJ1cmcsIHdpbGxpZSIsICJ2b3NzZW4sIHBpZWsiLCAidmFuIGRlIHdpZWwsIGJhcyIsICJ0aWxsaWUsIGplYW4iLCANCiAgICAgICAgICAgICAgICAgIm1pamF0b3ZpYywgdmVsamEiLCAia2Vyc3Rob2x0LCBqb3PDqSIsICJiZWVraG92ZW4gdmFuIGRlbiBib2V6ZW0sIGZyaXRzLWpvb3N0IiwgDQogICAgICAgICAgICAgICAgICJqYWNvYnMsIGJhcyIsICJ2YW4gbmlldXdlbmh1aXplbiwgY2hpanMiLCAicHJhcywgYWlrbyIsICJ2YW4gcmlqbiwgaGVkZGVyaWsiLA0KICAgICAgICAgICAgICAgICAidmFuIHN0ZWVuc2VsLCBiYXMiLCAidmFuIGRlbiBwdXR0ZSwgYmFzIiwgImdlZW5lbiwgcmluaWUiLCAiemhhbmcsIGtvdWNoaSIsIA0KICAgICAgICAgICAgICAgICAidGVyIHdlZWwsIGJhcyIsICJzY2h1dXJtYW5zLCB5bXJlIiwgInJvZGVuYnVyZywgYmFzIiwgImhhcmluZywgYmFzIiwNCiAgICAgICAgICAgICAgICAgImJhdHRqZXMsIGhlbW1lIiwgInN1aCwgc2FuZ3dvbiIsICJjaGVuLCBhb2p1IiwgImJsb2VtZXIsIGpvc2UiLCANCiAgICAgICAgICAgICAgICAgInR6YW5rb3ZhLCBpYW5pa2EiLCAibW9yYWdhIGdvbnrDoWxleiwgam9zZSIsICJkZSBicnVpbiwgYmFzIiwgDQogICAgICAgICAgICAgICAgICJ6ZWl0bGVyLCB1bGkiLCAicmFheW1ha2VycywgYmFzIiwgInRlciBoYWFyIHJvbWVueSwgYmFzIiwgDQogICAgICAgICAgICAgICAgICJ2YW4gcmllbCwgbmF0YWwiLCAiYm9zc2llciwgcGhpbGllcCIsICJibG9lbSwgYmFzIiwgIm11bGRlciwgYmVsYSIsDQogICAgICAgICAgICAgICAgICJyb3RoZW5iZXJnLCBnYWRpIiwgInNpYm9uLCBvZHkiLCAiYXJ0cywgYmFzIiwgInZhbiBkZXIgYm9tLCBhbnNrZSIsDQogICAgICAgICAgICAgICAgICJtYW5vaGFyLCBzcmlyYW5nIiwgImphbnNzZW4sIGhhbnMtZ2VyZCIsICJtdWdlbGUsIGZyaWVkZXIiLCAiZGUgd2VpanMsIHJvbGVmIiwNCiAgICAgICAgICAgICAgICAgImVsaWFudG9uaW8sIG1hcmlvbGluYSIsICIndCBob2VuLCBwZXRlci1icmFtIiwgInJlbiwgeWlqaW4iLCAiYm9yZ2hhbnMsIGpvc8OpIiwgDQogICAgICAgICAgICAgICAgICJsaXUsIGZlbnJvbmciLCAibXVyc2hlZCwgbWFuc29vYiIsICJkZSBqb25nLCBiYXMiLCAidmFuIHplbHN0LCBiYXMiLCAibm92b3NlbG92LCBrb3N0eWEiLCANCiAgICAgICAgICAgICAgICAgImlhY29iLCBtYXJpYS1ldWdlbmlhIiwgImRlIGxlZXV3LCBmcmFuay1lcmlrIiwgIm1jZ29uYWdsZSwgdGFybGFjaCIsICJkZW1tZXJzLCBqb2xsZSIsIA0KICAgICAgICAgICAgICAgICAidm9uIHN0dWNrcmFkLCBrb2NrdSIsICJwaW5lZGEgZGUgZ3l2ZXosIGpvc2UiLCAiemF1cmEsIGVnaWphIiwgDQogICAgICAgICAgICAgICAgICJzaW1vbnMsIHRhbCIsICJiYWksIHl1bGluZyIsICJicnVpbmluZywgaGlsZ28iLCAicGFhcGUsIGxlZW4iLA0KICAgICAgICAgICAgICAgICAidGFrYW5vLCBlcmlrbyIsICJiYW5lcmplZSwgdGFtYWxpa2EiLCAgInN0YXVmZXIsIHVycyIsICJ0ZXVzaW5rLCBiYXMiLCANCiAgICAgICAgICAgICAgICAgIm9sZGVuYnVyZywgYmFzIiwgInNhbmRlcnMsIGpvc8OpIiwgInBsYWF0LCBhc2tlIiwgInZhbiBkZXIgbWVlciwgZGV2YXJhaiIsIA0KICAgICAgICAgICAgICAgICAicGVpLCB5dXRhbyIsICJiaGFyZ2F2YSwgbWFuanVsIiwgInZhbiBkZSBtZWVyYWtrZXIsIGJhcyIsICJrdXJhbWFlLCBlaWtvIiwgDQogICAgICAgICAgICAgICAgICJ6d2FhbiwgYmFzIiwgInZhbiBzb2xpbmdlbiwgcmluaSIsICJlc3NlciwgcmFpbmdhcmQiLCAibGksIHl1d2VuIiwgDQogICAgICAgICAgICAgICAgICJ3ZXVzdGVuLCBiYXMiLCAicmFzb3VsaSwgc29vcmEiLCAiam9ua21hbiwgYmFzIiwgInBlbmEgY2xhcm9zLCBtYXJpZWxvcyIsIA0KICAgICAgICAgICAgICAgICAidmFuIHNwcm9uc2VuLCBmcmFuY2phbiIsICJ5ZSwgamlhbnRpbmciLCAibG93aWUsIHdhbmRlciIsIA0KICAgICAgICAgICAgICAgICAibGVybSBoYXllcywgY2hyaXN0YS1tYXJpYSIsICJyZW5pZXJzLCBnZW5zZXJpIiwgImxpLCB6aWxpIiwgDQogICAgICAgICAgICAgICAgICJrdWJhdCwgYmVsYSIsICJjbGFya3NvbiwgY2Fycm9sIiwgInNjaGFybmhvcnN0LCB2b2xraGVyIiwNCiAgICAgICAgICAgICAgICAgImtvZGRlbiwgYmFzIiwgImdhbmdvcGFkaHlheSwgc2h1Ymhhc2hpcyIsICJhbmFud29yYW5pY2gsIGppbnRhbmF0IiwNCiAgICAgICAgICAgICAgICAgImxhbmRzbWFuLXNjaHdhcnR6LCB2YXJkaXQiLCAiZGF5YWwsIHByYXRpa2EiLCAic2ltw6NvIGhlbnJpcXVlcywgam9zw6kiLA0KICAgICAgICAgICAgICAgICAic3BydWl0LCBsZWVuIiwgInJpZXRqZW5zLCBiYXMiLCAiYnJvZWtodWl6ZW4sIGtsZWlzIiwgImtyYW1lciwgZXJpYy1oYW5zIiwgDQogICAgICAgICAgICAgICAgICJ6aGFuZywgeHVlaHVhIiwgInZhbiBlcnAsIG5pZWxrYSIsICJhbHBoZW4sIGJhcyIsICJjaGVuLCBodWlsaW4iLCANCiAgICAgICAgICAgICAgICAgImtvZWxtYW4sIHZpYW5uZXkiLCAiaGVybsOhbmRleiwgZ2xlaWRlciIsICJib3VtYSwgZ2VyZCIsICJ2cmllcywgamVhbiBwYXVsIiwgDQogICAgICAgICAgICAgICAgICJzY2hvbHosIHN2ZW4tYm9kbyIsICJzcGluZWxsaXMsIGRpb21pZGlzIiwgIndhZGEsIHlvc2hpaGlkZSIsIA0KICAgICAgICAgICAgICAgICAidmVlcnNlbWEsIGJhcyIsICJtaWtrb2xhLCBtYXJpIiwgInNhZWVkLCBwZWVyb3oiLCAibG9vbWFucywgYmFzIiwNCiAgICAgICAgICAgICAgICAgImVyaWtzc29uLCBicml0YXMga2wiLCAibWFydGVucywgamVhbi1iZXJuIiwgImh1cHBlcnR6LCBodXBwZXJ0eiIpDQoNCmdlbmRlcl9tYW51YWwgPC0gYygibSIsICJtIiwgIm0iLCAibSIsICJtIiwgIm0iLCAibSIsICJ3IiwgIm0iLCAibSIsICJtIiwgInciLCANCiAgICAgICAgICAgICAgICAgICAibSIsICJtIiwgIm0iLCAibSIsICJtIiwgIm0iLCAibSIsICJtIiwgIm0iLCAibSIsICJtIiwgIm0iLCANCiAgICAgICAgICAgICAgICAgICAibSIsICJ3IiwgIm0iLCAibSIsICJtIiwgIm0iLCAibSIsICJtIiwgInciLCAidyIsICJtIiwgIm0iLCANCiAgICAgICAgICAgICAgICAgICAibSIsICJtIiwgIm0iLCAidyIsICJtIiwgIm0iLCAidyIsICJtIiwgIm0iLCAibSIsICJtIiwgIm0iLA0KICAgICAgICAgICAgICAgICAgICJtIiwgIm0iLCAidyIsICJtIiwgIm0iLCAibSIsICJtIiwgInciLCAidyIsICJ3IiwgIm0iLCAibSIsIA0KICAgICAgICAgICAgICAgICAgICJtIiwgIm0iLCAibSIsICJtIiwgIm0iLCAibSIsICJtIiwgIm0iLCAidyIsICJtIiwgInciLCAibSIsDQogICAgICAgICAgICAgICAgICAgIm0iLCAibSIsICJtIiwgInciLCAibSIsICJ3IiwgInciLCAidyIsICJtIiwgIm0iLCAibSIsICJtIiwNCiAgICAgICAgICAgICAgICAgICAidyIsICJtIiwgIm0iLCAidyIsICJtIiwgIm0iLCAidyIsICJ3IiwgInciLCAibSIsICJtIiwgInciLCANCiAgICAgICAgICAgICAgICAgICAidyIsICJtIiwgIm0iLCAibSIsICJ3IiwgIm0iLCAibSIsICJtIiwgIm0iLCAibSIsICJ3IiwgIm0iLA0KICAgICAgICAgICAgICAgICAgICJtIiwgInciLCAidyIsICJtIiwgInciLCAibSIsICJ3IiwgIm0iLCAibSIsICJtIiwgInciLCAibSIsDQogICAgICAgICAgICAgICAgICAgIm0iLCAidyIsICJ3IiwgIm0iLCAibSIsICJtIiwgInciLCAidyIsICJ3IiwgIm0iLCAibSIsICJtIiwgDQogICAgICAgICAgICAgICAgICAgIm0iLCAibSIsICJ3IiwgInciLCAibSIsICJtIiwgIm0iLCAibSIsICJtIiwgIm0iLCAibSIsICJtIiwgDQogICAgICAgICAgICAgICAgICAgIm0iLCAibSIsICJ3IiwgIm0iLCAibSIsICJtIiwgIm0iLCAibSIpDQoNCm1hbnVhbF9jb21iaW5hdGlvbiA8LSBjYmluZC5kYXRhLmZyYW1lKGZ1bGwgPSBmdWxsX21hbnVhbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsX2RlY2lzaW9uID0gZ2VuZGVyX21hbnVhbCkNCmBgYA0KDQpDb21iaW5lIGZvciB0aGUgbWlzc2luZyBvbmVzLCBhbmQgcmVwbGFjZSB0aGUgbWlzc2luZ25lc3Mgd2l0aCB0aGUgbWFudWFsbHkNCmluZmVycmVkIGdlbmRlcjoNCmBgYHtyfQ0KcHJvZnNfZnVsbF9nZW5kZXJfbWlzc2luZyA8LSBtZXJnZShwcm9mc19mdWxsX2dlbmRlcl9taXNzaW5nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW51YWxfY29tYmluYXRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gImZ1bGwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQoNCnByb2ZzX2Z1bGxfZ2VuZGVyX21pc3NpbmckaW5mZXJyZWRfZ2VuZGVyIDwtIHByb2ZzX2Z1bGxfZ2VuZGVyX21pc3NpbmckZmluYWxfZGVjaXNpb24NCg0KcHJvZnNfZnVsbF9nZW5kZXJfbWlzc2luZyA8LSBwcm9mc19mdWxsX2dlbmRlcl9taXNzaW5nW2NvbG5hbWVzKHByb2ZzX2Z1bGxfZ2VuZGVyKV0NCmBgYA0KDQpDb21iaW5lIHRoZSBmdWxsIHByb2YgbGlzdCBhZ2FpbjoNCmBgYHtyfQ0KcHJvZnNfZnVsbF9nZW5kZXIgPC0gZmlsdGVyKHByb2ZzX2Z1bGxfZ2VuZGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZmVycmVkX2dlbmRlciAlaW4lIGMoIm0iLCAidyIpKQ0KDQpwcm9mc19mdWxsX2dlbmRlciA8LSByYmluZChwcm9mc19mdWxsX2dlbmRlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZzX2Z1bGxfZ2VuZGVyX21pc3NpbmcpDQpgYGANCg0KU2F2ZSB0aGUgb3V0cHV0Og0KYGBge3J9DQpkYldyaXRlVGFibGUoY29uLCAiZ2VuZGVyX3RhYmxlIiwgcHJvZnNfZnVsbF9nZW5kZXIsIHJvdy5uYW1lcz1GQUxTRSwgYXBwZW5kPVRSVUUpDQpgYGANCg0KDQojIyBQbG90cyANCg0KYGBge3IgZWNobyA9IEYsIGV2YWwgPSBUUlVFfQ0KcHJvZnNfZnVsbF9nZW5kZXIgPC0gZGJSZWFkVGFibGUoY29uLCAiZ2VuZGVyX3RhYmxlIikNCmBgYA0KDQoNClByb3BvcnRpb25zOg0KDQpgYGB7cn0NCnJvdW5kKHByb3AudGFibGUodGFibGUocHJvZnNfZnVsbF9nZW5kZXIkaW5mZXJyZWRfZ2VuZGVyKSkqMTAwKQ0KYGBgDQoNClBsb3QgdGhlIHByb3BvcnRpb25zOg0KYGBge3IgZXZhbCA9IFRSVUV9DQpnZ3Bsb3QocHJvZnNfZnVsbF9nZW5kZXIpICsgDQogIGdlb21fYmFyKG1hcHBpbmcgPSBhZXMoeCA9IGluZmVycmVkX2dlbmRlciwgeSA9IGFmdGVyX3N0YXQocHJvcCksIGdyb3VwID0gMSksIHN0YXQgPSAiY291bnQiKQ0KYGBgDQoNCg0KUGxvdCB0aGUgY291bnRzOg0KYGBge3IgZXZhbCA9IFRSVUV9DQpnZ3Bsb3QocHJvZnNfZnVsbF9nZW5kZXIsIGFlcyhmb3JtYXQoaW5mZXJyZWRfZ2VuZGVyKSkpICsNCiAgICBnZW9tX2JhcihzdGF0ID0gImNvdW50IikgKw0KICAgIGxhYnMoeCA9ICJOdW1iZXIiKQ0KYGBgDQoNCg0KIyBDb2F1dGhvcnMNCg0KUmV0cmlldmUgdGhlIGZ1bGwgbGlzdCBvZiBjb2F1dGhvciBuYW1lcyBmcm9tIHRoZSBkYXRhYmFzZToNCmBgYHtyfQ0KY29hdXRob3JfbmFtZXMgPC0gZGJSZWFkVGFibGUoY29uLCAib2FfY29hdXRob3JfbmFtZV9saXN0IikNCiMgbG93ZXJjYXNlIHRoZSBuYW1lcw0KY29hdXRob3JfbmFtZXMkZmlyc3RfbG93ZXJjYXNlIDwtIHRvbG93ZXIoY29hdXRob3JfbmFtZXMkZmlyc3QpDQojIHJlbW92ZSBhbnkgcmVtYWluaW5nIHNwZWNpYWwgY2hhcmFjdGVycyBhcGFydCBmcm9tIGRhc2hlcyB0aGF0IGVudGVyIG1hbnkgbmFtZXMNCmNvYXV0aG9yX25hbWVzJGZpcnN0X2xvd2VyY2FzZSA8LSBnc3ViKCJbXi1bOl5wdW5jdDpdXSIsICIiLCBjb2F1dGhvcl9uYW1lcyRmaXJzdF9sb3dlcmNhc2UsIHBlcmw9VCkNCmBgYA0KDQpHZXQgdW5pcXVlIG5hbWVzIGluIG91ciBkYXRhc2V0Og0KYGBge3J9DQp1bmlxdWVfbmFtZXMgPC0gZGlzdGluY3QoY29hdXRob3JfbmFtZXMsIGZpcnN0X2xvd2VyY2FzZSkNCmBgYA0KDQpJbmZlcnJpbmcgZ2VuZGVyIHdpdGggZ2VuZGVyaXplLmlvOg0KYGBge3J9DQojIGZpbGwgaW4gb3duIGFwaSBrZXkNCmdlbmRlcml6ZV9hcGlfa2V5IDwtICcnDQoNCiMgbGlzdCBvZiBuYW1lcw0KbmFtZXMgPC0gdW5pcXVlX25hbWVzJGZpcnN0X2xvd2VyY2FzZQ0KDQpjb2F1dGhvcl9uYW1lX2dlbmRlciA8LSBkYXRhLmZyYW1lKG1hdHJpeChOQSwgbnJvdyA9IDAsIG5jb2wgPSA0KSkNCg0KZm9yIChpIGluIDE6bGVuZ3RoKG5hbWVzKSl7DQogIG5hbWUgPC0gbmFtZXNbaV0NCiAgb3V0cHV0IDwtIGdlbmRlcml6ZV9pb19mdW5jdGlvbihuYW1lLA0KICAgICAgICAgICAgICAgICAgICAgIGFwaV9rZXkgPSBnZW5kZXJpemVfYXBpX2tleSkNCiAgDQogIGNvYXV0aG9yX25hbWVfZ2VuZGVyICA8LSByYmluZChjb2F1dGhvcl9uYW1lX2dlbmRlciAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0KQ0KICBwcmludChwYXN0ZSgiZG9uZSB3aXRoIiwgaSwgIm91dCBvZiIsIGxlbmd0aChuYW1lcykpKQ0KfQ0KDQpkYldyaXRlVGFibGUoY29uLCAiY29hdXRob3JfbmFtZV9nZW5kZXIiLCBjb2F1dGhvcl9uYW1lX2dlbmRlciAsIHJvdy5uYW1lcz1GQUxTRSwgYXBwZW5kPVRSVUUpDQpgYGANCg0KDQojIEpvdXJuYWxpc3RzIGZyb20gTWVudGlvbnMgZGF0YQ0KR2V0IHRoZSBqb3VybmFsaXN0IG5hbWVzIHdoZXJlIGFwcGxpY2FibGU6DQoNCkZpcnN0LCBjaGVjayB3aGljaCBuYW1lcyB3ZSBhbHJlYWR5IGhhdmUgaW4gb3VyIE5BUkNJUw0KYW5kIGNvYXV0aG9yIGxpc3RzOg0KYGBge3J9DQojIGxvYWQgdGhlIG1lbnRpb24gbmFtZXMNCmZ1bGxfbWVudGlvbl9kYXRhX25hbWVzIDwtIGRiUmVhZFRhYmxlKGNvbiwgInB1Yl9hdHRfbmV3c19hdXRob3JfbmFtZXMiKQ0KIyBsb2FkIE5BUkNJUyBhbmQgY29hdWF0aG9yIGdlbmRlciBpbmZlcmVuY2UNCm5hcmNpc19nZW5kZXIgPC0gZGJSZWFkVGFibGUoY29uLCAiZ2VuZGVyX3RhYmxlIikNCmNvYXV0aG9yX2dlbmRlciA8LSBkYlJlYWRUYWJsZShjb24sICJjb2F1dGhvcl9uYW1lX2dlbmRlciIpDQojIGNvbWJpbmUgdGhlIGV4aXN0aW5nIHNvdXJjZXMgdG9nZXRoZXINCm5hcmNpc19nZW5kZXIgPC0gbmFyY2lzX2dlbmRlciAlPiUNCiAgc2VsZWN0KGZpcnN0LCBpbmZlcnJlZF9nZW5kZXIpJT4lDQogIGRpc3RpbmN0KGZpcnN0LCBpbmZlcnJlZF9nZW5kZXIpDQoNCmNvYXV0aG9yX2dlbmRlciA8LSBjb2F1dGhvcl9nZW5kZXIgJT4lDQogIHNlbGVjdChuYW1lLCBnZW5kZXIpJT4lDQogIGRpc3RpbmN0KG5hbWUsIGdlbmRlcikNCg0KY29sbmFtZXMobmFyY2lzX2dlbmRlcikgPC0gYygibmFtZSIsICJnZW5kZXIiKQ0KDQpmdWxsX25hbWVfbGlzdCA8LSByYmluZChuYXJjaXNfZ2VuZGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgY29hdXRob3JfZ2VuZGVyKSAlPiUNCiAgZGlzdGluY3QobmFtZSwgLmtlZXBfYWxsID0gVFJVRSkNCg0KIyBjaGVjayB3aGljaCBuYW1lcyBhcmUgYWxyZWFkeSB0aGVyZQ0KdW5pcXVlX21lbnRpb25fbmFtZXMgPC0gZnVsbF9tZW50aW9uX2RhdGFfbmFtZXMgJT4lDQogIGRpc3RpbmN0KGF1dGhvcl9maXJzdF9uYW1lKQ0KDQptaXNzaW5nX21lbnRpb25fbmFtZXMgPC0gZmlsdGVyKHVuaXF1ZV9tZW50aW9uX25hbWVzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIGF1dGhvcl9maXJzdF9uYW1lICVpbiUgZnVsbF9uYW1lX2xpc3QkbmFtZSkNCg0KIyBpbmZlciBnZW5kZXIgZm9yIHRoZW0NCiMgbGlzdCBvZiBuYW1lcw0KbWlzc2luZ19tZW50aW9uX25hbWVzIDwtIG1pc3NpbmdfbWVudGlvbl9uYW1lcyRhdXRob3JfZmlyc3RfbmFtZQ0KDQptZW50aW9uX25hbWVfZ2VuZGVyIDwtIGRhdGEuZnJhbWUobWF0cml4KE5BLCBucm93ID0gMCwgbmNvbCA9IDQpKQ0KDQpmb3IgKGkgaW4gMTpsZW5ndGgobWlzc2luZ19tZW50aW9uX25hbWVzKSl7DQogIG5hbWUgPC0gbWlzc2luZ19tZW50aW9uX25hbWVzW2ldDQogIG91dHB1dCA8LSBnZW5kZXJpemVfaW9fZnVuY3Rpb24obmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlfa2V5ID0gZ2VuZGVyaXplX2FwaV9rZXkpDQogIA0KICBtZW50aW9uX25hbWVfZ2VuZGVyICA8LSByYmluZChtZW50aW9uX25hbWVfZ2VuZGVyICwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0KQ0KICBwcmludChwYXN0ZSgiZG9uZSB3aXRoIiwgaSwgIm91dCBvZiIsIGxlbmd0aChtaXNzaW5nX21lbnRpb25fbmFtZXMpKSkNCn0NCg0KDQojIGJpbmQgd2l0aCB0aGUgZnVsbCBsaXN0DQpmdWxsX25hbWVfbGlzdCA8LSByYmluZChmdWxsX25hbWVfbGlzdCwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnRpb25fbmFtZV9nZW5kZXJbYygibmFtZSIsICJnZW5kZXIiKV0pDQpgYGANCg0KQW5kIGZpbmFsbHksIGluZmVyIHRoZSBnZW5kZXIgZm9yIG91ciBtZW50aW9uIGF1dGhvcnM6DQpgYGB7cn0NCmNvbG5hbWVzKGZ1bGxfbWVudGlvbl9kYXRhX25hbWVzKVsyXSA8LSAibmFtZSINCg0KZnVsbF9tZW50aW9uX2RhdGFfbmFtZXNfZ2VuZGVyIDwtIG1lcmdlKGZ1bGxfbWVudGlvbl9kYXRhX25hbWVzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxfbmFtZV9saXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5ID0gIm5hbWUiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUpDQpgYGANCg0KTm93LCB3cml0ZSB0aGlzIGludG8gb3VyIGRhdGFiYXNlOg0KYGBge3J9DQpkYldyaXRlVGFibGUoY29uLCAicHViX2F0dF9uZXdzX2F1dGhvcl9uYW1lc19nZW5kZXIiLCBmdWxsX21lbnRpb25fZGF0YV9uYW1lc19nZW5kZXIpDQpgYGANCg0KDQoNCg0KDQo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Gender_inference.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
