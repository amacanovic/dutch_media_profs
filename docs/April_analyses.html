<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Ana Macanovic" />

<meta name="date" content="2024-04-10" />

<title>Various analyses - April 2024, final dataset</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a>
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="index.html">Code homepage</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon glyphicon glyphicon-list"></span>
     
    Scripts
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="SQL_tutorial.html">Intro: SQL tutorial</a>
    </li>
    <li>
      <a href="OpenAlex_Altmetric_data_download.html">1. Open Alex and Altmetric data download</a>
    </li>
    <li>
      <a href="Gender_inference.html">2. Gender inference</a>
    </li>
    <li>
      <a href="Grant_parsing.html">3. Grant parsing</a>
    </li>
    <li>
      <a href="Lexis_nexis_parser.html">4. Lexis data parser</a>
    </li>
    <li>
      <a href="Mention_url_extraction.html">5. Mention URL extraction</a>
    </li>
    <li>
      <a href="Data_descriptives.html">5. Database description and coverage</a>
    </li>
    <li>
      <a href="Panel_data_compilation.html">6. Panel data compilation</a>
    </li>
    <li>
      <a href="Various_plots.html">8. Data plots</a>
    </li>
    <li>
      <a href="Various_regressions.html">9. Regression models</a>
    </li>
    <li>
      <a href="April_analyses.html">10. Various analyses - April</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/amacanovic/dutch_media_profs">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Various analyses - April 2024, final
dataset</h1>
<h4 class="author">Ana Macanovic</h4>
<h4 class="date">2024-04-10</h4>

</div>


<p>This is a first draft of our main analyses.</p>
<p>Load the packages:</p>
<pre class="r"><code>library(groundhog)
packages_to_load &lt;- c(&quot;readr&quot;, &quot;dplyr&quot;, &quot;tidyr&quot;, 
                      &quot;ggplot2&quot;, &quot;gridExtra&quot;, &quot;cowplot&quot;,
                      &quot;tidyverse&quot;, &quot;RPostgres&quot;, &quot;markovchain&quot;
                      , &quot;RPostgres&quot;, &quot;lubridate&quot;, &quot;psych&quot;,
                      &quot;gridExtra&quot;, &quot;DescTools&quot;, &quot;marginaleffects&quot;,
                      &quot;panelr&quot;, &quot;skimr&quot;, &quot;margins&quot;,
                      &quot;lmtest&quot;, &quot;sandwich&quot;, &quot;rstatix&quot;, &quot;ggpubr&quot;,
                      &quot;stargazer&quot;,&quot;plm&quot;, &quot;grid&quot;)
groundhog.library(packages_to_load, date = &quot;2023-12-01&quot;)
#groundhog.library(c(&quot;ggeffects&quot;, &quot;insight&quot;), date = &quot;2024-04-15&quot;)

install.packages(&quot;insight&quot;)</code></pre>
<pre><code>## package &#39;insight&#39; successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
##  C:\Users\anama\AppData\Local\Temp\Rtmp06jv4j\downloaded_packages</code></pre>
<pre class="r"><code>library(insight)
library(ggeffects)
source(&quot;helper_functions.R&quot;)</code></pre>
<p>Load the panel:</p>
<pre class="r"><code>prof_panel_coa &lt;- read_csv(&quot;panel_datasets/prof_panel_tidy_26_4.csv&quot;)

prof_panel_filter &lt;- filter(prof_panel_coa,
                            year &lt; 2024)</code></pre>
<div id="explore-representation-across-different-data-sources"
class="section level1" number="1">
<h1><span class="header-section-number">1</span> Explore representation
across different data sources:</h1>
<pre class="r"><code>sources_check &lt;- prof_panel_filter %&gt;%
  group_by(profile_id)%&gt;%
  filter(year == max(year))</code></pre>
<div id="news-data" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> News data</h2>
<p>How many professors have at least one mention?</p>
<pre class="r"><code>sources_check$any_news &lt;- ifelse(sources_check$news_all_total &gt; 0, TRUE, FALSE)

table(sources_check$any_news)</code></pre>
<pre><code>## 
## FALSE  TRUE 
##   269  6499</code></pre>
<pre class="r"><code>prop.table(table(sources_check$any_news))</code></pre>
<pre><code>## 
##      FALSE       TRUE 
## 0.03974586 0.96025414</code></pre>
<p>96% of professors in our data - 6499 of them, has at least one news
mention.</p>
<p>On average, a professor in our dataset has accumulated 68.9 mentions
throughout their career:</p>
<pre class="r"><code>mean(sources_check$news_all_total, na.rm = TRUE)</code></pre>
<pre><code>## [1] 68.88194</code></pre>
<p>Or, 2.65 mentions per year:</p>
<pre class="r"><code>mean(prof_panel_filter$news_allall, na.rm = TRUE)</code></pre>
<pre><code>## [1] NA</code></pre>
<p>Breakdown by news article type:</p>
<pre class="r"><code>news_type_source &lt;- sources_check %&gt;%
  select(profile_id, general_field, entry_batch_2023, inferred_gender, news_national_total:news_intl_total)
#news_type$news_all_total &lt;- rowSums(news_type[, 5:9])
colnames(news_type_source) &lt;- str_remove(str_remove(str_remove(colnames(news_type_source), &quot;news_&quot;), &quot;_total&quot;), &quot;lexis_&quot;)
colnames(news_type_source)[5:8] &lt;- c(&quot;National news&quot;,
                                     &quot;Regional news&quot;,
                                     &quot;Other news&quot;,
                                     &quot;International news&quot;)

news_type &lt;- news_type_source %&gt;%
  pivot_longer(cols = c(`National news`:`International news`))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(general_field, inferred_gender, name)%&gt;%
  summarise(
    profs = n(),
    sum = sum(value, na.rm = TRUE))%&gt;%
  pivot_wider(names_from = inferred_gender, values_from = c(profs,sum))%&gt;%
  group_by(general_field)%&gt;%
  mutate(m_prop = round(sum_m/sum(sum_m, na.rm = TRUE),3),
         w_prop = round(sum_w/sum(sum_w, na.rm = TRUE), 3),
         m_ave = round(sum_m/profs_m, 3),
         w_ave = round(sum_w/profs_w, 3))

news_overall &lt;- news_type_source %&gt;%
  pivot_longer(cols = c(`National news`:`International news`))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(general_field, inferred_gender)%&gt;%
  summarise(
    profs = n_distinct(profile_id),
    sum = sum(value, na.rm = TRUE))%&gt;%
  pivot_wider(names_from = inferred_gender, values_from = c(profs,sum))%&gt;%
  mutate(m_prop = round(sum_m/sum(sum_m),3),
         w_prop = round(sum_w/sum(sum_w), 3),
         m_ave = round(sum_m/profs_m, 3),
         w_ave = round(sum_w/profs_w, 3))

news_overall$name &lt;- &quot;All news&quot;
news_overall &lt;- news_overall[colnames(news_type)]

news_type &lt;- rbind(news_type,
                   news_overall)

news_overall_overall &lt;- news_type_source %&gt;%
  pivot_longer(cols = c(`National news`:`International news`))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(inferred_gender)%&gt;%
  summarise(
    profs = n_distinct(profile_id),
    sum = sum(value, na.rm = TRUE))%&gt;%
  pivot_wider(names_from = inferred_gender, values_from = c(profs,sum))%&gt;%
  mutate(m_prop = round(sum_m/sum(sum_m),3),
         w_prop = round(sum_w/sum(sum_w), 3),
         m_ave = round(sum_m/profs_m, 3),
         w_ave = round(sum_w/profs_w, 3))

news_overall_overall$name &lt;- &quot;All news&quot;
news_overall_overall$general_field &lt;- &quot;All fields&quot;
news_overall_overall &lt;- news_overall_overall[colnames(news_type)]

news_type &lt;- rbind(news_type,
                   news_overall_overall)


news_type &lt;- news_type %&gt;%
  arrange(general_field, name)%&gt;%
  select(general_field:sum_w, m_ave, w_ave, m_prop, w_prop)

colnames(news_type) &lt;- c(&quot;Field&quot;,
                         &quot;News type&quot;,
                         &quot;N professors - men&quot;,
                         &quot;N professors - women&quot;,
                         &quot;News mentions - men&quot;,
                         &quot;News mentions - women&quot;,
                         &quot;Avg. news mentions - men&quot;,
                         &quot;Avg. news mentions - women&quot;,
                         &quot;Share mentions per source - men&quot;,
                         &quot;Share mentions per source - women&quot;)

# output to results
write_csv(news_type, &quot;Plots_april/Supplemental/T_news_source.csv&quot;)
knitr::kable(news_type)</code></pre>
<table>
<colgroup>
<col width="7%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="9%" />
<col width="10%" />
<col width="11%" />
<col width="13%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Field</th>
<th align="left">News type</th>
<th align="right">N professors - men</th>
<th align="right">N professors - women</th>
<th align="right">News mentions - men</th>
<th align="right">News mentions - women</th>
<th align="right">Avg. news mentions - men</th>
<th align="right">Avg. news mentions - women</th>
<th align="right">Share mentions per source - men</th>
<th align="right">Share mentions per source - women</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">All fields</td>
<td align="left">All news</td>
<td align="right">4990</td>
<td align="right">1801</td>
<td align="right">379459</td>
<td align="right">86257</td>
<td align="right">76.044</td>
<td align="right">47.894</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">All news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">17718</td>
<td align="right">3194</td>
<td align="right">71.733</td>
<td align="right">29.036</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left">Arts &amp; Humanities</td>
<td align="left">International news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">5125</td>
<td align="right">628</td>
<td align="right">20.749</td>
<td align="right">5.709</td>
<td align="right">0.289</td>
<td align="right">0.197</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">National news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">338</td>
<td align="right">43</td>
<td align="right">1.368</td>
<td align="right">0.391</td>
<td align="right">0.019</td>
<td align="right">0.013</td>
</tr>
<tr class="odd">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Other news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">2282</td>
<td align="right">718</td>
<td align="right">9.239</td>
<td align="right">6.527</td>
<td align="right">0.129</td>
<td align="right">0.225</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Regional news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">9973</td>
<td align="right">1805</td>
<td align="right">40.377</td>
<td align="right">16.409</td>
<td align="right">0.563</td>
<td align="right">0.565</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">All news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">80031</td>
<td align="right">19129</td>
<td align="right">62.378</td>
<td align="right">35.035</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left">Medicine</td>
<td align="left">International news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">18887</td>
<td align="right">4313</td>
<td align="right">14.721</td>
<td align="right">7.899</td>
<td align="right">0.236</td>
<td align="right">0.225</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">National news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">3222</td>
<td align="right">612</td>
<td align="right">2.511</td>
<td align="right">1.121</td>
<td align="right">0.040</td>
<td align="right">0.032</td>
</tr>
<tr class="even">
<td align="left">Medicine</td>
<td align="left">Other news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">33335</td>
<td align="right">7154</td>
<td align="right">25.982</td>
<td align="right">13.103</td>
<td align="right">0.417</td>
<td align="right">0.374</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">Regional news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">24587</td>
<td align="right">7050</td>
<td align="right">19.164</td>
<td align="right">12.912</td>
<td align="right">0.307</td>
<td align="right">0.369</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">All news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">117908</td>
<td align="right">14562</td>
<td align="right">64.046</td>
<td align="right">38.220</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left">STEM</td>
<td align="left">International news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">22896</td>
<td align="right">1909</td>
<td align="right">12.437</td>
<td align="right">5.010</td>
<td align="right">0.194</td>
<td align="right">0.131</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">National news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">5044</td>
<td align="right">742</td>
<td align="right">2.740</td>
<td align="right">1.948</td>
<td align="right">0.043</td>
<td align="right">0.051</td>
</tr>
<tr class="odd">
<td align="left">STEM</td>
<td align="left">Other news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">57215</td>
<td align="right">7030</td>
<td align="right">31.078</td>
<td align="right">18.451</td>
<td align="right">0.485</td>
<td align="right">0.483</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">Regional news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">32753</td>
<td align="right">4881</td>
<td align="right">17.791</td>
<td align="right">12.811</td>
<td align="right">0.278</td>
<td align="right">0.335</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">All news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">163802</td>
<td align="right">49372</td>
<td align="right">101.175</td>
<td align="right">64.623</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left">Social sciences</td>
<td align="left">International news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">47608</td>
<td align="right">13770</td>
<td align="right">29.406</td>
<td align="right">18.024</td>
<td align="right">0.291</td>
<td align="right">0.279</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">National news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">3504</td>
<td align="right">737</td>
<td align="right">2.164</td>
<td align="right">0.965</td>
<td align="right">0.021</td>
<td align="right">0.015</td>
</tr>
<tr class="even">
<td align="left">Social sciences</td>
<td align="left">Other news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">32835</td>
<td align="right">9616</td>
<td align="right">20.281</td>
<td align="right">12.586</td>
<td align="right">0.200</td>
<td align="right">0.195</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">Regional news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">79855</td>
<td align="right">25249</td>
<td align="right">49.324</td>
<td align="right">33.048</td>
<td align="right">0.488</td>
<td align="right">0.511</td>
</tr>
</tbody>
</table>
</div>
<div id="altmetric-data" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Altmetric data</h2>
<p>How many professors have at least one mention?</p>
<pre class="r"><code>sources_check$any_alt &lt;- ifelse(sources_check$alt_online_all_total &gt; 0, TRUE, FALSE)

table(sources_check$any_alt)</code></pre>
<pre><code>## 
## FALSE  TRUE 
##  1472  5301</code></pre>
<pre class="r"><code>prop.table(table(sources_check$any_alt))</code></pre>
<pre><code>## 
##     FALSE      TRUE 
## 0.2173335 0.7826665</code></pre>
<p>78% of professors in our data - 5301 of them, has at least one news
mention.</p>
<p>On average, a professor in our dataset has accumulated 102.7 online
mentions throughout their career:</p>
<pre class="r"><code>mean(sources_check$alt_online_all_total, na.rm = TRUE)</code></pre>
<pre><code>## [1] 102.7139</code></pre>
<p>Or, 8.3 mentions per year:</p>
<pre class="r"><code>mean(prof_panel_filter$alt_online_all, na.rm = TRUE)</code></pre>
<pre><code>## [1] 8.247981</code></pre>
<p>Check the averages breakdown:</p>
<pre class="r"><code>online_news_type_source &lt;- sources_check %&gt;%
  select(profile_id, general_field, entry_batch_2023, inferred_gender, alt_news_aggregator_total:alt_science_news_total)
#news_type$news_all_total &lt;- rowSums(news_type[, 5:9])
colnames(online_news_type_source) &lt;- str_remove(str_remove(str_remove(colnames(online_news_type_source), &quot;alt_&quot;), &quot;_total&quot;), &quot;lexis_&quot;)
colnames(online_news_type_source)[5:14] &lt;- c(&quot;News aggregator&quot;,
                                     &quot;Online blog&quot;,
                                     &quot;Science news aggregator&quot;,
                                     &quot;Finance news&quot;,
                                     &quot;General interest - local&quot;,
                                     &quot;General interest&quot;,
                                     &quot;Medical portals&quot;,
                                     &quot;Other news&quot;,
                                     &quot;Popular science news&quot;,
                                     &quot;Science news&quot;)

online_news_type &lt;- online_news_type_source %&gt;%
  pivot_longer(cols = c(`News aggregator`:`Science news`))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(general_field, inferred_gender, name)%&gt;%
  summarise(
    profs = n(),
    sum = sum(value, na.rm = TRUE))%&gt;%
  pivot_wider(names_from = inferred_gender, values_from = c(profs,sum))%&gt;%
  group_by(general_field)%&gt;%
  mutate(m_prop = round(sum_m/sum(sum_m),3),
         w_prop = round(sum_w/sum(sum_w), 3),
         m_ave = round(sum_m/profs_m, 3),
         w_ave = round(sum_w/profs_w, 3))

online_news_overall &lt;- online_news_type_source %&gt;%
  pivot_longer(cols = c(`News aggregator`:`Science news`))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(general_field, inferred_gender)%&gt;%
  summarise(
    profs = n_distinct(profile_id),
    sum = sum(value, na.rm = TRUE))%&gt;%
  pivot_wider(names_from = inferred_gender, values_from = c(profs,sum))%&gt;%
  mutate(m_prop = round(sum_m/sum(sum_m),3),
         w_prop = round(sum_w/sum(sum_w), 3),
         m_ave = round(sum_m/profs_m, 3),
         w_ave = round(sum_w/profs_w, 3))

online_news_overall$name &lt;- &quot;All news&quot;
online_news_overall &lt;- online_news_overall[colnames(online_news_type)]

online_news_type &lt;- rbind(online_news_type,
                   online_news_overall)

online_news_overall_overall &lt;- online_news_type_source %&gt;%
  pivot_longer(cols = c(`News aggregator`:`Science news`))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(inferred_gender)%&gt;%
  summarise(
    profs = n_distinct(profile_id),
    sum = sum(value, na.rm = TRUE))%&gt;%
  pivot_wider(names_from = inferred_gender, values_from = c(profs,sum))%&gt;%
  mutate(m_prop = round(sum_m/sum(sum_m),3),
         w_prop = round(sum_w/sum(sum_w), 3),
         m_ave = round(sum_m/profs_m, 3),
         w_ave = round(sum_w/profs_w, 3))

online_news_overall_overall$name &lt;- &quot;All news&quot;
online_news_overall_overall$general_field &lt;- &quot;All fields&quot;
online_news_overall_overall &lt;- online_news_overall_overall[colnames(online_news_type)]

online_news_type &lt;- rbind(online_news_type,
                   online_news_overall_overall)

online_news_type &lt;- online_news_type %&gt;%
  arrange(general_field, name)%&gt;%
  select(general_field:sum_w, m_ave, w_ave, m_prop, w_prop)

colnames(online_news_type) &lt;- c(&quot;Field&quot;,
                         &quot;News type&quot;,
                         &quot;N professors - men&quot;,
                         &quot;N professors - women&quot;,
                         &quot;News mentions - men&quot;,
                         &quot;News mentions - women&quot;,
                         &quot;Avg. news mentions - men&quot;,
                         &quot;Avg. news mentions - women&quot;,
                         &quot;Share mentions per source - men&quot;,
                         &quot;Share mentions per source - women&quot;)

# output to results
write_csv(online_news_type, &quot;Plots_april/Supplemental/T_online_news_source.csv&quot;)
knitr::kable(online_news_type)</code></pre>
<table>
<colgroup>
<col width="7%" />
<col width="10%" />
<col width="7%" />
<col width="8%" />
<col width="8%" />
<col width="9%" />
<col width="10%" />
<col width="11%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Field</th>
<th align="left">News type</th>
<th align="right">N professors - men</th>
<th align="right">N professors - women</th>
<th align="right">News mentions - men</th>
<th align="right">News mentions - women</th>
<th align="right">Avg. news mentions - men</th>
<th align="right">Avg. news mentions - women</th>
<th align="right">Share mentions per source - men</th>
<th align="right">Share mentions per source - women</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">All fields</td>
<td align="left">All news</td>
<td align="right">4990</td>
<td align="right">1801</td>
<td align="right">528005</td>
<td align="right">167676</td>
<td align="right">105.813</td>
<td align="right">93.102</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">All news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">1334</td>
<td align="right">530</td>
<td align="right">5.401</td>
<td align="right">4.818</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Finance news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">25</td>
<td align="right">8</td>
<td align="right">0.101</td>
<td align="right">0.073</td>
<td align="right">0.019</td>
<td align="right">0.015</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">General interest</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">223</td>
<td align="right">105</td>
<td align="right">0.903</td>
<td align="right">0.955</td>
<td align="right">0.167</td>
<td align="right">0.198</td>
</tr>
<tr class="odd">
<td align="left">Arts &amp; Humanities</td>
<td align="left">General interest - local</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">98</td>
<td align="right">58</td>
<td align="right">0.397</td>
<td align="right">0.527</td>
<td align="right">0.073</td>
<td align="right">0.109</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Medical portals</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">14</td>
<td align="right">11</td>
<td align="right">0.057</td>
<td align="right">0.100</td>
<td align="right">0.010</td>
<td align="right">0.021</td>
</tr>
<tr class="odd">
<td align="left">Arts &amp; Humanities</td>
<td align="left">News aggregator</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">30</td>
<td align="right">10</td>
<td align="right">0.121</td>
<td align="right">0.091</td>
<td align="right">0.022</td>
<td align="right">0.019</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Online blog</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">590</td>
<td align="right">134</td>
<td align="right">2.389</td>
<td align="right">1.218</td>
<td align="right">0.442</td>
<td align="right">0.253</td>
</tr>
<tr class="odd">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Other news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">176</td>
<td align="right">91</td>
<td align="right">0.713</td>
<td align="right">0.827</td>
<td align="right">0.132</td>
<td align="right">0.172</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Popular science news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">50</td>
<td align="right">41</td>
<td align="right">0.202</td>
<td align="right">0.373</td>
<td align="right">0.037</td>
<td align="right">0.077</td>
</tr>
<tr class="odd">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Science news</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">75</td>
<td align="right">37</td>
<td align="right">0.304</td>
<td align="right">0.336</td>
<td align="right">0.056</td>
<td align="right">0.070</td>
</tr>
<tr class="even">
<td align="left">Arts &amp; Humanities</td>
<td align="left">Science news aggregator</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">53</td>
<td align="right">35</td>
<td align="right">0.215</td>
<td align="right">0.318</td>
<td align="right">0.040</td>
<td align="right">0.066</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">All news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">258801</td>
<td align="right">102418</td>
<td align="right">201.716</td>
<td align="right">187.579</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left">Medicine</td>
<td align="left">Finance news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">10591</td>
<td align="right">3661</td>
<td align="right">8.255</td>
<td align="right">6.705</td>
<td align="right">0.041</td>
<td align="right">0.036</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">General interest</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">35183</td>
<td align="right">16088</td>
<td align="right">27.422</td>
<td align="right">29.465</td>
<td align="right">0.136</td>
<td align="right">0.157</td>
</tr>
<tr class="even">
<td align="left">Medicine</td>
<td align="left">General interest - local</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">42544</td>
<td align="right">14800</td>
<td align="right">33.160</td>
<td align="right">27.106</td>
<td align="right">0.164</td>
<td align="right">0.145</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">Medical portals</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">50918</td>
<td align="right">19210</td>
<td align="right">39.687</td>
<td align="right">35.183</td>
<td align="right">0.197</td>
<td align="right">0.188</td>
</tr>
<tr class="even">
<td align="left">Medicine</td>
<td align="left">News aggregator</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">9851</td>
<td align="right">3549</td>
<td align="right">7.678</td>
<td align="right">6.500</td>
<td align="right">0.038</td>
<td align="right">0.035</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">Online blog</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">31197</td>
<td align="right">12625</td>
<td align="right">24.316</td>
<td align="right">23.123</td>
<td align="right">0.121</td>
<td align="right">0.123</td>
</tr>
<tr class="even">
<td align="left">Medicine</td>
<td align="left">Other news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">52924</td>
<td align="right">22202</td>
<td align="right">41.250</td>
<td align="right">40.663</td>
<td align="right">0.204</td>
<td align="right">0.217</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">Popular science news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">5242</td>
<td align="right">2572</td>
<td align="right">4.086</td>
<td align="right">4.711</td>
<td align="right">0.020</td>
<td align="right">0.025</td>
</tr>
<tr class="even">
<td align="left">Medicine</td>
<td align="left">Science news</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">14140</td>
<td align="right">5387</td>
<td align="right">11.021</td>
<td align="right">9.866</td>
<td align="right">0.055</td>
<td align="right">0.053</td>
</tr>
<tr class="odd">
<td align="left">Medicine</td>
<td align="left">Science news aggregator</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">6211</td>
<td align="right">2324</td>
<td align="right">4.841</td>
<td align="right">4.256</td>
<td align="right">0.024</td>
<td align="right">0.023</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">All news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">207637</td>
<td align="right">36119</td>
<td align="right">112.785</td>
<td align="right">94.801</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left">STEM</td>
<td align="left">Finance news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">6228</td>
<td align="right">754</td>
<td align="right">3.383</td>
<td align="right">1.979</td>
<td align="right">0.030</td>
<td align="right">0.021</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">General interest</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">35630</td>
<td align="right">5914</td>
<td align="right">19.354</td>
<td align="right">15.522</td>
<td align="right">0.172</td>
<td align="right">0.164</td>
</tr>
<tr class="odd">
<td align="left">STEM</td>
<td align="left">General interest - local</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">16535</td>
<td align="right">2858</td>
<td align="right">8.982</td>
<td align="right">7.501</td>
<td align="right">0.080</td>
<td align="right">0.079</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">Medical portals</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">8734</td>
<td align="right">2046</td>
<td align="right">4.744</td>
<td align="right">5.370</td>
<td align="right">0.042</td>
<td align="right">0.057</td>
</tr>
<tr class="odd">
<td align="left">STEM</td>
<td align="left">News aggregator</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">6875</td>
<td align="right">1291</td>
<td align="right">3.734</td>
<td align="right">3.388</td>
<td align="right">0.033</td>
<td align="right">0.036</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">Online blog</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">42924</td>
<td align="right">7470</td>
<td align="right">23.316</td>
<td align="right">19.606</td>
<td align="right">0.207</td>
<td align="right">0.207</td>
</tr>
<tr class="odd">
<td align="left">STEM</td>
<td align="left">Other news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">45367</td>
<td align="right">8177</td>
<td align="right">24.643</td>
<td align="right">21.462</td>
<td align="right">0.218</td>
<td align="right">0.226</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">Popular science news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">7767</td>
<td align="right">1385</td>
<td align="right">4.219</td>
<td align="right">3.635</td>
<td align="right">0.037</td>
<td align="right">0.038</td>
</tr>
<tr class="odd">
<td align="left">STEM</td>
<td align="left">Science news</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">23777</td>
<td align="right">3998</td>
<td align="right">12.915</td>
<td align="right">10.493</td>
<td align="right">0.115</td>
<td align="right">0.111</td>
</tr>
<tr class="even">
<td align="left">STEM</td>
<td align="left">Science news aggregator</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">13800</td>
<td align="right">2226</td>
<td align="right">7.496</td>
<td align="right">5.843</td>
<td align="right">0.066</td>
<td align="right">0.062</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">All news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">60233</td>
<td align="right">28609</td>
<td align="right">37.204</td>
<td align="right">37.446</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left">Social sciences</td>
<td align="left">Finance news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">2695</td>
<td align="right">1188</td>
<td align="right">1.665</td>
<td align="right">1.555</td>
<td align="right">0.045</td>
<td align="right">0.042</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">General interest</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">13118</td>
<td align="right">6683</td>
<td align="right">8.103</td>
<td align="right">8.747</td>
<td align="right">0.218</td>
<td align="right">0.234</td>
</tr>
<tr class="even">
<td align="left">Social sciences</td>
<td align="left">General interest - local</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">6442</td>
<td align="right">3690</td>
<td align="right">3.979</td>
<td align="right">4.830</td>
<td align="right">0.107</td>
<td align="right">0.129</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">Medical portals</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">3236</td>
<td align="right">1582</td>
<td align="right">1.999</td>
<td align="right">2.071</td>
<td align="right">0.054</td>
<td align="right">0.055</td>
</tr>
<tr class="even">
<td align="left">Social sciences</td>
<td align="left">News aggregator</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">1475</td>
<td align="right">736</td>
<td align="right">0.911</td>
<td align="right">0.963</td>
<td align="right">0.024</td>
<td align="right">0.026</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">Online blog</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">13152</td>
<td align="right">5306</td>
<td align="right">8.124</td>
<td align="right">6.945</td>
<td align="right">0.218</td>
<td align="right">0.185</td>
</tr>
<tr class="even">
<td align="left">Social sciences</td>
<td align="left">Other news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">12650</td>
<td align="right">5925</td>
<td align="right">7.813</td>
<td align="right">7.755</td>
<td align="right">0.210</td>
<td align="right">0.207</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">Popular science news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">3198</td>
<td align="right">1522</td>
<td align="right">1.975</td>
<td align="right">1.992</td>
<td align="right">0.053</td>
<td align="right">0.053</td>
</tr>
<tr class="even">
<td align="left">Social sciences</td>
<td align="left">Science news</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">2650</td>
<td align="right">1234</td>
<td align="right">1.637</td>
<td align="right">1.615</td>
<td align="right">0.044</td>
<td align="right">0.043</td>
</tr>
<tr class="odd">
<td align="left">Social sciences</td>
<td align="left">Science news aggregator</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">1617</td>
<td align="right">743</td>
<td align="right">0.999</td>
<td align="right">0.973</td>
<td align="right">0.027</td>
<td align="right">0.026</td>
</tr>
</tbody>
</table>
</div>
<div id="twitter-data" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Twitter data</h2>
<p>How many professors have at least one mention?</p>
<pre class="r"><code>sources_check$any_alt &lt;- ifelse(sources_check$alt_twitter &gt; 0, TRUE, FALSE)

table(sources_check$any_alt)</code></pre>
<pre><code>## 
## FALSE  TRUE 
##  3722  3051</code></pre>
<pre class="r"><code>prop.table(table(sources_check$any_alt))</code></pre>
<pre><code>## 
##     FALSE      TRUE 
## 0.5495349 0.4504651</code></pre>
<p>78% of professors in our data - 5301 of them, has at least one news
mention.</p>
<p>On average, a professor in our dataset has accumulated 102.7 online
mentions throughout their career:</p>
<pre class="r"><code>mean(sources_check$alt_online_all_total, na.rm = TRUE)</code></pre>
<pre><code>## [1] 102.7139</code></pre>
<p>Or, 8.3 mentions per year:</p>
<pre class="r"><code>mean(prof_panel_filter$alt_online_all, na.rm = TRUE)</code></pre>
<pre><code>## [1] 8.247981</code></pre>
<pre class="r"><code>twitter_type_source &lt;- sources_check %&gt;%
  select(profile_id, general_field, entry_batch_2023, inferred_gender, alt_twitter_total)
#news_type$news_all_total &lt;- rowSums(news_type[, 5:9])
colnames(twitter_type_source) &lt;- str_remove(str_remove(str_remove(colnames(twitter_type_source), &quot;alt_&quot;), &quot;_total&quot;), &quot;lexis_&quot;)
colnames(twitter_type_source)[5] &lt;- c(&quot;Twitter&quot;)

twitter_type &lt;- twitter_type_source %&gt;%
  pivot_longer(cols = c(`Twitter`))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(general_field, inferred_gender)%&gt;%
  summarise(
    profs = n(),
    sum = sum(value, na.rm = TRUE))%&gt;%
  pivot_wider(names_from = inferred_gender, values_from = c(profs,sum))%&gt;%
  group_by(general_field)%&gt;%
  mutate(m_prop = round(sum_m/sum(sum_m),3),
         w_prop = round(sum_w/sum(sum_w), 3),
         m_ave = round(sum_m/profs_m, 3),
         w_ave = round(sum_w/profs_w, 3))

twitter_overall &lt;- twitter_type_source %&gt;%
  pivot_longer(cols = c(`Twitter`))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(inferred_gender)%&gt;%
  summarise(
    profs = n_distinct(profile_id),
    sum = sum(value, na.rm = TRUE))%&gt;%
  pivot_wider(names_from = inferred_gender, values_from = c(profs,sum))%&gt;%
  mutate(m_prop = round(sum_m/sum(sum_m),3),
         w_prop = round(sum_w/sum(sum_w), 3),
         m_ave = round(sum_m/profs_m, 3),
         w_ave = round(sum_w/profs_w, 3))

twitter_overall$general_field &lt;- &quot;All fields&quot;
twitter_overall &lt;- twitter_overall[colnames(twitter_type)]

twitter_type &lt;- rbind(twitter_type,
                   twitter_overall)

# output to results
write_csv(twitter_type, &quot;Plots_april/Supplemental/T_twitter.csv&quot;)
knitr::kable(twitter_type)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="22%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="11%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">general_field</th>
<th align="right">profs_m</th>
<th align="right">profs_w</th>
<th align="right">sum_m</th>
<th align="right">sum_w</th>
<th align="right">m_prop</th>
<th align="right">w_prop</th>
<th align="right">m_ave</th>
<th align="right">w_ave</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Arts &amp; Humanities</td>
<td align="right">247</td>
<td align="right">110</td>
<td align="right">5144</td>
<td align="right">2039</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">20.826</td>
<td align="right">18.536</td>
</tr>
<tr class="even">
<td align="left">Medicine</td>
<td align="right">1283</td>
<td align="right">546</td>
<td align="right">1374963</td>
<td align="right">429011</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1071.678</td>
<td align="right">785.734</td>
</tr>
<tr class="odd">
<td align="left">STEM</td>
<td align="right">1841</td>
<td align="right">381</td>
<td align="right">945866</td>
<td align="right">182640</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">513.778</td>
<td align="right">479.370</td>
</tr>
<tr class="even">
<td align="left">Social sciences</td>
<td align="right">1619</td>
<td align="right">764</td>
<td align="right">249733</td>
<td align="right">128723</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">154.251</td>
<td align="right">168.486</td>
</tr>
<tr class="odd">
<td align="left">All fields</td>
<td align="right">4990</td>
<td align="right">1801</td>
<td align="right">2575706</td>
<td align="right">742413</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">516.174</td>
<td align="right">412.223</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="womens-representation-across-the-board" class="section level1"
number="2">
<h1><span class="header-section-number">2</span> Women’s representation
across the board</h1>
<p>First, get representation per field in our dataset: (?
professors)</p>
<pre class="r"><code>repr_field_2023 &lt;- prof_panel_filter %&gt;%
  group_by(profile_id)%&gt;%
  filter(year == max(year))%&gt;%
  filter(!is.na(general_field))%&gt;%
  group_by(general_field, inferred_gender)%&gt;%
  summarise(n = n())%&gt;%
  pivot_wider(values_from = n, names_from = inferred_gender)

repr_field_2023$share_women_field &lt;- repr_field_2023$w/(repr_field_2023$m+repr_field_2023$w)</code></pre>
<p>Now get the representation of women among the top 10% and 20% of
researchers in terms of total fame in their field in 2023 (based on
their entry batch):</p>
<pre class="r"><code># first, get the latest year in the panel for each prof
women_field_2023 &lt;- prof_panel_filter %&gt;%
  group_by(profile_id)%&gt;%
  filter(year == max(year))

# and now set the final year as 2023, assuming there was no attention after
# whatever the last year is in the dataset (quite some professors with
# 0 mentions even in this last year, so we want to keep them for correct
# shares)
women_field_2023$year &lt;- 2023

# get their decile based on their total performance within their entry batch
women_field_2023 &lt;- women_field_2023 %&gt;%
  filter(!is.na(general_field))%&gt;%
  select(profile_id, year, inferred_gender, general_field, entry_batch_2023, count_pubs_total,
         cited_by_total_all, alt_online_all_total, news_all_total, alt_twitter_total)%&gt;%
  replace(is.na(.), 0)%&gt;%
  group_by(general_field, entry_batch_2023)%&gt;%
  mutate(
         `Publications` = ntile(-count_pubs_total, 20),
         `Citations` = ntile(-cited_by_total_all, 20),    
         `Online news` = ntile(-alt_online_all_total, 20),
         `News` = ntile(-news_all_total, 20),
         `Twitter` = ntile(-alt_twitter_total, 20))</code></pre>
<div id="women-among-scientists-in-top-n" class="section level3"
number="2.0.1">
<h3><span class="header-section-number">2.0.1</span> % women among
scientists in top n%</h3>
<p>Get shares of women among top n% scientists per attention domain:</p>
<pre class="r"><code># rearrange the dataset to get counts of women and men in each decile
# then leave only top 10 and 20
share_women_field_2023 &lt;- women_field_2023 %&gt;%
  ungroup()%&gt;%
  select(profile_id, year, inferred_gender, general_field, `Publications`:`Twitter`)%&gt;%
  pivot_longer(`Publications`:`Twitter`)%&gt;%
  group_by(general_field, inferred_gender, name, value)%&gt;%
  summarise(n = n())%&gt;%
  pivot_wider(values_from = n, names_from = inferred_gender)%&gt;%
  group_by(general_field, name)%&gt;%
  mutate(m = cumsum(m),
         w = cumsum(w))%&gt;%
  filter(value %in% c(1, 2, 3, 4))
 
share_women_field_2023$share_women &lt;- share_women_field_2023$w/(share_women_field_2023$m+share_women_field_2023$w) </code></pre>
<p>Combine the field representation with the attention
representation:</p>
<pre class="r"><code>repr_field_2023$name &lt;- &quot;overall&quot;
repr_field_2023$value &lt;- 0

repr_field_2023 &lt;- repr_field_2023[c(colnames(share_women_field_2023)[1:5],&quot;share_women_field&quot;)]

share_women_field_2023 &lt;- merge(share_women_field_2023,
                                repr_field_2023[c(&quot;general_field&quot;, &quot;share_women_field&quot;)],
                                by = &quot;general_field&quot;)

share_women_field_2023$share_women_field &lt;- ifelse(share_women_field_2023$name == &quot;News&quot;,
                                                   share_women_field_2023$share_women_field,
                                                   NA)</code></pre>
<p>Plot this out:</p>
<p>Top 10%:</p>
<pre class="r"><code>repr_attn_5 &lt;- share_women_field_2023 %&gt;%
  filter(value == 1 &amp; name %in% c(&quot;News&quot;, &quot;Online news&quot;, &quot;Twitter&quot;))%&gt;%
  ggplot(aes(y=share_women, x=general_field)) + 
  geom_point(aes(shape=name, color=name), position=position_dodge(width=0.2), stat=&quot;identity&quot;, size = 2.5)+
  geom_bar(stat=&quot;identity&quot;, aes(y=share_women_field, x=general_field), alpha=0.2, width = 0.4)+
  guides(fill = guide_legend(reverse=TRUE, title = &quot;Measure&quot;))+
  scale_y_continuous(limits=c(0, 0.5))+
  coord_flip()+
  xlab(&quot;&quot;)+
  ylab(&quot;% Women&quot;)+
  labs(color = &quot;Attention type&quot;,
       shape = &quot;Attention type&quot;)+
  ggtitle(&quot;(a) top 5% of attention domains&quot;)+
  theme_minimal_vgrid()+
  theme(plot.title = element_text(size = 10),
        axis.text.y = element_text(size = 10),
        axis.title.y = element_text(size = 11),
        axis.text.x = element_text(size = 10) ,
        axis.title.x = element_text(size = 11),
        legend.title=element_text(size=11), 
        legend.text=element_text(size=10))

repr_attn_10 &lt;- share_women_field_2023 %&gt;%
  filter(value == 2 &amp; name %in% c(&quot;News&quot;, &quot;Online news&quot;, &quot;Twitter&quot;))%&gt;%
  ggplot(aes(y=share_women, x=general_field)) + 
  geom_point(aes(shape=name, color=name), position=position_dodge(width=0.2), stat=&quot;identity&quot;, size = 2.5)+
  geom_bar(stat=&quot;identity&quot;, aes(y=share_women_field, x=general_field), alpha=0.2, width = 0.4)+
  guides(fill = guide_legend(reverse=TRUE, title = &quot;Measure&quot;))+
  scale_y_continuous(limits=c(0, 0.5))+
  coord_flip()+
  xlab(&quot;&quot;)+
  ylab(&quot;% Women&quot;)+
  labs(color = &quot;Attention type&quot;,
       shape = &quot;Attention type&quot;)+
  ggtitle(&quot;(b) top 10% of attention domains&quot;)+
  theme_minimal_vgrid()+
  theme(plot.title = element_text(size = 10),
        axis.text.y = element_text(size = 10),
        axis.title.y = element_text(size = 11),
        axis.text.x = element_text(size = 10) ,
        axis.title.x = element_text(size = 11),
        legend.title=element_text(size=11), 
        legend.text=element_text(size=10))

repr_attn_15 &lt;- share_women_field_2023 %&gt;%
  filter(value == 3 &amp; name %in% c(&quot;News&quot;, &quot;Online news&quot;, &quot;Twitter&quot;))%&gt;%
  ggplot(aes(y=share_women, x=general_field)) + 
    geom_point(aes(shape=name, color=name), position=position_dodge(width=0.2), stat=&quot;identity&quot;, size = 2.5)+
  geom_bar(stat=&quot;identity&quot;, aes(y=share_women_field, x=general_field), alpha=0.2, width = 0.4)+
  guides(fill = guide_legend(reverse=TRUE, title = &quot;Measure&quot;))+
  scale_y_continuous(limits=c(0, 0.5))+
  coord_flip()+
  xlab(&quot;&quot;)+
  ylab(&quot;% Women&quot;)+
  labs(color = &quot;Attention type&quot;,
       shape = &quot;Attention type&quot;)+
  ggtitle(&quot;(c) top 15% of attention domains&quot;)+
  theme_minimal_vgrid()+
  theme(plot.title = element_text(size = 10),
        axis.text.y = element_text(size = 10),
        axis.title.y = element_text(size = 11),
        axis.text.x = element_text(size = 10) ,
        axis.title.x = element_text(size = 11),
        legend.title=element_text(size=11), 
        legend.text=element_text(size=10))

repr_attn_20 &lt;- share_women_field_2023 %&gt;%
  filter(value == 4 &amp; name %in% c(&quot;News&quot;, &quot;Online news&quot;, &quot;Twitter&quot;))%&gt;%
  ggplot(aes(y=share_women, x=general_field)) + 
    geom_point(aes(shape=name, color=name), position=position_dodge(width=0.2), stat=&quot;identity&quot;, size = 2.5)+
  geom_bar(stat=&quot;identity&quot;, aes(y=share_women_field, x=general_field), alpha=0.2, width = 0.4)+
  guides(fill = guide_legend(reverse=TRUE, title = &quot;Measure&quot;))+
  scale_y_continuous(limits=c(0, 0.5))+
  coord_flip()+
  xlab(&quot;&quot;)+
  ylab(&quot;% Women&quot;)+
  labs(color = &quot;Attention type&quot;,
       shape = &quot;Attention type&quot;)+
  ggtitle(&quot;(d) top 20% of attention domains&quot;)+
  theme_minimal_vgrid()+
  theme(plot.title = element_text(size = 10),
        axis.text.y = element_text(size = 10),
        axis.title.y = element_text(size = 11),
        axis.text.x = element_text(size = 10) ,
        axis.title.x = element_text(size = 11),
        legend.title=element_text(size=11), 
        legend.text=element_text(size=10))</code></pre>
<p>Plot these two next to each other:</p>
<pre class="r"><code>legend &lt;- get_legend(
  # create some space to the left of the legend
  repr_attn_10
)

combi_plot &lt;- cowplot::plot_grid(
                    repr_attn_10 + theme(legend.position=&quot;none&quot;) + ggtitle(&quot;(a) top 10% of attention domains&quot;),
                    repr_attn_20 + theme(legend.position=&quot;none&quot;,
                                        axis.title.y=element_blank(),
                                        axis.text.y=element_blank())+ggtitle(&quot;(b) top 20% of attention domains&quot;),
                    legend,
                    ncol = 3,
                    rel_widths = c(1, 0.8, 0.22))


ggsave2(
  filename = &quot;Plots_april/Plot_1.png&quot;,
  plot = combi_plot,
  width = 10,
  height = 4,
  units = c(&quot;in&quot;),
  dpi = 300,
  bg = &quot;white&quot;
)

combi_plot</code></pre>
<p><img src="April_analyses_files/figure-html/unnamed-chunk-21-1.png" width="960" /></p>
</div>
</div>
<div id="compare-means-and-distributions" class="section level1"
number="3">
<h1><span class="header-section-number">3</span> Compare means and
distributions</h1>
<div id="means-comparison" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Means comparison</h2>
<pre class="r"><code>sources_check &lt;- sources_check%&gt;%
  filter(!is.na(general_field))</code></pre>
<div id="overall" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Overall</h3>
<pre class="r"><code>overall_comparisons &lt;- data.frame(matrix(NA, ncol = 6, nrow = 1))
i &lt;- 1
overall_comparisons[i, 1] &lt;- &quot;overall&quot;
overall_comparisons[i, 2] &lt;- round(wilcox.test(count_pubs_total ~ inferred_gender, data=sources_check, paired=FALSE)$p.value, 5)
overall_comparisons[i, 3] &lt;- round(wilcox.test(cited_by_total_all ~ inferred_gender, data=sources_check, paired=FALSE)$p.value, 5)
overall_comparisons[i, 4] &lt;- round(wilcox.test(news_all_total ~ inferred_gender, data=sources_check, paired=FALSE)$p.value, 5)
overall_comparisons[i, 5] &lt;- round(wilcox.test(alt_online_all_total ~ inferred_gender, data=sources_check, paired=FALSE)$p.value, 5)
overall_comparisons[i, 6] &lt;- round(wilcox.test(alt_twitter_total ~ inferred_gender, data=sources_check, paired=FALSE)$p.value, 5)

colnames(overall_comparisons) &lt;-  c(&quot;field&quot;, &quot;pubs_total&quot;, &quot;citations_total&quot;,
                                 &quot;news_total&quot;, &quot;online_news_total&quot;, &quot;twitter_total&quot;)


overall_comparisons</code></pre>
<pre><code>##     field pubs_total citations_total news_total online_news_total twitter_total
## 1 overall          0               0          0           0.34731       0.94545</code></pre>
<pre class="r"><code>mean_values &lt;- sources_check %&gt;%
  group_by(inferred_gender)%&gt;%
  summarise(pubs_total = mean(count_pubs_total, na.rm = TRUE),
            citations_total = mean(cited_by_total_all, na.rm = TRUE),
            news_total = mean(news_all_total, na.rm = TRUE),
            online_news_total = mean(alt_online_all_total, na.rm = TRUE),
            twitter_total =  mean(alt_twitter_total, na.rm = TRUE))%&gt;%
  mutate(across(2:6, \(x) round(x, 1)))

mean_values</code></pre>
<pre><code>## # A tibble: 2 × 6
##   inferred_gender pubs_total citations_total news_total online_news_total
##   &lt;chr&gt;                &lt;dbl&gt;           &lt;dbl&gt;      &lt;dbl&gt;             &lt;dbl&gt;
## 1 m                     236.           8053.       76.4             106. 
## 2 w                     174.           5291.       48                93.3
## # ℹ 1 more variable: twitter_total &lt;dbl&gt;</code></pre>
<pre class="r"><code>overall_comparisons</code></pre>
<pre><code>##     field pubs_total citations_total news_total online_news_total twitter_total
## 1 overall          0               0          0           0.34731       0.94545</code></pre>
</div>
<div id="within-fields" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Within fields</h3>
<pre class="r"><code>fields &lt;- unique(prof_panel_filter$general_field)
fields &lt;- fields[!is.na(fields)]
field_comparisons &lt;- data.frame(matrix(NA, ncol = 7, nrow = length(fields)))

for (i in 1:length(fields)){
  field &lt;- fields[i]
  data &lt;- filter(sources_check, 
                 general_field == field)
  field_comparisons[i, 1] &lt;- field
  field_comparisons[i, 2] &lt;- nrow(data)
  field_comparisons[i, 3] &lt;- round(wilcox.test(count_pubs_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
  field_comparisons[i, 4] &lt;- round(wilcox.test(cited_by_total_all ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
  field_comparisons[i, 5] &lt;- round(wilcox.test(news_all_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
  field_comparisons[i, 6] &lt;- round(wilcox.test(alt_online_all_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
  field_comparisons[i, 7] &lt;- round(wilcox.test(alt_twitter_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
}

colnames(field_comparisons) &lt;- c(&quot;field&quot;, &quot;profs&quot;, &quot;pubs_total&quot;, &quot;citations_total&quot;,
                                 &quot;news_total&quot;, &quot;online_news_total&quot;, &quot;twitter_total&quot;)
field_comparisons</code></pre>
<pre><code>##               field profs pubs_total citations_total news_total
## 1              STEM  2222    0.00000         0.00071    0.00893
## 2   Social sciences  2383    0.00004         0.01423    0.00000
## 3 Arts &amp; Humanities   357    0.34198         0.46744    0.00043
## 4          Medicine  1829    0.00000         0.00000    0.00043
##   online_news_total twitter_total
## 1           0.04188       0.75680
## 2           0.00062       0.04203
## 3           0.51329       0.13016
## 4           0.41862       0.44272</code></pre>
</div>
<div id="within-year-groups" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Within year
groups</h3>
<pre class="r"><code>year_groups &lt;- unique(sources_check$entry_batch_2023)
year_groups &lt;- year_groups[! year_groups == &quot;up to NA&quot;]
years &lt;- c(&quot;up to 10&quot;,&quot;up to 20&quot;, &quot;up to 30&quot;, &quot;up to 40&quot;, &quot;up to 50&quot;)
year_groups &lt;- year_groups[order(match(year_groups,years))]
year_groups_comparisons &lt;- data.frame(matrix(NA, ncol = 7, nrow = length(year_groups)))

for (i in 1:length(year_groups)){
  year_group &lt;- year_groups[i]
  data &lt;- filter(sources_check, 
                 entry_batch_2023 == year_group)
  
  year_groups_comparisons[i, 1] &lt;- year_group
  year_groups_comparisons[i, 2] &lt;- nrow(data)
  year_groups_comparisons[i, 3] &lt;- round(wilcox.test(count_pubs_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
  year_groups_comparisons[i, 4] &lt;- round(wilcox.test(cited_by_total_all ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
  year_groups_comparisons[i, 5] &lt;- round(wilcox.test(news_all_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
  year_groups_comparisons[i, 6] &lt;- round(wilcox.test(alt_online_all_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
  year_groups_comparisons[i, 7] &lt;- round(wilcox.test(alt_twitter_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
}

colnames(year_groups_comparisons) &lt;- c(&quot;field&quot;, &quot;profs&quot;, &quot;pubs_total&quot;, &quot;citations_total&quot;,
                                 &quot;news_total&quot;, &quot;online_news_total&quot;, &quot;twitter_total&quot;)
year_groups_comparisons</code></pre>
<pre><code>##      field profs pubs_total citations_total news_total online_news_total
## 1 up to 10   145    0.77697         0.05929    0.04251           0.27632
## 2 up to 20   732    0.48849         0.78521    0.00016           0.07477
## 3 up to 30  2468    0.00045         0.00448    0.00175           0.06014
## 4 up to 40  2562    0.00000         0.00054    0.02102           0.03633
## 5 up to 50   884    0.00005         0.00025    0.01801           0.89252
##   twitter_total
## 1       0.10370
## 2       0.26542
## 3       0.83426
## 4       0.85218
## 5       0.76629</code></pre>
</div>
<div id="within-year-groups-and-fields" class="section level3"
number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Within year groups
and fields</h3>
<pre class="r"><code>year_groups_field_comparisons &lt;- data.frame(matrix(NA, ncol = 8, nrow = length(year_groups)*length(fields)))
row_index &lt;- 0

for (i in 1:length(year_groups)){
  year_group &lt;- year_groups[i]
  
  for (j in 1:length(fields)){
    field &lt;- fields[j]
    data &lt;- filter(sources_check, 
                   years_since_entry == year_group &amp; general_field == field)
    
    women &lt;- filter(data, inferred_gender == &quot;w&quot;)
    men &lt;- filter(data, inferred_gender == &quot;m&quot;)
    
    if (length(unique(data$inferred_gender)) != 2){
      year_groups_field_comparisons[row_index+j, 1] &lt;- year_group
      year_groups_field_comparisons[row_index+j, 2] &lt;- field
      year_groups_field_comparisons[row_index+j, 3] &lt;- nrow(data)
      year_groups_field_comparisons[row_index+j, 4] &lt;- NA
      year_groups_field_comparisons[row_index+j, 5] &lt;- NA
      year_groups_field_comparisons[row_index+j, 6] &lt;- NA
      year_groups_field_comparisons[row_index+j, 7] &lt;- NA
      year_groups_field_comparisons[row_index+j, 8] &lt;- NA
    }else{
      if (length(which(colSums(data[c(&quot;alt_online_all_total&quot;, &quot;news_all_total&quot;, &quot;alt_twitter_total&quot;, &quot;cited_by_total_all&quot;, &quot;count_pubs_total&quot;)]) == 0)) &gt; 0){
        year_groups_field_comparisons[row_index+j, 1] &lt;- year_group
        year_groups_field_comparisons[row_index+j, 2] &lt;- field
        year_groups_field_comparisons[row_index+j, 3] &lt;- nrow(data)
        year_groups_field_comparisons[row_index+j, 4] &lt;- NA
        year_groups_field_comparisons[row_index+j, 5] &lt;- NA
        year_groups_field_comparisons[row_index+j, 6] &lt;- NA
        year_groups_field_comparisons[row_index+j, 7] &lt;- NA
        year_groups_field_comparisons[row_index+j, 8] &lt;- NA
        
      }else{
        year_groups_field_comparisons[row_index+j, 1] &lt;- year_group
        year_groups_field_comparisons[row_index+j, 2] &lt;- field
        year_groups_field_comparisons[row_index+j, 3] &lt;- nrow(data)
        year_groups_field_comparisons[row_index+j, 4] &lt;- round(wilcox.test(count_pubs_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
        year_groups_field_comparisons[row_index+j, 5] &lt;- round(wilcox.test(cited_by_total_all ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
        year_groups_field_comparisons[row_index+j, 6] &lt;- round(wilcox.test(news_all_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
        year_groups_field_comparisons[row_index+j, 7] &lt;- round(wilcox.test(alt_online_all_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
        year_groups_field_comparisons[row_index+j, 8] &lt;- round(wilcox.test(alt_twitter_total ~ inferred_gender, data=data, paired=FALSE)$p.value, 5)
      }
    }
  }
  row_index &lt;- row_index + 4 
}

colnames(year_groups_field_comparisons) &lt;- c(&quot;year_group&quot;, &quot;field&quot;, &quot;profs&quot;, &quot;pubs_total&quot;, &quot;citations_total&quot;,
                                       &quot;news_total&quot;, &quot;online_news_total&quot;, &quot;twitter_total&quot;)
year_groups_field_comparisons</code></pre>
<pre><code>##    year_group             field profs pubs_total citations_total news_total
## 1    up to 10              STEM    25    0.73330         0.13619    0.27593
## 2    up to 10   Social sciences    66    0.24295         0.23449    0.32738
## 3    up to 10 Arts &amp; Humanities     9         NA              NA         NA
## 4    up to 10          Medicine    22    0.27291         0.36384    0.47259
## 5    up to 20              STEM   183    0.21072         0.41490    0.03390
## 6    up to 20   Social sciences   377    0.04011         0.05600    0.07604
## 7    up to 20 Arts &amp; Humanities    42    0.21754         0.36767    0.12975
## 8    up to 20          Medicine   139    0.70945         0.61923    0.07936
## 9    up to 30              STEM   737    0.26427         0.64058    0.66438
## 10   up to 30   Social sciences   966    0.01623         0.23675    0.00002
## 11   up to 30 Arts &amp; Humanities   129    0.35395         0.28219    0.03137
## 12   up to 30          Medicine   624    0.11598         0.24038    0.04116
## 13   up to 40              STEM   905    0.00279         0.33482    0.19978
## 14   up to 40   Social sciences   714    0.00439         0.33009    0.00582
## 15   up to 40 Arts &amp; Humanities   128    0.23608         0.23745    0.74370
## 16   up to 40          Medicine   785    0.00831         0.01105    0.22125
## 17   up to 50              STEM   365    0.09556         0.28503    0.62345
## 18   up to 50   Social sciences   223    0.00314         0.06313    0.07840
## 19   up to 50 Arts &amp; Humanities    39    0.37050         0.52302    0.05717
## 20   up to 50          Medicine   253    0.07876         0.00736    0.06648
##    online_news_total twitter_total
## 1            0.47612       0.24632
## 2            0.09839       0.04335
## 3                 NA            NA
## 4            0.51007       0.07464
## 5            0.58403       0.95035
## 6            0.00336       0.34066
## 7            0.69662       0.84367
## 8            0.42870       0.08250
## 9            0.03335       0.83527
## 10           0.04748       0.01514
## 11           0.59321       0.82285
## 12           0.99633       0.81802
## 13           0.05352       0.87330
## 14           0.02533       0.38471
## 15           0.05070       0.02988
## 16           0.89212       0.54297
## 17           0.56985       0.82660
## 18           0.83172       0.18455
## 19           0.59065       0.54037
## 20           0.56184       0.90146</code></pre>
</div>
<div id="writing-this-out" class="section level3" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> Writing this
out</h3>
<pre class="r"><code>write_csv(overall_comparisons, &quot;Plots_april/Supplemental/mean_overall.csv&quot;)
write_csv(field_comparisons, &quot;Plots_april/Supplemental/mean_year.csv&quot;)
write_csv(field_comparisons, &quot;Plots_april/Supplemental/mean_field.csv&quot;)
write_csv(year_groups_field_comparisons, &quot;Plots_april/Supplemental/mean_year_field.csv&quot;)</code></pre>
</div>
</div>
<div id="distributions-comparison" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Distributions
comparison</h2>
<div id="overall-1" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Overall</h3>
<pre class="r"><code>overall_dist_comparisons &lt;- data.frame(matrix(NA, ncol = 7, nrow = 1))
i &lt;- 1
women &lt;- filter(sources_check, inferred_gender == &quot;w&quot;)
men &lt;- filter(sources_check, inferred_gender == &quot;m&quot;)

overall_dist_comparisons[i, 1] &lt;- &quot;overall&quot;
overall_dist_comparisons[i, 2] &lt;- nrow(prof_panel_filter)
overall_dist_comparisons[i, 3] &lt;- round(ks.test(women$count_pubs_total, men$count_pubs_total)$p.value, 5)
overall_dist_comparisons[i, 4] &lt;- round(ks.test(women$cited_by_total_all, men$cited_by_total_all)$p.value, 5)
overall_dist_comparisons[i, 5] &lt;- round(ks.test(women$news_all_total, men$news_all_total)$p.value, 5)
overall_dist_comparisons[i, 6] &lt;- round(ks.test(women$alt_online_all_total, men$alt_online_all_total)$p.value, 5)
overall_dist_comparisons[i, 7] &lt;- round(ks.test(women$alt_twitter_total, men$alt_twitter_total)$p.value, 5)

colnames(overall_dist_comparisons) &lt;- c(&quot;overall&quot;, &quot;profs&quot;, &quot;pubs_total&quot;, &quot;citations_total&quot;,
                                 &quot;news_total&quot;, &quot;online_news_total&quot;, &quot;twitter_total&quot;)


overall_dist_comparisons</code></pre>
<pre><code>##   overall  profs pubs_total citations_total news_total online_news_total
## 1 overall 179901          0               0          0           0.17354
##   twitter_total
## 1       0.62668</code></pre>
</div>
<div id="within-fields-1" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Within fields</h3>
<pre class="r"><code>fields &lt;- unique(sources_check$general_field)
fields &lt;- fields[!is.na(fields)]
field_dist_comparisons &lt;- data.frame(matrix(NA, ncol = 7, nrow = length(fields)))

for (i in 1:length(fields)){
  field &lt;- fields[i]
  data &lt;- filter(sources_check, 
                 general_field == field)
  women &lt;- filter(data, inferred_gender == &quot;w&quot;)
  men &lt;- filter(data, inferred_gender == &quot;m&quot;)
  
  field_dist_comparisons[i, 1] &lt;- field
  field_dist_comparisons[i, 2] &lt;- nrow(data)
  field_dist_comparisons[i, 3] &lt;- round(ks.test(women$count_pubs_total, men$count_pubs_total)$p.value, 5)
  field_dist_comparisons[i, 4] &lt;- round(ks.test(women$cited_by_total_all, men$cited_by_total_all)$p.value, 5)
  field_dist_comparisons[i, 5] &lt;- round(ks.test(women$news_all_total, men$news_all_total)$p.value, 5)
  field_dist_comparisons[i, 6] &lt;- round(ks.test(women$alt_online_all_total, men$alt_online_all_total)$p.value, 5)
  field_dist_comparisons[i, 7] &lt;- round(ks.test(women$alt_twitter_total, men$alt_twitter_total)$p.value, 5)
}

colnames(field_dist_comparisons) &lt;- c(&quot;field&quot;,&quot;profs&quot;, &quot;pubs_total&quot;, &quot;citations_total&quot;,
                                 &quot;news_total&quot;, &quot;online_news_total&quot;, &quot;twitter_total&quot;)
field_dist_comparisons</code></pre>
<pre><code>##               field profs pubs_total citations_total news_total
## 1              STEM  2222    0.00000         0.00009    0.01124
## 2   Social sciences  2383    0.00000         0.00382    0.00000
## 3 Arts &amp; Humanities   357    0.55386         0.48123    0.00026
## 4          Medicine  1829    0.00000         0.00000    0.00550
##   online_news_total twitter_total
## 1           0.01114       0.49536
## 2           0.00387       0.10430
## 3           0.91437       0.50232
## 4           0.36810       0.13839</code></pre>
</div>
<div id="within-year-groups-1" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Within year
groups</h3>
<pre class="r"><code>year_groups &lt;- unique(prof_panel_filter$entry_batch_2023)
year_groups &lt;- year_groups[! year_groups == &quot;up to NA&quot;]
years &lt;- c(&quot;up to 10&quot;,&quot;up to 20&quot;, &quot;up to 30&quot;, &quot;up to 40&quot;, &quot;up to 50&quot;)
year_groups &lt;- year_groups[order(match(year_groups,years))]
year_groups_dist_comparisons &lt;- data.frame(matrix(NA, ncol = 7, nrow = length(year_groups)))

for (i in 1:length(year_groups)){
  year_group &lt;- year_groups[i]
  data &lt;- filter(sources_check, 
                 years_since_entry == year_group)
  
  women &lt;- filter(data, inferred_gender == &quot;w&quot;)
  men &lt;- filter(data, inferred_gender == &quot;m&quot;)
  
  year_groups_dist_comparisons[i, 1] &lt;- year_group
  year_groups_dist_comparisons[i, 2] &lt;- nrow(data)
  year_groups_dist_comparisons[i, 3] &lt;- round(ks.test(women$count_pubs_total, men$count_pubs_total)$p.value, 5)
  year_groups_dist_comparisons[i, 4] &lt;- round(ks.test(women$cited_by_total_all, men$cited_by_total_all)$p.value, 5)
  year_groups_dist_comparisons[i, 5] &lt;- round(ks.test(women$news_all_total, men$news_all_total)$p.value, 5)
  year_groups_dist_comparisons[i, 6] &lt;- round(ks.test(women$alt_online_all_total, men$alt_online_all_total)$p.value, 5)
  year_groups_dist_comparisons[i, 7] &lt;- round(ks.test(women$alt_twitter_total, men$alt_twitter_total)$p.value, 5)
}

colnames(year_groups_dist_comparisons) &lt;- c(&quot;field&quot;, &quot;profs&quot;, &quot;pubs_total&quot;, &quot;citations_total&quot;,
                                 &quot;news_total&quot;, &quot;online_news_total&quot;, &quot;twitter_total&quot;)
year_groups_dist_comparisons</code></pre>
<pre><code>##      field profs pubs_total citations_total news_total online_news_total
## 1 up to 10   122    0.19877         0.03666    0.07637           0.16172
## 2 up to 20   741    0.01379         0.43374    0.00220           0.05605
## 3 up to 30  2456    0.00014         0.01827    0.00230           0.00551
## 4 up to 40  2532    0.00000         0.00548    0.02340           0.05319
## 5 up to 50   880    0.00034         0.00108    0.02414           0.45366
##   twitter_total
## 1       0.03495
## 2       0.37934
## 3       0.77354
## 4       0.88254
## 5       0.99641</code></pre>
</div>
<div id="within-year-groups-and-fields-1" class="section level3"
number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Within year groups
and fields</h3>
<pre class="r"><code>year_groups_field_dist_comparisons &lt;- data.frame(matrix(NA, ncol = 8, nrow = length(year_groups)*length(fields)))
row_index &lt;- 0

for (i in 1:length(year_groups)){
  year_group &lt;- year_groups[i]
  
  for (j in 1:length(fields)){
    field &lt;- fields[j]
    data &lt;- filter(sources_check, 
                   years_since_entry == year_group &amp; general_field == field)
    
    women &lt;- filter(data, inferred_gender == &quot;w&quot;)
    men &lt;- filter(data, inferred_gender == &quot;m&quot;)
    
    if (length(unique(data$inferred_gender)) != 2){
      year_groups_field_dist_comparisons[row_index+j, 1] &lt;- year_group
      year_groups_field_dist_comparisons[row_index+j, 2] &lt;- field
      year_groups_field_dist_comparisons[row_index+j, 3] &lt;- nrow(data)
      year_groups_field_dist_comparisons[row_index+j, 4] &lt;- NA
      year_groups_field_dist_comparisons[row_index+j, 5] &lt;- NA
      year_groups_field_dist_comparisons[row_index+j, 6] &lt;- NA
      year_groups_field_dist_comparisons[row_index+j, 7] &lt;- NA
      year_groups_field_dist_comparisons[row_index+j, 8] &lt;- NA
    }else{
      if (length(which(colSums(data[c(&quot;alt_online_all_total&quot;, &quot;news_all_total&quot;, &quot;alt_twitter_total&quot;, &quot;cited_by_total_all&quot;, &quot;count_pubs_total&quot;)]) == 0)) &gt; 0){
        year_groups_field_dist_comparisons[row_index+j, 1] &lt;- year_group
        year_groups_field_dist_comparisons[row_index+j, 2] &lt;- field
        year_groups_field_dist_comparisons[row_index+j, 3] &lt;- nrow(data)
        year_groups_field_dist_comparisons[row_index+j, 4] &lt;- NA
        year_groups_field_dist_comparisons[row_index+j, 5] &lt;- NA
        year_groups_field_dist_comparisons[row_index+j, 6] &lt;- NA
        year_groups_field_dist_comparisons[row_index+j, 7] &lt;- NA
        year_groups_field_dist_comparisons[row_index+j, 8] &lt;- NA
        
      }else{
        year_groups_field_dist_comparisons[row_index+j, 1] &lt;- year_group
        year_groups_field_dist_comparisons[row_index+j, 2] &lt;- field
        year_groups_field_dist_comparisons[row_index+j, 3] &lt;- nrow(data)
        year_groups_field_dist_comparisons[row_index+j, 4] &lt;- round(ks.test(women$count_pubs_total, men$count_pubs_total)$p.value, 5)
        year_groups_field_dist_comparisons[row_index+j, 5] &lt;- round(ks.test(women$cited_by_total_all, men$cited_by_total_all)$p.value, 5)
        year_groups_field_dist_comparisons[row_index+j, 6] &lt;- round(ks.test(women$news_all_total, men$news_all_total)$p.value, 5)
        year_groups_field_dist_comparisons[row_index+j, 7] &lt;- round(ks.test(women$alt_online_all_total, men$alt_online_all_total)$p.value, 5)
        year_groups_field_dist_comparisons[row_index+j, 8] &lt;- round(ks.test(women$alt_twitter_total, men$alt_twitter_total)$p.value, 5)
      }
    }
  }
  row_index &lt;- row_index + 4 
}

colnames(year_groups_field_dist_comparisons) &lt;- c(&quot;year_group&quot;, &quot;field&quot;, &quot;profs&quot;, &quot;pubs_total&quot;, &quot;citations_total&quot;,
                                       &quot;news_total&quot;, &quot;online_news_total&quot;, &quot;twitter_total&quot;)
year_groups_field_dist_comparisons</code></pre>
<pre><code>##    year_group             field profs pubs_total citations_total news_total
## 1    up to 10              STEM    25    0.62178         0.30595    0.21174
## 2    up to 10   Social sciences    66    0.56335         0.25692    0.07243
## 3    up to 10 Arts &amp; Humanities     9         NA              NA         NA
## 4    up to 10          Medicine    22    0.40018         0.43341    0.56283
## 5    up to 20              STEM   183    0.09821         0.45252    0.05931
## 6    up to 20   Social sciences   377    0.01728         0.17914    0.01863
## 7    up to 20 Arts &amp; Humanities    42    0.16791         0.56511    0.21161
## 8    up to 20          Medicine   139    0.17253         0.48382    0.18450
## 9    up to 30              STEM   737    0.18794         0.21860    0.49915
## 10   up to 30   Social sciences   966    0.00060         0.15453    0.00005
## 11   up to 30 Arts &amp; Humanities   129    0.56070         0.41596    0.02607
## 12   up to 30          Medicine   624    0.04555         0.27316    0.05280
## 13   up to 40              STEM   905    0.00116         0.17797    0.18893
## 14   up to 40   Social sciences   714    0.00275         0.43387    0.00223
## 15   up to 40 Arts &amp; Humanities   128    0.21443         0.30317    0.83166
## 16   up to 40          Medicine   785    0.01654         0.01711    0.34142
## 17   up to 50              STEM   365    0.19711         0.23664    0.47011
## 18   up to 50   Social sciences   223    0.00337         0.06194    0.21092
## 19   up to 50 Arts &amp; Humanities    39    0.25416         0.82682    0.06080
## 20   up to 50          Medicine   253    0.34701         0.00767    0.14231
##    online_news_total twitter_total
## 1            0.86298       0.14032
## 2            0.08284       0.04714
## 3                 NA            NA
## 4            0.83488       0.07959
## 5            0.68205       0.57182
## 6            0.01801       0.81507
## 7            0.91666       0.99067
## 8            0.73230       0.04296
## 9            0.02468       0.84012
## 10           0.15317       0.02631
## 11           0.64276       0.75037
## 12           0.23002       0.25120
## 13           0.12059       0.90913
## 14           0.07102       0.80971
## 15           0.07623       0.01979
## 16           0.77646       0.63480
## 17           0.19292       0.50863
## 18           0.95759       0.28886
## 19           0.67127       0.88368
## 20           0.79287       0.99968</code></pre>
</div>
<div id="writing-this-out-1" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Writing this
out</h3>
<pre class="r"><code>write_csv(overall_dist_comparisons, &quot;Plots_april/Supplemental/dist_overall.csv&quot;)
write_csv(field_dist_comparisons, &quot;Plots_april/Supplemental/dist_year.csv&quot;)
write_csv(field_dist_comparisons, &quot;Plots_april/Supplemental/dist_field.csv&quot;)
write_csv(year_groups_field_dist_comparisons, &quot;Plots_april/Supplemental/dist_year_field.csv&quot;)</code></pre>
</div>
</div>
</div>
<div id="regression-models" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Regression models</h1>
<p>Binary variables for any attention:</p>
<pre class="r"><code>prof_panel_filter$any_news &lt;- as.factor(ifelse(prof_panel_filter$news_all &gt; 0, 1, 0))
prof_panel_filter$any_news_l &lt;- as.factor(ifelse(prof_panel_filter$news_all_l &gt; 0, 1, 0))

prof_panel_filter$any_online_news &lt;- as.factor(ifelse(prof_panel_filter$alt_online_all &gt; 0, 1, 0))
prof_panel_filter$any_online_news_l &lt;- as.factor(ifelse(prof_panel_filter$alt_online_all_l &gt; 0, 1, 0))

prof_panel_filter$any_online_news_gen &lt;- as.factor(ifelse(prof_panel_filter$alt_online_general_all &gt; 0, 1, 0))
prof_panel_filter$any_online_news_gen_l &lt;- as.factor(ifelse(prof_panel_filter$alt_online_general_all_l &gt; 0, 1, 0))

prof_panel_filter$any_online_news_name &lt;- as.factor(ifelse(prof_panel_filter$alt_online_name_all &gt; 0, 1, 0))
prof_panel_filter$any_online_news_name_l &lt;- as.factor(ifelse(prof_panel_filter$alt_online_name_all_l &gt; 0, 1, 0))

prof_panel_filter$any_twitter &lt;- as.factor(ifelse(prof_panel_filter$alt_twitter &gt; 0, 1, 0))
prof_panel_filter$any_twitter_l &lt;- as.factor(ifelse(prof_panel_filter$alt_twitter_l &gt; 0, 1, 0))</code></pre>
<p>Binary variables for belonging to the top 10/20% in the attention for
each source.</p>
<pre class="r"><code>panel_filter_long &lt;- prof_panel_filter %&gt;%
  pivot_longer(c(alt_online_all, alt_online_name_all, news_all, alt_twitter), names_to = &quot;measure&quot;, values_to = &quot;value&quot;)

top_10_attn &lt;- panel_filter_long %&gt;%
  filter(!is.na(general_field) &amp; !is.na(year) &amp; year &gt; 2011)%&gt;%
  group_by(general_field, year, measure)%&gt;%
  filter(quantile(value, 0.90, na.rm = TRUE)&lt;value)%&gt;%
  select(profile_id, general_field, year, measure, value)

top_10_attn$measure &lt;- paste0(top_10_attn$measure, &quot;_top_10&quot;)


top_10_attn &lt;- top_10_attn %&gt;%
  pivot_wider(names_from = &quot;measure&quot;)%&gt;%
  mutate(across(contains(&#39;top_10&#39;),  ~ifelse(is.na(.), 0, 1)))

prof_panel_filter &lt;- merge(prof_panel_filter,
                           top_10_attn[c(&quot;year&quot;, &quot;profile_id&quot;, &quot;general_field&quot;, &quot;alt_online_all_top_10&quot;, &quot;alt_online_name_all_top_10&quot;, &quot;alt_twitter_top_10&quot;, &quot;news_all_top_10&quot;)],
                           by = c(&quot;profile_id&quot;, &quot;year&quot;, &quot;general_field&quot;),
                           all.x = TRUE,
                           all.y = FALSE)

top_20_attn &lt;- panel_filter_long %&gt;%
  filter(!is.na(general_field) &amp; !is.na(year) &amp; year &gt; 2011)%&gt;%
  group_by(general_field, year, measure)%&gt;%
  filter(quantile(value, 0.80, na.rm = TRUE)&lt;value)%&gt;%
  select(profile_id, general_field, year, measure, value)

top_20_attn$measure &lt;- paste0(top_20_attn$measure, &quot;_top_20&quot;)


top_20_attn &lt;- top_20_attn %&gt;%
  pivot_wider(names_from = &quot;measure&quot;)%&gt;%
  mutate(across(contains(&#39;top_20&#39;),  ~ifelse(is.na(.), 0, 1)))

prof_panel_filter &lt;- merge(prof_panel_filter,
                           top_20_attn[c(&quot;year&quot;, &quot;profile_id&quot;, &quot;general_field&quot;, &quot;alt_online_all_top_20&quot;, &quot;alt_online_name_all_top_20&quot;, &quot;alt_twitter_top_20&quot;, &quot;news_all_top_20&quot;)],
                           by = c(&quot;profile_id&quot;, &quot;year&quot;, &quot;general_field&quot;),
                           all.x = TRUE,
                           all.y = FALSE)

prof_panel_filter &lt;- filter(prof_panel_filter, !is.na(general_field))</code></pre>
<p>Split datasets per field:</p>
<pre class="r"><code>stem &lt;- filter(prof_panel_filter, general_field == &quot;STEM&quot;)
soc_sci &lt;- filter(prof_panel_filter, general_field == &quot;Social sciences&quot;)
arts &lt;- filter(prof_panel_filter, general_field == &quot;Arts &amp; Humanities&quot;)
medicine &lt;- filter(prof_panel_filter, general_field == &quot;Medicine&quot;)</code></pre>
<div id="count-models" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Count models</h2>
<div id="news" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> News</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_predictions_news &lt;- data.frame(matrix(ncol = 7, nrow = 0))
all_models_news &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_comparisons_news &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- lm(news_all ~ # professor publication variables
                     news_all_l + 
                     cited_by_total_all_l + 
                     # gender
                     inferred_gender +
                     # attention variables
                     alt_online_all_total_l + alt_twitter_total_l +
                     # coauthor publication variables
                     coa_tot_cited_by_total_l +
                     # coauthor publication variables
                     coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset) 
  
  model_result &lt;- coeftest(news_model, vcov = vcovCL, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(summary(news_model)$r.squared,3)
  model_result$field &lt;- field
  
  all_models_news &lt;- rbind(all_models_news,
                      model_result)
  
  prediction &lt;- predict_response(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;, 
                                 vcov_type = &quot;HC0&quot;,
                                 vcov.args = list(cluster = field_dataset$profile_id))
  prediction$field &lt;- field
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_comparisons_news &lt;- rbind(all_comparisons_news,
                           gender_comparison)
  
  all_predictions_news &lt;- rbind(all_predictions_news,
                           prediction)
  
  
}

all_models_news$stars &lt;- ifelse(all_models_news$`Pr(&gt;|t|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_models_news$`Pr(&gt;|t|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_models_news$`Pr(&gt;|t|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_models_news$`Pr(&gt;|t|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_comparisons_news$stars &lt;- ifelse(all_comparisons_news$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_comparisons_news$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_comparisons_news$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_comparisons_news$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_comparisons_news$group1 &lt;- str_split_i(all_comparisons_news$inferred_gender, &quot;-&quot;, 1)
all_comparisons_news$group2 &lt;- str_split_i(all_comparisons_news$inferred_gender, &quot;-&quot;, 2)

all_comparisons_news$p_rounded &lt;- round(all_comparisons_news$p.value, 4)</code></pre>
<p>Plot gender differences:</p>
<pre class="r"><code>news_gender_plot &lt;- all_predictions_news %&gt;%
   ggplot(aes(x = fct_rev(field),
              y = predicted,
              ymin = conf.low,
              ymax = conf.high,
              color = x)) +
   geom_pointrange(position = position_dodge(width = 0.5),
                   size = 0.5)+
   ggtitle(&quot;(a) Predicted values of news attention&quot;)+
     stat_pvalue_manual(
    all_comparisons_news,
    y.position = c(4.6, 4.6, 4, 4),
    label.size = 3,
    label = &quot;{stars}&quot;,
    remove.bracket = FALSE,
    bracket.nudge.y = -2,
    x = &quot;field&quot;
    )+
    xlab(&quot;Field&quot;)+
   scale_x_discrete(labels=c(&quot;arts&quot; = &quot;Arts &amp; Humanities&quot;,
                             &quot;medicine&quot; = &quot;Medicine&quot;,
                             &quot;soc_sci&quot; = &quot;Social science&quot;,
                             &quot;stem&quot; = &quot;STEM&quot;))+
   ylab(&quot;News attention per year&quot;)+
   labs(color = &quot;Inferred gender&quot;)+
   scale_color_manual(values = c(&quot;#34d399&quot;, &quot;#fbbf24&quot;), labels = c(&quot;Man&quot;, &quot;Woman&quot;))+
   theme_minimal_hgrid()+
   theme(plot.title = element_text(size = 8),
         axis.text.y = element_text(size = 8),
         axis.title.y = element_text(size = 10),
         axis.text.x = element_text(size = 8) ,
         axis.title.x = element_text(size = 10),
         legend.title=element_text(size=8), 
         legend.text=element_text(size=7))</code></pre>
<pre class="r"><code>knitr::kable(all_models_news)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="27%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.7101490</td>
<td align="right">0.1404335</td>
<td align="right">5.0568347</td>
<td align="right">0.0000004</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.8143268</td>
<td align="right">0.0380645</td>
<td align="right">21.3933571</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000165</td>
<td align="right">0.0000214</td>
<td align="right">0.7746943</td>
<td align="right">0.4385285</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.1156640</td>
<td align="right">0.1470442</td>
<td align="right">-0.7865936</td>
<td align="right">0.4315282</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0013851</td>
<td align="right">0.0012526</td>
<td align="right">1.1058124</td>
<td align="right">0.2688196</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000484</td>
<td align="right">0.0000967</td>
<td align="right">0.5002240</td>
<td align="right">0.6169223</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000060</td>
<td align="right">0.0000026</td>
<td align="right">2.3364844</td>
<td align="right">0.0194748</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0001160</td>
<td align="right">0.0003827</td>
<td align="right">0.3029716</td>
<td align="right">0.7619143</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000800</td>
<td align="right">0.0000711</td>
<td align="right">-1.1254464</td>
<td align="right">0.2604120</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.2775076</td>
<td align="right">0.2439446</td>
<td align="right">-1.1375843</td>
<td align="right">0.2553063</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.0582798</td>
<td align="right">0.1563748</td>
<td align="right">-0.3726930</td>
<td align="right">0.7093805</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.0360080</td>
<td align="right">0.2096739</td>
<td align="right">-0.1717331</td>
<td align="right">0.8636489</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.1767196</td>
<td align="right">0.1988315</td>
<td align="right">-0.8887908</td>
<td align="right">0.3741251</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.1770351</td>
<td align="right">0.1865955</td>
<td align="right">-0.9487640</td>
<td align="right">0.3427509</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.0398170</td>
<td align="right">0.2171461</td>
<td align="right">-0.1833648</td>
<td align="right">0.8545134</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.4666169</td>
<td align="right">0.2392473</td>
<td align="right">-1.9503535</td>
<td align="right">0.0511465</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.2980807</td>
<td align="right">0.2318538</td>
<td align="right">-1.2856406</td>
<td align="right">0.1985818</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.4618776</td>
<td align="right">0.2511143</td>
<td align="right">1.8393121</td>
<td align="right">0.0658826</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.1868137</td>
<td align="right">0.4010168</td>
<td align="right">0.4658501</td>
<td align="right">0.6413274</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.5320000</td>
<td align="right">0.5320000</td>
<td align="right">0.5320000</td>
<td align="right">0.5320000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">1.4095088</td>
<td align="right">0.4401512</td>
<td align="right">3.2023283</td>
<td align="right">0.0013656</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.7885180</td>
<td align="right">0.0853654</td>
<td align="right">9.2369728</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000321</td>
<td align="right">0.0000275</td>
<td align="right">-1.1676719</td>
<td align="right">0.2429546</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.6539911</td>
<td align="right">0.2408536</td>
<td align="right">-2.7153051</td>
<td align="right">0.0066278</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0011618</td>
<td align="right">0.0023170</td>
<td align="right">0.5014180</td>
<td align="right">0.6160831</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0003770</td>
<td align="right">0.0002806</td>
<td align="right">-1.3432713</td>
<td align="right">0.1792011</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000009</td>
<td align="right">0.0000031</td>
<td align="right">-0.2855410</td>
<td align="right">0.7752329</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0021191</td>
<td align="right">0.0016174</td>
<td align="right">-1.3102054</td>
<td align="right">0.1901431</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0005287</td>
<td align="right">0.0003484</td>
<td align="right">1.5175691</td>
<td align="right">0.1291406</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.3507272</td>
<td align="right">0.2901644</td>
<td align="right">-1.2087189</td>
<td align="right">0.2267867</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.1651986</td>
<td align="right">0.2193686</td>
<td align="right">-0.7530641</td>
<td align="right">0.4514213</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.1471802</td>
<td align="right">0.2317609</td>
<td align="right">0.6350519</td>
<td align="right">0.5254026</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.1669828</td>
<td align="right">0.2268016</td>
<td align="right">0.7362506</td>
<td align="right">0.4615878</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.2542421</td>
<td align="right">0.4599469</td>
<td align="right">0.5527640</td>
<td align="right">0.5804319</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.3236336</td>
<td align="right">0.3351621</td>
<td align="right">0.9656032</td>
<td align="right">0.3342557</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">1.1409643</td>
<td align="right">0.3279329</td>
<td align="right">3.4792613</td>
<td align="right">0.0005040</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">1.0095176</td>
<td align="right">0.3486779</td>
<td align="right">2.8952728</td>
<td align="right">0.0037928</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.3682703</td>
<td align="right">0.3555962</td>
<td align="right">1.0356420</td>
<td align="right">0.3003831</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">2.9905302</td>
<td align="right">0.9971425</td>
<td align="right">2.9991001</td>
<td align="right">0.0027115</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.3950000</td>
<td align="right">0.3950000</td>
<td align="right">0.3950000</td>
<td align="right">0.3950000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">1.2431745</td>
<td align="right">0.4076584</td>
<td align="right">3.0495499</td>
<td align="right">0.0022951</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.6060800</td>
<td align="right">0.0392417</td>
<td align="right">15.4447958</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000435</td>
<td align="right">0.0000219</td>
<td align="right">1.9878262</td>
<td align="right">0.0468456</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.4434394</td>
<td align="right">0.1559761</td>
<td align="right">-2.8429960</td>
<td align="right">0.0044740</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0000749</td>
<td align="right">0.0011663</td>
<td align="right">-0.0641928</td>
<td align="right">0.9488174</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000284</td>
<td align="right">0.0000758</td>
<td align="right">0.3738947</td>
<td align="right">0.7084869</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000019</td>
<td align="right">0.0000011</td>
<td align="right">1.7470005</td>
<td align="right">0.0806538</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0002925</td>
<td align="right">0.0003533</td>
<td align="right">0.8278560</td>
<td align="right">0.4077627</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000464</td>
<td align="right">0.0000368</td>
<td align="right">-1.2629351</td>
<td align="right">0.2066283</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.7940820</td>
<td align="right">0.5093075</td>
<td align="right">-1.5591406</td>
<td align="right">0.1189801</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.3414935</td>
<td align="right">0.3325989</td>
<td align="right">-1.0267428</td>
<td align="right">0.3045549</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.1982358</td>
<td align="right">0.3646732</td>
<td align="right">-0.5435985</td>
<td align="right">0.5867243</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.2887827</td>
<td align="right">0.3465735</td>
<td align="right">-0.8332511</td>
<td align="right">0.4047138</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.4517362</td>
<td align="right">0.3062704</td>
<td align="right">-1.4749590</td>
<td align="right">0.1402405</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.0955205</td>
<td align="right">0.3530094</td>
<td align="right">0.2705890</td>
<td align="right">0.7867102</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">2.3582370</td>
<td align="right">0.5825997</td>
<td align="right">4.0477830</td>
<td align="right">0.0000519</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.5304437</td>
<td align="right">0.4479302</td>
<td align="right">1.1842108</td>
<td align="right">0.2363448</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-0.4347266</td>
<td align="right">0.4244233</td>
<td align="right">-1.0242758</td>
<td align="right">0.3057184</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.9514020</td>
<td align="right">0.5603817</td>
<td align="right">1.6977751</td>
<td align="right">0.0895670</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.3380000</td>
<td align="right">0.3380000</td>
<td align="right">0.3380000</td>
<td align="right">0.3380000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">1.4478772</td>
<td align="right">0.5447232</td>
<td align="right">2.6580056</td>
<td align="right">0.0079359</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.7002464</td>
<td align="right">0.0506317</td>
<td align="right">13.8302007</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0002065</td>
<td align="right">0.0002622</td>
<td align="right">-0.7875125</td>
<td align="right">0.4310943</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.6880374</td>
<td align="right">0.2385835</td>
<td align="right">-2.8838435</td>
<td align="right">0.0039792</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0093008</td>
<td align="right">0.0092324</td>
<td align="right">-1.0074024</td>
<td align="right">0.3138882</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0032358</td>
<td align="right">0.0023758</td>
<td align="right">-1.3619906</td>
<td align="right">0.1733856</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000256</td>
<td align="right">0.0000030</td>
<td align="right">8.5957276</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0042085</td>
<td align="right">0.0039233</td>
<td align="right">-1.0727002</td>
<td align="right">0.2835616</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0010478</td>
<td align="right">0.0008696</td>
<td align="right">1.2048455</td>
<td align="right">0.2284347</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.3483817</td>
<td align="right">0.7695217</td>
<td align="right">-0.4527250</td>
<td align="right">0.6508060</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.5046724</td>
<td align="right">0.7209435</td>
<td align="right">0.7000166</td>
<td align="right">0.4840150</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.0735853</td>
<td align="right">0.5520164</td>
<td align="right">-0.1333027</td>
<td align="right">0.8939701</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.1052520</td>
<td align="right">0.5999713</td>
<td align="right">-0.1754284</td>
<td align="right">0.8607644</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.4058485</td>
<td align="right">0.6593240</td>
<td align="right">0.6155525</td>
<td align="right">0.5382743</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.1671632</td>
<td align="right">0.5080745</td>
<td align="right">-0.3290133</td>
<td align="right">0.7421872</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.3439934</td>
<td align="right">0.6648281</td>
<td align="right">-0.5174170</td>
<td align="right">0.6049340</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.7692171</td>
<td align="right">0.5889174</td>
<td align="right">-1.3061544</td>
<td align="right">0.1916810</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.3683157</td>
<td align="right">0.6111592</td>
<td align="right">0.6026509</td>
<td align="right">0.5468232</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.5344000</td>
<td align="right">0.7296095</td>
<td align="right">0.7324466</td>
<td align="right">0.4639994</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.4950000</td>
<td align="right">0.4950000</td>
<td align="right">0.4950000</td>
<td align="right">0.4950000</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="online-news" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Online News</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_predictions_online_news &lt;- data.frame(matrix(ncol = 7, nrow = 0))
all_models_online_news &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_comparisons_online_news &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- lm(alt_online_all ~ # professor publication variables
                         alt_online_all_l+
                         cited_by_total_all_l + 
                         # gender
                         inferred_gender  +
                         # attention variables
                         news_all_total_l + alt_twitter_total_l +
                         # coauthor publication variables
                         coa_tot_cited_by_total_l +
                         # coauthor publication variables
                         coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset) 
  
  model_result &lt;- coeftest(news_model, vcov = vcovCL, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(summary(news_model)$r.squared,3)
  model_result$field &lt;- field
  
  all_models_online_news &lt;- rbind(all_models_online_news,
                      model_result)
  
  prediction &lt;- predict_response(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;, 
                                 vcov_type = &quot;HC0&quot;,
                                 vcov.args = list(cluster = field_dataset$profile_id))
  prediction$field &lt;- field
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_comparisons_online_news &lt;- rbind(all_comparisons_online_news,
                           gender_comparison)
  
  all_predictions_online_news &lt;- rbind(all_predictions_online_news,
                           prediction)
  
  
}

all_models_online_news$stars &lt;- ifelse(all_models_online_news$`Pr(&gt;|t|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_models_online_news$`Pr(&gt;|t|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_models_online_news$`Pr(&gt;|t|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_models_online_news$`Pr(&gt;|t|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_comparisons_online_news$stars &lt;- ifelse(all_comparisons_online_news$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_comparisons_online_news$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_comparisons_online_news$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_comparisons_online_news$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_comparisons_online_news$group1 &lt;- str_split_i(all_comparisons_online_news$inferred_gender, &quot;-&quot;, 1)
all_comparisons_online_news$group2 &lt;- str_split_i(all_comparisons_online_news$inferred_gender, &quot;-&quot;, 2)

all_comparisons_online_news$p_rounded &lt;- round(all_comparisons_online_news$p.value, 4)</code></pre>
<p>Plot gender differences:</p>
<pre class="r"><code>online_news_gender_plot &lt;- all_predictions_online_news %&gt;%
   ggplot(aes(x = fct_rev(field),
              y = predicted,
              ymin = conf.low,
              ymax = conf.high,
              color = x)) +
   geom_pointrange(position = position_dodge(width = 0.5),
                   size = 0.5)+
   #ylim(2, 5.5)+
   ggtitle(&quot;(b) Predicted values of online news attention&quot;)+
     stat_pvalue_manual(
    all_comparisons_online_news,
    y.position = c(7, 7, 4, 4),
    label.size = 3,
    label = &quot;{stars}&quot;,
    remove.bracket = FALSE,
    bracket.nudge.y = -2,
    x = &quot;field&quot;
    )+
    xlab(&quot;Field&quot;)+
   scale_x_discrete()+
   scale_x_discrete(labels=c(&quot;arts&quot; = &quot;Arts &amp; Humanities&quot;,
                             &quot;medicine&quot; = &quot;Medicine&quot;,
                             &quot;soc_sci&quot; = &quot;Social science&quot;,
                             &quot;stem&quot; = &quot;STEM&quot;))+
   ylab(&quot;Online news attention per year&quot;)+
   labs(color = &quot;Inferred gender&quot;)+
   scale_color_manual(values = c(&quot;#34d399&quot;, &quot;#fbbf24&quot;), labels = c(&quot;Man&quot;, &quot;Woman&quot;))+
   theme_minimal_hgrid()+
   theme(plot.title = element_text(size = 8),
         axis.text.y = element_text(size = 8),
         axis.title.y = element_text(size = 10),
         axis.text.x = element_text(size = 8) ,
         axis.title.x = element_text(size = 10),
         legend.title=element_text(size=8), 
         legend.text=element_text(size=7))</code></pre>
<pre class="r"><code>knitr::kable(all_models_online_news)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="27%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.5075455</td>
<td align="right">0.2917390</td>
<td align="right">1.7397244</td>
<td align="right">0.0819212</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.5702269</td>
<td align="right">0.0566464</td>
<td align="right">10.0664354</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0003634</td>
<td align="right">0.0000752</td>
<td align="right">4.8304596</td>
<td align="right">0.0000014</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.6086688</td>
<td align="right">0.5407286</td>
<td align="right">1.1256456</td>
<td align="right">0.2603276</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0090955</td>
<td align="right">0.0031568</td>
<td align="right">2.8812358</td>
<td align="right">0.0039650</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0030053</td>
<td align="right">0.0015449</td>
<td align="right">1.9453364</td>
<td align="right">0.0517470</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000342</td>
<td align="right">0.0000078</td>
<td align="right">4.3866123</td>
<td align="right">0.0000116</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0189210</td>
<td align="right">0.0047173</td>
<td align="right">4.0109825</td>
<td align="right">0.0000607</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0008341</td>
<td align="right">0.0006501</td>
<td align="right">-1.2831603</td>
<td align="right">0.1994492</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.0872600</td>
<td align="right">0.3321954</td>
<td align="right">-0.2626767</td>
<td align="right">0.7928022</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.3383629</td>
<td align="right">0.3233141</td>
<td align="right">-1.0465454</td>
<td align="right">0.2953206</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">2.7162581</td>
<td align="right">0.5964201</td>
<td align="right">4.5542702</td>
<td align="right">0.0000053</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.3358486</td>
<td align="right">0.7072648</td>
<td align="right">-0.4748555</td>
<td align="right">0.6348946</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-2.1831911</td>
<td align="right">0.5235951</td>
<td align="right">-4.1696174</td>
<td align="right">0.0000306</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.4330827</td>
<td align="right">0.7829713</td>
<td align="right">-0.5531271</td>
<td align="right">0.5801819</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.5779093</td>
<td align="right">0.9504188</td>
<td align="right">0.6080576</td>
<td align="right">0.5431555</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-2.5785556</td>
<td align="right">1.0112971</td>
<td align="right">-2.5497507</td>
<td align="right">0.0107866</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">1.2702494</td>
<td align="right">1.1764721</td>
<td align="right">1.0797106</td>
<td align="right">0.2802827</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-2.3142710</td>
<td align="right">1.2792038</td>
<td align="right">-1.8091496</td>
<td align="right">0.0704412</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.4400000</td>
<td align="right">0.4400000</td>
<td align="right">0.4400000</td>
<td align="right">0.4400000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.1181330</td>
<td align="right">0.1806160</td>
<td align="right">-0.6540563</td>
<td align="right">0.5130839</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.5042459</td>
<td align="right">0.0541750</td>
<td align="right">9.3077237</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0006112</td>
<td align="right">0.0001419</td>
<td align="right">4.3074715</td>
<td align="right">0.0000166</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.6742645</td>
<td align="right">0.2759530</td>
<td align="right">2.4434034</td>
<td align="right">0.0145590</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0028883</td>
<td align="right">0.0010874</td>
<td align="right">2.6561712</td>
<td align="right">0.0079103</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0055199</td>
<td align="right">0.0015709</td>
<td align="right">3.5137148</td>
<td align="right">0.0004430</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000355</td>
<td align="right">0.0000175</td>
<td align="right">2.0288334</td>
<td align="right">0.0424900</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0429010</td>
<td align="right">0.0175818</td>
<td align="right">2.4400775</td>
<td align="right">0.0146937</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0023396</td>
<td align="right">0.0017461</td>
<td align="right">-1.3398768</td>
<td align="right">0.1803023</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.2928298</td>
<td align="right">0.1494339</td>
<td align="right">-1.9595936</td>
<td align="right">0.0500587</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.1682708</td>
<td align="right">0.1893499</td>
<td align="right">-0.8886768</td>
<td align="right">0.3741887</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">1.1096502</td>
<td align="right">0.3539372</td>
<td align="right">3.1351611</td>
<td align="right">0.0017204</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.2786089</td>
<td align="right">0.3992118</td>
<td align="right">0.6978974</td>
<td align="right">0.4852504</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-1.2850361</td>
<td align="right">0.3446316</td>
<td align="right">-3.7287241</td>
<td align="right">0.0001930</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-1.0400035</td>
<td align="right">0.3361172</td>
<td align="right">-3.0941690</td>
<td align="right">0.0019767</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.2126450</td>
<td align="right">0.5607462</td>
<td align="right">0.3792180</td>
<td align="right">0.7045305</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-1.2276252</td>
<td align="right">0.5286507</td>
<td align="right">-2.3221862</td>
<td align="right">0.0202340</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">1.7217609</td>
<td align="right">0.7316266</td>
<td align="right">2.3533330</td>
<td align="right">0.0186167</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-1.6007536</td>
<td align="right">0.7811299</td>
<td align="right">-2.0492796</td>
<td align="right">0.0404492</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.5200000</td>
<td align="right">0.5200000</td>
<td align="right">0.5200000</td>
<td align="right">0.5200000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.3350633</td>
<td align="right">0.5222030</td>
<td align="right">-0.6416340</td>
<td align="right">0.5211187</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.3532052</td>
<td align="right">0.0332366</td>
<td align="right">10.6269825</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0007451</td>
<td align="right">0.0001388</td>
<td align="right">5.3682119</td>
<td align="right">0.0000001</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">1.4210474</td>
<td align="right">0.8221780</td>
<td align="right">1.7283938</td>
<td align="right">0.0839342</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0167296</td>
<td align="right">0.0086178</td>
<td align="right">1.9412762</td>
<td align="right">0.0522399</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0022132</td>
<td align="right">0.0007332</td>
<td align="right">3.0184809</td>
<td align="right">0.0025439</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000642</td>
<td align="right">0.0000103</td>
<td align="right">6.2500342</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0069368</td>
<td align="right">0.0031136</td>
<td align="right">2.2279420</td>
<td align="right">0.0258963</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000575</td>
<td align="right">0.0003354</td>
<td align="right">-0.1715283</td>
<td align="right">0.8638102</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.3914108</td>
<td align="right">0.3904846</td>
<td align="right">-1.0023719</td>
<td align="right">0.3161771</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.0978725</td>
<td align="right">0.3730139</td>
<td align="right">-0.2623829</td>
<td align="right">0.7930291</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">8.8718444</td>
<td align="right">1.0223896</td>
<td align="right">8.6775576</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">2.9656038</td>
<td align="right">0.9363980</td>
<td align="right">3.1670336</td>
<td align="right">0.0015425</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.7220401</td>
<td align="right">1.1239742</td>
<td align="right">0.6423992</td>
<td align="right">0.5206219</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-2.2424416</td>
<td align="right">1.0488367</td>
<td align="right">-2.1380273</td>
<td align="right">0.0325275</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">2.2301396</td>
<td align="right">1.6224675</td>
<td align="right">1.3745357</td>
<td align="right">0.1692920</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-1.9573509</td>
<td align="right">1.4665200</td>
<td align="right">-1.3346909</td>
<td align="right">0.1819939</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">7.3194730</td>
<td align="right">1.6872621</td>
<td align="right">4.3380771</td>
<td align="right">0.0000144</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">1.0920156</td>
<td align="right">1.5669842</td>
<td align="right">0.6968900</td>
<td align="right">0.4858804</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.3450000</td>
<td align="right">0.3450000</td>
<td align="right">0.3450000</td>
<td align="right">0.3450000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.1781477</td>
<td align="right">0.2132454</td>
<td align="right">0.8354118</td>
<td align="right">0.4036061</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.2700038</td>
<td align="right">0.1453806</td>
<td align="right">1.8572211</td>
<td align="right">0.0634567</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0007735</td>
<td align="right">0.0005091</td>
<td align="right">1.5194715</td>
<td align="right">0.1288343</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.2494850</td>
<td align="right">0.3247822</td>
<td align="right">-0.7681608</td>
<td align="right">0.4425009</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0003987</td>
<td align="right">0.0015336</td>
<td align="right">-0.2599477</td>
<td align="right">0.7949363</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0159949</td>
<td align="right">0.0117780</td>
<td align="right">1.3580298</td>
<td align="right">0.1746388</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000043</td>
<td align="right">0.0000121</td>
<td align="right">0.3535667</td>
<td align="right">0.7237085</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0047910</td>
<td align="right">0.0067724</td>
<td align="right">0.7074308</td>
<td align="right">0.4793981</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0005921</td>
<td align="right">0.0014296</td>
<td align="right">-0.4141666</td>
<td align="right">0.6788056</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.0069965</td>
<td align="right">0.0978708</td>
<td align="right">-0.0714866</td>
<td align="right">0.9430191</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.0808324</td>
<td align="right">0.1279021</td>
<td align="right">-0.6319868</td>
<td align="right">0.5274825</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.1193714</td>
<td align="right">0.1578068</td>
<td align="right">-0.7564403</td>
<td align="right">0.4494926</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.4083302</td>
<td align="right">0.3003779</td>
<td align="right">1.3593885</td>
<td align="right">0.1742081</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.1798073</td>
<td align="right">0.2362491</td>
<td align="right">0.7610920</td>
<td align="right">0.4467102</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.1295551</td>
<td align="right">0.2584110</td>
<td align="right">0.5013528</td>
<td align="right">0.6161893</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.3872409</td>
<td align="right">0.3021777</td>
<td align="right">-1.2815004</td>
<td align="right">0.2001969</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">1.5329384</td>
<td align="right">0.7314583</td>
<td align="right">2.0957291</td>
<td align="right">0.0362573</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.3485345</td>
<td align="right">0.8752152</td>
<td align="right">0.3982272</td>
<td align="right">0.6905139</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.5553684</td>
<td align="right">0.5841700</td>
<td align="right">0.9506965</td>
<td align="right">0.3418968</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.0770000</td>
<td align="right">0.0770000</td>
<td align="right">0.0770000</td>
<td align="right">0.0770000</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
</tbody>
</table>
</div>
<div id="twitter" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Twitter</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_predictions_twitter &lt;- data.frame(matrix(ncol = 7, nrow = 0))
all_models_twitter &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_comparisons_twitter &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- lm(alt_twitter ~ # professor publication variables
                     alt_twitter_l + 
                     count_pubs_total_l + cited_by_total_all_l + 
                     # gender
                     inferred_gender +
                     # attention variables
                     news_all_total_l +
                     alt_online_all_total_l +
                     # coauthor publication variables
                     coa_tot_cited_by_total_l +
                     # coauthor publication variables
                     coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset) 
  
  model_result &lt;- coeftest(news_model, vcov = vcovCL, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(summary(news_model)$r.squared,3)
  model_result$field &lt;- field
  
  all_models_twitter &lt;- rbind(all_models_twitter,
                      model_result)
  
  prediction &lt;- predict_response(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;, 
                                 vcov_type = &quot;HC0&quot;,
                                 vcov.args = list(cluster = field_dataset$profile_id))
  prediction$field &lt;- field
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_comparisons_twitter &lt;- rbind(all_comparisons_twitter,
                           gender_comparison)
  
  all_predictions_twitter &lt;- rbind(all_predictions_twitter,
                           prediction)
  
  
}

all_models_twitter$stars &lt;- ifelse(all_models_twitter$`Pr(&gt;|t|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_models_twitter$`Pr(&gt;|t|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_models_twitter$`Pr(&gt;|t|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_models_twitter$`Pr(&gt;|t|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_comparisons_twitter$stars &lt;- ifelse(all_comparisons_twitter$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_comparisons_twitter$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_comparisons_twitter$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_comparisons_twitter$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_comparisons_twitter$group1 &lt;- str_split_i(all_comparisons_twitter$inferred_gender, &quot;-&quot;, 1)
all_comparisons_twitter$group2 &lt;- str_split_i(all_comparisons_twitter$inferred_gender, &quot;-&quot;, 2)

all_comparisons_twitter$p_rounded &lt;- round(all_comparisons_twitter$p.value, 4)</code></pre>
<p>Plot gender differences:</p>
<pre class="r"><code>twitter_gender_plot &lt;- all_predictions_twitter %&gt;%
   ggplot(aes(x = fct_rev(field),
              y = predicted,
              ymin = conf.low,
              ymax = conf.high,
              color = x)) +
   geom_pointrange(position = position_dodge(width = 0.5),
                   size = 0.5)+
   #ylim(2, 5.5)+
   ggtitle(&quot;(c) Predicted values of Twitter attention&quot;)+
     stat_pvalue_manual(
    all_comparisons_twitter,
    y.position = c(0, 26, 0, 10),
    label.size = 3,
    label = &quot;{stars}&quot;,
    remove.bracket = FALSE,
    bracket.nudge.y = -2,
    x = &quot;field&quot;
    )+
    xlab(&quot;Field&quot;)+
   scale_x_discrete()+
   scale_x_discrete(labels=c(&quot;arts&quot; = &quot;Arts &amp; Humanities&quot;,
                             &quot;medicine&quot; = &quot;Medicine&quot;,
                             &quot;soc_sci&quot; = &quot;Social science&quot;,
                             &quot;stem&quot; = &quot;STEM&quot;))+
   ylab(&quot;News attention per year&quot;)+
   labs(color = &quot;Inferred gender&quot;)+
   scale_color_manual(values = c(&quot;#34d399&quot;, &quot;#fbbf24&quot;), labels = c(&quot;Man&quot;, &quot;Woman&quot;))+
   theme_minimal_hgrid()+
   theme(plot.title = element_text(size = 8),
         axis.text.y = element_text(size = 8),
         axis.title.y = element_text(size = 10),
         axis.text.x = element_text(size = 8) ,
         axis.title.x = element_text(size = 10),
         legend.title=element_text(size=8), 
         legend.text=element_text(size=7))</code></pre>
<pre class="r"><code>knitr::kable(all_models_twitter)</code></pre>
<table>
<colgroup>
<col width="26%" />
<col width="12%" />
<col width="11%" />
<col width="11%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">4.8572071</td>
<td align="right">1.7760215</td>
<td align="right">2.7348808</td>
<td align="right">0.0062452</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.5695465</td>
<td align="right">0.0431070</td>
<td align="right">13.2123979</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">count_pubs_total_l</td>
<td align="right">0.0054966</td>
<td align="right">0.0137058</td>
<td align="right">0.4010425</td>
<td align="right">0.6883927</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000439</td>
<td align="right">0.0003454</td>
<td align="right">-0.1269751</td>
<td align="right">0.8989613</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">inferred_genderw</td>
<td align="right">0.1148555</td>
<td align="right">3.8032629</td>
<td align="right">0.0301992</td>
<td align="right">0.9759085</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">news_all_total_l</td>
<td align="right">-0.0035274</td>
<td align="right">0.0177903</td>
<td align="right">-0.1982757</td>
<td align="right">0.8428311</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.2204170</td>
<td align="right">0.0507843</td>
<td align="right">4.3402581</td>
<td align="right">0.0000143</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000161</td>
<td align="right">0.0000263</td>
<td align="right">-0.6119621</td>
<td align="right">0.5405691</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0278384</td>
<td align="right">0.0155351</td>
<td align="right">-1.7919625</td>
<td align="right">0.0731525</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0078197</td>
<td align="right">0.0030796</td>
<td align="right">2.5392372</td>
<td align="right">0.0111162</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2014</td>
<td align="right">2.1674490</td>
<td align="right">1.0532223</td>
<td align="right">2.0579217</td>
<td align="right">0.0396092</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2015</td>
<td align="right">9.6701467</td>
<td align="right">2.0714140</td>
<td align="right">4.6683795</td>
<td align="right">0.0000031</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2016</td>
<td align="right">18.2423656</td>
<td align="right">5.1147689</td>
<td align="right">3.5666060</td>
<td align="right">0.0003624</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2017</td>
<td align="right">21.6071916</td>
<td align="right">4.1211514</td>
<td align="right">5.2429988</td>
<td align="right">0.0000002</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2018</td>
<td align="right">14.7190853</td>
<td align="right">3.9507587</td>
<td align="right">3.7256351</td>
<td align="right">0.0001953</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2019</td>
<td align="right">21.2930689</td>
<td align="right">6.5411326</td>
<td align="right">3.2552572</td>
<td align="right">0.0011346</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2020</td>
<td align="right">18.7712771</td>
<td align="right">4.3573391</td>
<td align="right">4.3079679</td>
<td align="right">0.0000165</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.0487266</td>
<td align="right">5.2691856</td>
<td align="right">-0.0092475</td>
<td align="right">0.9926218</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2022</td>
<td align="right">1.0771294</td>
<td align="right">4.1396150</td>
<td align="right">0.2602004</td>
<td align="right">0.7947116</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2023</td>
<td align="right">-15.0095430</td>
<td align="right">4.5197060</td>
<td align="right">-3.3209113</td>
<td align="right">0.0008987</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">R^2</td>
<td align="right">0.3900000</td>
<td align="right">0.3900000</td>
<td align="right">0.3900000</td>
<td align="right">0.3900000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="right">0.3624442</td>
<td align="right">1.3692032</td>
<td align="right">0.2647118</td>
<td align="right">0.7912345</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_twitter_l</td>
<td align="right">0.4528855</td>
<td align="right">0.0724447</td>
<td align="right">6.2514678</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">count_pubs_total_l</td>
<td align="right">0.0218040</td>
<td align="right">0.0120495</td>
<td align="right">1.8095414</td>
<td align="right">0.0703836</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0007765</td>
<td align="right">0.0007833</td>
<td align="right">0.9912476</td>
<td align="right">0.3215780</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">3.2844235</td>
<td align="right">2.0164170</td>
<td align="right">1.6288414</td>
<td align="right">0.1033641</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0055991</td>
<td align="right">0.0050087</td>
<td align="right">1.1178885</td>
<td align="right">0.2636295</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.1270528</td>
<td align="right">0.0621558</td>
<td align="right">2.0441014</td>
<td align="right">0.0409581</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000896</td>
<td align="right">0.0001078</td>
<td align="right">0.8311120</td>
<td align="right">0.4059214</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0202841</td>
<td align="right">0.0323047</td>
<td align="right">-0.6278981</td>
<td align="right">0.5300787</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0071966</td>
<td align="right">0.0042123</td>
<td align="right">1.7084672</td>
<td align="right">0.0875669</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.1768124</td>
<td align="right">1.0920278</td>
<td align="right">0.1619120</td>
<td align="right">0.8713770</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">2.2397015</td>
<td align="right">2.3457898</td>
<td align="right">0.9547750</td>
<td align="right">0.3397043</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.5049915</td>
<td align="right">1.2187532</td>
<td align="right">0.4143509</td>
<td align="right">0.6786221</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">7.5474173</td>
<td align="right">3.3366457</td>
<td align="right">2.2619775</td>
<td align="right">0.0237107</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">6.4124983</td>
<td align="right">2.2542399</td>
<td align="right">2.8446388</td>
<td align="right">0.0044512</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">5.4665925</td>
<td align="right">3.1231130</td>
<td align="right">1.7503665</td>
<td align="right">0.0800721</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">2.6614742</td>
<td align="right">2.4051700</td>
<td align="right">1.1065639</td>
<td align="right">0.2684973</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.3317989</td>
<td align="right">2.5321650</td>
<td align="right">0.1310337</td>
<td align="right">0.8957501</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-3.2101888</td>
<td align="right">2.7545458</td>
<td align="right">-1.1654149</td>
<td align="right">0.2438665</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-10.0567250</td>
<td align="right">3.7508803</td>
<td align="right">-2.6811639</td>
<td align="right">0.0073433</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2830000</td>
<td align="right">0.2830000</td>
<td align="right">0.2830000</td>
<td align="right">0.2830000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">8.6076643</td>
<td align="right">5.6636510</td>
<td align="right">1.5198084</td>
<td align="right">0.1285761</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.5677241</td>
<td align="right">0.0363985</td>
<td align="right">15.5974535</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">count_pubs_total_l</td>
<td align="right">0.0177815</td>
<td align="right">0.0508664</td>
<td align="right">0.3495718</td>
<td align="right">0.7266640</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0011623</td>
<td align="right">0.0013365</td>
<td align="right">0.8696529</td>
<td align="right">0.3845013</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">inferred_genderw</td>
<td align="right">-9.5479454</td>
<td align="right">5.5172451</td>
<td align="right">-1.7305639</td>
<td align="right">0.0835462</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">news_all_total_l</td>
<td align="right">0.0093094</td>
<td align="right">0.0458406</td>
<td align="right">0.2030820</td>
<td align="right">0.8390732</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.1208290</td>
<td align="right">0.0618326</td>
<td align="right">1.9541306</td>
<td align="right">0.0507008</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0001014</td>
<td align="right">0.0000693</td>
<td align="right">1.4626075</td>
<td align="right">0.1435917</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0381801</td>
<td align="right">0.0263515</td>
<td align="right">1.4488773</td>
<td align="right">0.1473887</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0035519</td>
<td align="right">0.0028777</td>
<td align="right">-1.2343046</td>
<td align="right">0.2171050</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.7387517</td>
<td align="right">1.8043387</td>
<td align="right">-0.4094307</td>
<td align="right">0.6822283</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2015</td>
<td align="right">15.4726874</td>
<td align="right">2.7208776</td>
<td align="right">5.6866531</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2016</td>
<td align="right">9.1671858</td>
<td align="right">2.8743099</td>
<td align="right">3.1893519</td>
<td align="right">0.0014283</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2017</td>
<td align="right">25.1159527</td>
<td align="right">4.6693679</td>
<td align="right">5.3788764</td>
<td align="right">0.0000001</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2018</td>
<td align="right">39.6052078</td>
<td align="right">7.8590841</td>
<td align="right">5.0394177</td>
<td align="right">0.0000005</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2019</td>
<td align="right">19.9912072</td>
<td align="right">7.3318526</td>
<td align="right">2.7266243</td>
<td align="right">0.0064046</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2020</td>
<td align="right">87.3108345</td>
<td align="right">19.0166268</td>
<td align="right">4.5912893</td>
<td align="right">0.0000044</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2021</td>
<td align="right">-1.7520784</td>
<td align="right">14.9720302</td>
<td align="right">-0.1170234</td>
<td align="right">0.9068427</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2022</td>
<td align="right">-20.6411841</td>
<td align="right">9.7071036</td>
<td align="right">-2.1263999</td>
<td align="right">0.0334831</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2023</td>
<td align="right">-30.7918295</td>
<td align="right">11.7313791</td>
<td align="right">-2.6247408</td>
<td align="right">0.0086786</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">R^2</td>
<td align="right">0.3390000</td>
<td align="right">0.3390000</td>
<td align="right">0.3390000</td>
<td align="right">0.3390000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="right">-0.1952112</td>
<td align="right">0.4681351</td>
<td align="right">-0.4169975</td>
<td align="right">0.6767342</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_twitter_l</td>
<td align="right">0.4214819</td>
<td align="right">0.1562465</td>
<td align="right">2.6975449</td>
<td align="right">0.0070560</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">count_pubs_total_l</td>
<td align="right">0.0073980</td>
<td align="right">0.0047400</td>
<td align="right">1.5607561</td>
<td align="right">0.1187720</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0001136</td>
<td align="right">0.0007646</td>
<td align="right">-0.1485145</td>
<td align="right">0.8819548</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.1721008</td>
<td align="right">0.7451758</td>
<td align="right">-0.2309533</td>
<td align="right">0.8173796</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0071142</td>
<td align="right">0.0035033</td>
<td align="right">-2.0307323</td>
<td align="right">0.0424414</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0248849</td>
<td align="right">0.0494324</td>
<td align="right">0.5034130</td>
<td align="right">0.6147408</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000073</td>
<td align="right">0.0000178</td>
<td align="right">0.4113719</td>
<td align="right">0.6808530</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0038563</td>
<td align="right">0.0233023</td>
<td align="right">-0.1654885</td>
<td align="right">0.8685797</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0020599</td>
<td align="right">0.0042873</td>
<td align="right">-0.4804750</td>
<td align="right">0.6309530</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.2496280</td>
<td align="right">0.1690836</td>
<td align="right">1.4763578</td>
<td align="right">0.1400376</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.3333684</td>
<td align="right">0.3860152</td>
<td align="right">0.8636146</td>
<td align="right">0.3879245</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.2245326</td>
<td align="right">0.1435918</td>
<td align="right">1.5636871</td>
<td align="right">0.1180818</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.9481751</td>
<td align="right">0.3768756</td>
<td align="right">2.5158833</td>
<td align="right">0.0119672</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">1.7222602</td>
<td align="right">0.7130830</td>
<td align="right">2.4152311</td>
<td align="right">0.0158327</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">3.0528344</td>
<td align="right">1.7303952</td>
<td align="right">1.7642411</td>
<td align="right">0.0778754</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">2.7619054</td>
<td align="right">1.0053858</td>
<td align="right">2.7471099</td>
<td align="right">0.0060773</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">6.4946758</td>
<td align="right">3.1212722</td>
<td align="right">2.0807784</td>
<td align="right">0.0376073</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">3.8562843</td>
<td align="right">1.8889836</td>
<td align="right">2.0414599</td>
<td align="right">0.0413631</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">1.9381968</td>
<td align="right">0.8373600</td>
<td align="right">2.3146517</td>
<td align="right">0.0207536</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1760000</td>
<td align="right">0.1760000</td>
<td align="right">0.1760000</td>
<td align="right">0.1760000</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="write-out-the-models" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Write out the
models</h3>
<pre class="r"><code>write_csv(all_models_news, &quot;Plots_april/reg_mod_ols_news.csv&quot;)
write_csv(all_models_online_news, &quot;Plots_april/reg_mod_ols_online_news.csv&quot;)
write_csv(all_models_twitter, &quot;Plots_april/reg_mod_ols_twitter.csv&quot;)</code></pre>
</div>
<div id="combine-the-plots" class="section level3" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Combine the
plots</h3>
<p>Plot it all together:</p>
<pre class="r"><code>legend &lt;- get_legend(
  # create some space to the left of the legend
  news_gender_plot
)

combi_plot &lt;- cowplot::plot_grid(news_gender_plot + theme(legend.position=&quot;none&quot;), 
                    online_news_gender_plot + theme(legend.position=&quot;none&quot;),
                    twitter_gender_plot + theme(legend.position=&quot;none&quot;),
                    legend,
                    ncol = 4,
                    rel_widths = c(1, 1, 1, 0.3))

combi_plot</code></pre>
<p><img src="April_analyses_files/figure-html/unnamed-chunk-46-1.png" width="1056" /></p>
<pre class="r"><code>ggsave2(
  filename = &quot;Plots_april/Plot_2_counts.png&quot;,
  plot = combi_plot,
  width = 11,
  height = 3,
  units = c(&quot;in&quot;),
  dpi = 600,
  bg = &quot;white&quot;
)</code></pre>
</div>
</div>
<div id="count-models---poisson" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Count models -
Poisson</h2>
<div id="news-1" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> News</h3>
<p>Check how many zeroes do we have:</p>
<pre class="r"><code>100*sum(prof_panel_filter$news == 0)/nrow(prof_panel_filter)</code></pre>
<pre><code>## [1] 0</code></pre>
<p>Almost 70%!</p>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_count_predictions_news &lt;- data.frame(matrix(ncol = 7, nrow = 0))
all_count_models_news &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_count_comparisons_news &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(news_all ~ # professor publication variables
                     news_all_l + 
                     cited_by_total_all_l + 
                     # gender
                     inferred_gender +
                     # attention variables
                     alt_online_all_total_l + alt_twitter_total_l +
                     # coauthor publication variables
                     coa_tot_cited_by_total_l +
                     # coauthor publication variables
                     coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;poisson&#39;) 
  
  model_result &lt;- coeftest(news_model, vcov = vcovCL, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  # model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  # model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(summary(news_model)$r.squared,3)
  model_result$field &lt;- field
  
  all_count_models_news &lt;- rbind(all_count_models_news,
                      model_result)
  
  prediction &lt;- predict_response(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;, 
                                 vcov_type = &quot;HC0&quot;,
                                 vcov.args = list(cluster = field_dataset$profile_id))
  prediction$field &lt;- field
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_count_comparisons_news &lt;- rbind(all_count_comparisons_news,
                           gender_comparison)
  
  all_count_predictions_news &lt;- rbind(all_count_predictions_news,
                           prediction)
  
  
}

all_count_models_news$stars &lt;- ifelse(all_count_models_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_count_models_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_count_models_news$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_count_models_news$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_count_comparisons_news$stars &lt;- ifelse(all_count_comparisons_news$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_count_comparisons_news$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_count_comparisons_news$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_count_comparisons_news$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_count_comparisons_news$group1 &lt;- str_split_i(all_count_comparisons_news$inferred_gender, &quot;-&quot;, 1)
all_count_comparisons_news$group2 &lt;- str_split_i(all_count_comparisons_news$inferred_gender, &quot;-&quot;, 2)

all_count_comparisons_news$p_rounded &lt;- round(all_count_comparisons_news$p.value, 4)</code></pre>
<pre class="r"><code>knitr::kable(all_count_models_news)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="27%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.9699755</td>
<td align="right">0.0700866</td>
<td align="right">13.8396728</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.0170091</td>
<td align="right">0.0013645</td>
<td align="right">12.4658760</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000041</td>
<td align="right">0.0000027</td>
<td align="right">1.5194648</td>
<td align="right">0.1286455</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.2567032</td>
<td align="right">0.1123826</td>
<td align="right">-2.2841891</td>
<td align="right">0.0223604</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0004612</td>
<td align="right">0.0001501</td>
<td align="right">3.0732663</td>
<td align="right">0.0021173</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000215</td>
<td align="right">0.0000199</td>
<td align="right">1.0793043</td>
<td align="right">0.2804521</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000003</td>
<td align="right">0.0000003</td>
<td align="right">1.0832974</td>
<td align="right">0.2786764</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0000594</td>
<td align="right">0.0000679</td>
<td align="right">0.8747444</td>
<td align="right">0.3817130</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000046</td>
<td align="right">0.0000123</td>
<td align="right">0.3723381</td>
<td align="right">0.7096411</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.1560070</td>
<td align="right">0.1338090</td>
<td align="right">-1.1658929</td>
<td align="right">0.2436577</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.0646881</td>
<td align="right">0.0511036</td>
<td align="right">1.2658233</td>
<td align="right">0.2055764</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.1122402</td>
<td align="right">0.0708523</td>
<td align="right">1.5841430</td>
<td align="right">0.1131612</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.1218097</td>
<td align="right">0.0659640</td>
<td align="right">1.8466100</td>
<td align="right">0.0648037</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.2021007</td>
<td align="right">0.0580396</td>
<td align="right">3.4821196</td>
<td align="right">0.0004975</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.3010928</td>
<td align="right">0.0668059</td>
<td align="right">4.5069803</td>
<td align="right">0.0000066</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.1994430</td>
<td align="right">0.0763129</td>
<td align="right">2.6134896</td>
<td align="right">0.0089623</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.2739962</td>
<td align="right">0.0713952</td>
<td align="right">3.8377399</td>
<td align="right">0.0001242</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.4362838</td>
<td align="right">0.0703783</td>
<td align="right">6.1991242</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.2970258</td>
<td align="right">0.1279548</td>
<td align="right">2.3213334</td>
<td align="right">0.0202689</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="right">1.5588536</td>
<td align="right">0.0712582</td>
<td align="right">21.8761386</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">news_all_l</td>
<td align="right">0.0114462</td>
<td align="right">0.0014690</td>
<td align="right">7.7917347</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000021</td>
<td align="right">0.0000085</td>
<td align="right">0.2539218</td>
<td align="right">0.7995560</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">inferred_genderw</td>
<td align="right">-0.2815283</td>
<td align="right">0.0971235</td>
<td align="right">-2.8986622</td>
<td align="right">0.0037476</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0008089</td>
<td align="right">0.0002876</td>
<td align="right">2.8129463</td>
<td align="right">0.0049090</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000040</td>
<td align="right">0.0000478</td>
<td align="right">0.0845174</td>
<td align="right">0.9326451</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000004</td>
<td align="right">0.0000005</td>
<td align="right">-0.8176882</td>
<td align="right">0.4135352</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0003772</td>
<td align="right">0.0001761</td>
<td align="right">-2.1414394</td>
<td align="right">0.0322386</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000556</td>
<td align="right">0.0000245</td>
<td align="right">2.2657667</td>
<td align="right">0.0234657</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.0539308</td>
<td align="right">0.0507994</td>
<td align="right">-1.0616416</td>
<td align="right">0.2883984</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.0394528</td>
<td align="right">0.0513135</td>
<td align="right">-0.7688581</td>
<td align="right">0.4419776</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2016</td>
<td align="right">0.0153704</td>
<td align="right">0.0574153</td>
<td align="right">0.2677056</td>
<td align="right">0.7889259</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2017</td>
<td align="right">0.0528102</td>
<td align="right">0.0517132</td>
<td align="right">1.0212126</td>
<td align="right">0.3071537</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2018</td>
<td align="right">0.1435210</td>
<td align="right">0.0847599</td>
<td align="right">1.6932651</td>
<td align="right">0.0904050</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.3536559</td>
<td align="right">0.1171397</td>
<td align="right">-3.0190950</td>
<td align="right">0.0025353</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2020</td>
<td align="right">0.3266532</td>
<td align="right">0.0621359</td>
<td align="right">5.2570758</td>
<td align="right">0.0000001</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2021</td>
<td align="right">0.3898967</td>
<td align="right">0.0666686</td>
<td align="right">5.8482816</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2022</td>
<td align="right">0.3574722</td>
<td align="right">0.0677352</td>
<td align="right">5.2774947</td>
<td align="right">0.0000001</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2023</td>
<td align="right">0.6428884</td>
<td align="right">0.1211069</td>
<td align="right">5.3084355</td>
<td align="right">0.0000001</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.9160492</td>
<td align="right">0.1720041</td>
<td align="right">5.3257401</td>
<td align="right">0.0000001</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.0112734</td>
<td align="right">0.0006945</td>
<td align="right">16.2325720</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000081</td>
<td align="right">0.0000044</td>
<td align="right">1.8592318</td>
<td align="right">0.0629943</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.2776227</td>
<td align="right">0.0934831</td>
<td align="right">-2.9697621</td>
<td align="right">0.0029803</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0003452</td>
<td align="right">0.0001547</td>
<td align="right">2.2318679</td>
<td align="right">0.0256237</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000100</td>
<td align="right">0.0000144</td>
<td align="right">0.6945956</td>
<td align="right">0.4873088</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000001</td>
<td align="right">0.0000002</td>
<td align="right">0.3148502</td>
<td align="right">0.7528754</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0000598</td>
<td align="right">0.0000535</td>
<td align="right">1.1183483</td>
<td align="right">0.2634183</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000046</td>
<td align="right">0.0000061</td>
<td align="right">-0.7555885</td>
<td align="right">0.4498960</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.6676707</td>
<td align="right">0.3967424</td>
<td align="right">-1.6828824</td>
<td align="right">0.0923979</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.1090492</td>
<td align="right">0.1397751</td>
<td align="right">-0.7801760</td>
<td align="right">0.4352873</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.0048953</td>
<td align="right">0.1538266</td>
<td align="right">0.0318238</td>
<td align="right">0.9746126</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.0418324</td>
<td align="right">0.1548870</td>
<td align="right">0.2700831</td>
<td align="right">0.7870963</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.0007511</td>
<td align="right">0.1370307</td>
<td align="right">0.0054809</td>
<td align="right">0.9956269</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.1937121</td>
<td align="right">0.1484899</td>
<td align="right">1.3045478</td>
<td align="right">0.1920469</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.7629422</td>
<td align="right">0.1728767</td>
<td align="right">4.4132159</td>
<td align="right">0.0000102</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.5704604</td>
<td align="right">0.1553285</td>
<td align="right">3.6726053</td>
<td align="right">0.0002401</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.2785330</td>
<td align="right">0.1526306</td>
<td align="right">1.8248833</td>
<td align="right">0.0680186</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.6159006</td>
<td align="right">0.1762574</td>
<td align="right">3.4943255</td>
<td align="right">0.0004753</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="right">1.1572477</td>
<td align="right">0.1772670</td>
<td align="right">6.5282744</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">news_all_l</td>
<td align="right">0.0533628</td>
<td align="right">0.0038704</td>
<td align="right">13.7872409</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000706</td>
<td align="right">0.0001235</td>
<td align="right">-0.5716205</td>
<td align="right">0.5675791</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">inferred_genderw</td>
<td align="right">-0.4162464</td>
<td align="right">0.1544468</td>
<td align="right">-2.6950796</td>
<td align="right">0.0070372</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0010960</td>
<td align="right">0.0027085</td>
<td align="right">0.4046421</td>
<td align="right">0.6857406</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0008733</td>
<td align="right">0.0009023</td>
<td align="right">-0.9679001</td>
<td align="right">0.3330943</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000048</td>
<td align="right">0.0000008</td>
<td align="right">5.8128250</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0014011</td>
<td align="right">0.0020528</td>
<td align="right">-0.6825379</td>
<td align="right">0.4948989</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000970</td>
<td align="right">0.0003584</td>
<td align="right">0.2705886</td>
<td align="right">0.7867075</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.1286715</td>
<td align="right">0.1977318</td>
<td align="right">-0.6507372</td>
<td align="right">0.5152161</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2015</td>
<td align="right">0.0311570</td>
<td align="right">0.2057753</td>
<td align="right">0.1514126</td>
<td align="right">0.8796502</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.3852750</td>
<td align="right">0.2478490</td>
<td align="right">-1.5544747</td>
<td align="right">0.1200712</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.0733025</td>
<td align="right">0.1715958</td>
<td align="right">-0.4271813</td>
<td align="right">0.6692473</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.1471290</td>
<td align="right">0.2264918</td>
<td align="right">-0.6495999</td>
<td align="right">0.5159507</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.0572011</td>
<td align="right">0.1345796</td>
<td align="right">-0.4250354</td>
<td align="right">0.6708108</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.1765193</td>
<td align="right">0.1832219</td>
<td align="right">-0.9634179</td>
<td align="right">0.3353378</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.3701005</td>
<td align="right">0.1956732</td>
<td align="right">-1.8914214</td>
<td align="right">0.0585681</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2022</td>
<td align="right">-0.0263448</td>
<td align="right">0.1780253</td>
<td align="right">-0.1479837</td>
<td align="right">0.8823556</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2023</td>
<td align="right">0.0743697</td>
<td align="right">0.1990191</td>
<td align="right">0.3736810</td>
<td align="right">0.7086417</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="online-news-1" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Online News</h3>
<p>Check how many zeroes do we have:</p>
<pre class="r"><code>100*sum(prof_panel_filter$alt_online_all == 0, na.rm = TRUE)/nrow(prof_panel_filter)</code></pre>
<pre><code>## [1] 26.92062</code></pre>
<p>Around 27%.</p>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_count_predictions_online_news &lt;- data.frame(matrix(ncol = 7, nrow = 0))
all_count_models_online_news &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_count_comparisons_online_news &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(alt_online_all ~ # professor publication variables
                         alt_online_all_l+
                         cited_by_total_all_l + 
                         # gender
                         inferred_gender  +
                         # attention variables
                         news_all_total_l + alt_twitter_total_l +
                         # coauthor publication variables
                         coa_tot_cited_by_total_l +
                         # coauthor publication variables
                         coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;poisson&#39;)  
  
  model_result &lt;- coeftest(news_model, vcov = vcovCL, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  # model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  # model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(summary(news_model)$r.squared,3)
  model_result$field &lt;- field
  
  all_count_models_online_news &lt;- rbind(all_count_models_online_news,
                      model_result)
  
  prediction &lt;- predict_response(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;, 
                                 vcov_type = &quot;HC0&quot;,
                                 vcov.args = list(cluster = field_dataset$profile_id))
  prediction$field &lt;- field
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_count_comparisons_online_news &lt;- rbind(all_count_comparisons_online_news,
                           gender_comparison)
  
  all_count_predictions_online_news &lt;- rbind(all_count_predictions_online_news,
                           prediction)
  
  
}

all_count_models_online_news$stars &lt;- ifelse(all_count_models_online_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_count_models_online_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_count_models_online_news$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_count_models_online_news$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_count_comparisons_online_news$stars &lt;- ifelse(all_count_comparisons_online_news$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_count_comparisons_online_news$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_count_comparisons_online_news$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_count_comparisons_online_news$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_count_comparisons_online_news$group1 &lt;- str_split_i(all_count_comparisons_online_news$inferred_gender, &quot;-&quot;, 1)
all_count_comparisons_online_news$group2 &lt;- str_split_i(all_count_comparisons_online_news$inferred_gender, &quot;-&quot;, 2)

all_count_comparisons_online_news$p_rounded &lt;- round(all_count_comparisons_online_news$p.value, 4)</code></pre>
<pre class="r"><code>knitr::kable(all_count_models_online_news)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="27%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.9248581</td>
<td align="right">0.0864180</td>
<td align="right">10.7021481</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.0029408</td>
<td align="right">0.0003387</td>
<td align="right">8.6823708</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000093</td>
<td align="right">0.0000024</td>
<td align="right">3.9038932</td>
<td align="right">0.0000947</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.0197792</td>
<td align="right">0.1080605</td>
<td align="right">0.1830381</td>
<td align="right">0.8547681</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0003507</td>
<td align="right">0.0002198</td>
<td align="right">1.5957806</td>
<td align="right">0.1105378</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000116</td>
<td align="right">0.0000172</td>
<td align="right">0.6734818</td>
<td align="right">0.5006408</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000013</td>
<td align="right">0.0000002</td>
<td align="right">5.1649263</td>
<td align="right">0.0000002</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0002117</td>
<td align="right">0.0000573</td>
<td align="right">3.6957584</td>
<td align="right">0.0002192</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000021</td>
<td align="right">0.0000121</td>
<td align="right">-0.1778420</td>
<td align="right">0.8588471</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.3382488</td>
<td align="right">0.0793530</td>
<td align="right">4.2625841</td>
<td align="right">0.0000202</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.5308024</td>
<td align="right">0.0791496</td>
<td align="right">6.7063203</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">1.1494420</td>
<td align="right">0.0875757</td>
<td align="right">13.1251260</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">1.1249321</td>
<td align="right">0.0835537</td>
<td align="right">13.4635778</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">1.0067748</td>
<td align="right">0.0872923</td>
<td align="right">11.5333736</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">1.2051132</td>
<td align="right">0.0866831</td>
<td align="right">13.9025215</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">1.3439116</td>
<td align="right">0.1067375</td>
<td align="right">12.5908041</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">1.3008303</td>
<td align="right">0.0851465</td>
<td align="right">15.2775511</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">1.5135851</td>
<td align="right">0.0974012</td>
<td align="right">15.5396990</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">1.2460898</td>
<td align="right">0.1112706</td>
<td align="right">11.1987299</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="right">-0.0587697</td>
<td align="right">0.1110711</td>
<td align="right">-0.5291182</td>
<td align="right">0.5967235</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_l</td>
<td align="right">0.0033223</td>
<td align="right">0.0007210</td>
<td align="right">4.6079629</td>
<td align="right">0.0000041</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000363</td>
<td align="right">0.0000071</td>
<td align="right">5.1420264</td>
<td align="right">0.0000003</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">inferred_genderw</td>
<td align="right">0.1765780</td>
<td align="right">0.1137241</td>
<td align="right">1.5526879</td>
<td align="right">0.1204977</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">news_all_total_l</td>
<td align="right">0.0006343</td>
<td align="right">0.0001693</td>
<td align="right">3.7469565</td>
<td align="right">0.0001790</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0003436</td>
<td align="right">0.0000322</td>
<td align="right">10.6556149</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000014</td>
<td align="right">0.0000005</td>
<td align="right">2.8868129</td>
<td align="right">0.0038917</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0005601</td>
<td align="right">0.0001246</td>
<td align="right">4.4940622</td>
<td align="right">0.0000070</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000899</td>
<td align="right">0.0000195</td>
<td align="right">-4.6166283</td>
<td align="right">0.0000039</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2014</td>
<td align="right">0.1803231</td>
<td align="right">0.1027292</td>
<td align="right">1.7553244</td>
<td align="right">0.0792038</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2015</td>
<td align="right">0.5037598</td>
<td align="right">0.1168050</td>
<td align="right">4.3128293</td>
<td align="right">0.0000161</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2016</td>
<td align="right">1.1748116</td>
<td align="right">0.1199604</td>
<td align="right">9.7933313</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2017</td>
<td align="right">1.3008428</td>
<td align="right">0.0997570</td>
<td align="right">13.0401170</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2018</td>
<td align="right">1.0758759</td>
<td align="right">0.0924866</td>
<td align="right">11.6327818</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2019</td>
<td align="right">1.1292547</td>
<td align="right">0.0928309</td>
<td align="right">12.1646450</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2020</td>
<td align="right">1.4410371</td>
<td align="right">0.1097853</td>
<td align="right">13.1259622</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2021</td>
<td align="right">1.4110448</td>
<td align="right">0.1149546</td>
<td align="right">12.2747997</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2022</td>
<td align="right">1.8275520</td>
<td align="right">0.1056935</td>
<td align="right">17.2910614</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2023</td>
<td align="right">1.2145832</td>
<td align="right">0.1836387</td>
<td align="right">6.6139812</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">1.1314204</td>
<td align="right">0.0947173</td>
<td align="right">11.9452326</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.0017417</td>
<td align="right">0.0003463</td>
<td align="right">5.0289459</td>
<td align="right">0.0000005</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000174</td>
<td align="right">0.0000029</td>
<td align="right">5.9462910</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.0287237</td>
<td align="right">0.0679309</td>
<td align="right">-0.4228372</td>
<td align="right">0.6724140</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0005114</td>
<td align="right">0.0002639</td>
<td align="right">1.9379619</td>
<td align="right">0.0526279</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000352</td>
<td align="right">0.0000130</td>
<td align="right">2.7025096</td>
<td align="right">0.0068818</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000004</td>
<td align="right">0.0000002</td>
<td align="right">2.0289250</td>
<td align="right">0.0424659</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0001790</td>
<td align="right">0.0000414</td>
<td align="right">4.3251598</td>
<td align="right">0.0000152</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000078</td>
<td align="right">0.0000045</td>
<td align="right">-1.7136742</td>
<td align="right">0.0865886</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.3095457</td>
<td align="right">0.0882757</td>
<td align="right">3.5065771</td>
<td align="right">0.0004539</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.6333297</td>
<td align="right">0.0865127</td>
<td align="right">7.3206558</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">1.5967322</td>
<td align="right">0.0967364</td>
<td align="right">16.5060174</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">1.4951222</td>
<td align="right">0.1013409</td>
<td align="right">14.7533976</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">1.4522148</td>
<td align="right">0.1040443</td>
<td align="right">13.9576525</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">1.3257585</td>
<td align="right">0.1035297</td>
<td align="right">12.8055884</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">1.6363866</td>
<td align="right">0.1130624</td>
<td align="right">14.4733101</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">1.5080853</td>
<td align="right">0.1120737</td>
<td align="right">13.4561910</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">1.9446929</td>
<td align="right">0.1027111</td>
<td align="right">18.9336280</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">1.8421945</td>
<td align="right">0.1074876</td>
<td align="right">17.1386626</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="right">-1.4787061</td>
<td align="right">0.5738183</td>
<td align="right">-2.5769587</td>
<td align="right">0.0099674</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_l</td>
<td align="right">0.0485743</td>
<td align="right">0.0153569</td>
<td align="right">3.1630310</td>
<td align="right">0.0015614</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0005412</td>
<td align="right">0.0001933</td>
<td align="right">2.7991874</td>
<td align="right">0.0051231</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">inferred_genderw</td>
<td align="right">-0.2966492</td>
<td align="right">0.4798916</td>
<td align="right">-0.6181588</td>
<td align="right">0.5364706</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">news_all_total_l</td>
<td align="right">-0.0003846</td>
<td align="right">0.0017551</td>
<td align="right">-0.2191164</td>
<td align="right">0.8265594</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0040496</td>
<td align="right">0.0014036</td>
<td align="right">2.8850787</td>
<td align="right">0.0039132</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000012</td>
<td align="right">0.0000027</td>
<td align="right">0.4576234</td>
<td align="right">0.6472231</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0018239</td>
<td align="right">0.0014248</td>
<td align="right">1.2801871</td>
<td align="right">0.2004793</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0001884</td>
<td align="right">0.0005337</td>
<td align="right">0.3530157</td>
<td align="right">0.7240767</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2014</td>
<td align="right">0.1690146</td>
<td align="right">0.3650818</td>
<td align="right">0.4629501</td>
<td align="right">0.6434002</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.0561350</td>
<td align="right">0.5489088</td>
<td align="right">-0.1022665</td>
<td align="right">0.9185451</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.1761661</td>
<td align="right">0.6680306</td>
<td align="right">-0.2637096</td>
<td align="right">0.7920037</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2017</td>
<td align="right">1.1585908</td>
<td align="right">0.4508639</td>
<td align="right">2.5697131</td>
<td align="right">0.0101783</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2018</td>
<td align="right">0.9585945</td>
<td align="right">0.4390104</td>
<td align="right">2.1835351</td>
<td align="right">0.0289964</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2019</td>
<td align="right">0.9646312</td>
<td align="right">0.4540814</td>
<td align="right">2.1243574</td>
<td align="right">0.0336403</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2020</td>
<td align="right">0.2471384</td>
<td align="right">0.5506101</td>
<td align="right">0.4488447</td>
<td align="right">0.6535437</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2021</td>
<td align="right">1.9601396</td>
<td align="right">0.6052140</td>
<td align="right">3.2387545</td>
<td align="right">0.0012005</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2022</td>
<td align="right">1.1611705</td>
<td align="right">0.8501515</td>
<td align="right">1.3658395</td>
<td align="right">0.1719894</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2023</td>
<td align="right">1.3728071</td>
<td align="right">0.5336868</td>
<td align="right">2.5723086</td>
<td align="right">0.0101023</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
</tbody>
</table>
</div>
<div id="twitter-1" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Twitter</h3>
<p>Check how many zeroes do we have:</p>
<pre class="r"><code>100*sum(prof_panel_filter$alt_twitter == 0, na.rm = TRUE)/nrow(prof_panel_filter)</code></pre>
<pre><code>## [1] 28.8903</code></pre>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_count_predictions_twitter &lt;- data.frame(matrix(ncol = 7, nrow = 0))
all_count_models_twitter &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_count_comparisons_twitter &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(alt_twitter ~ # professor publication variables
                     alt_twitter_l +  cited_by_total_all_l + 
                     # gender
                     inferred_gender +
                     # attention variables
                     news_all_total_l +
                     alt_online_all_total_l +
                     # coauthor publication variables
                     coa_tot_cited_by_total_l +
                     # coauthor publication variables
                     coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;poisson&#39;)
  
  model_result &lt;- coeftest(news_model, vcov = vcovCL, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  # model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  # model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(summary(news_model)$r.squared,3)
  model_result$field &lt;- field
  
  all_count_models_twitter &lt;- rbind(all_count_models_twitter,
                      model_result)
  
  prediction &lt;- predict_response(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;, 
                                 vcov_type = &quot;HC0&quot;,
                                 vcov.args = list(cluster = field_dataset$profile_id))
  prediction$field &lt;- field
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_count_comparisons_twitter &lt;- rbind(all_count_comparisons_twitter,
                           gender_comparison)
  
  all_count_predictions_twitter &lt;- rbind(all_count_predictions_twitter,
                           prediction)
  
  
}

all_count_models_twitter$stars &lt;- ifelse(all_count_models_twitter$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_count_models_twitter$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_count_models_twitter$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_count_models_twitter$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_count_comparisons_twitter$stars &lt;- ifelse(all_count_comparisons_twitter$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_count_comparisons_twitter$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_count_comparisons_twitter$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_count_comparisons_twitter$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_count_comparisons_twitter$group1 &lt;- str_split_i(all_count_comparisons_twitter$inferred_gender, &quot;-&quot;, 1)
all_count_comparisons_twitter$group2 &lt;- str_split_i(all_count_comparisons_twitter$inferred_gender, &quot;-&quot;, 2)

all_count_comparisons_twitter$p_rounded &lt;- round(all_count_comparisons_twitter$p.value, 4)</code></pre>
<pre class="r"><code>knitr::kable(all_count_models_twitter)</code></pre>
<table style="width:100%;">
<colgroup>
<col width="27%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">2.2376228</td>
<td align="right">0.0831083</td>
<td align="right">26.9241851</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.0006423</td>
<td align="right">0.0000986</td>
<td align="right">6.5131923</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000062</td>
<td align="right">0.0000037</td>
<td align="right">1.7057314</td>
<td align="right">0.0880581</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.1105171</td>
<td align="right">0.1541224</td>
<td align="right">-0.7170733</td>
<td align="right">0.4733289</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0002895</td>
<td align="right">0.0003779</td>
<td align="right">0.7660403</td>
<td align="right">0.4436523</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0005196</td>
<td align="right">0.0001290</td>
<td align="right">4.0274328</td>
<td align="right">0.0000564</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000007</td>
<td align="right">0.0000003</td>
<td align="right">2.0666685</td>
<td align="right">0.0387654</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0000872</td>
<td align="right">0.0000898</td>
<td align="right">-0.9718939</td>
<td align="right">0.3311034</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000182</td>
<td align="right">0.0000173</td>
<td align="right">1.0529624</td>
<td align="right">0.2923582</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.3796414</td>
<td align="right">0.0648820</td>
<td align="right">5.8512578</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.9470650</td>
<td align="right">0.0905225</td>
<td align="right">10.4622082</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">1.4166369</td>
<td align="right">0.1272563</td>
<td align="right">11.1321556</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">1.6597648</td>
<td align="right">0.1067195</td>
<td align="right">15.5525852</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">1.6453962</td>
<td align="right">0.0981872</td>
<td align="right">16.7577474</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">1.8058335</td>
<td align="right">0.1205256</td>
<td align="right">14.9829925</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">1.6884251</td>
<td align="right">0.1421275</td>
<td align="right">11.8796470</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">1.4810086</td>
<td align="right">0.1336430</td>
<td align="right">11.0818308</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">1.6409667</td>
<td align="right">0.0961865</td>
<td align="right">17.0602569</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">1.2507355</td>
<td align="right">0.1265957</td>
<td align="right">9.8797671</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="right">1.7419295</td>
<td align="right">0.1309111</td>
<td align="right">13.3061990</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">alt_twitter_l</td>
<td align="right">0.0010451</td>
<td align="right">0.0001325</td>
<td align="right">7.8878584</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000289</td>
<td align="right">0.0000098</td>
<td align="right">2.9341012</td>
<td align="right">0.0033452</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">inferred_genderw</td>
<td align="right">0.1140011</td>
<td align="right">0.1499455</td>
<td align="right">0.7602832</td>
<td align="right">0.4470853</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">news_all_total_l</td>
<td align="right">0.0004673</td>
<td align="right">0.0002231</td>
<td align="right">2.0943959</td>
<td align="right">0.0362247</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0009244</td>
<td align="right">0.0006979</td>
<td align="right">1.3244950</td>
<td align="right">0.1853387</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000014</td>
<td align="right">0.0000007</td>
<td align="right">2.0271530</td>
<td align="right">0.0426468</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0001016</td>
<td align="right">0.0003803</td>
<td align="right">-0.2672195</td>
<td align="right">0.7893001</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000077</td>
<td align="right">0.0000370</td>
<td align="right">0.2086312</td>
<td align="right">0.8347361</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2014</td>
<td align="right">0.2604817</td>
<td align="right">0.1249479</td>
<td align="right">2.0847227</td>
<td align="right">0.0370945</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2015</td>
<td align="right">0.6219529</td>
<td align="right">0.2139517</td>
<td align="right">2.9069785</td>
<td align="right">0.0036494</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2016</td>
<td align="right">0.6443310</td>
<td align="right">0.1368272</td>
<td align="right">4.7090857</td>
<td align="right">0.0000025</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2017</td>
<td align="right">1.1615876</td>
<td align="right">0.1262611</td>
<td align="right">9.1998835</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2018</td>
<td align="right">1.0822534</td>
<td align="right">0.1865740</td>
<td align="right">5.8006652</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2019</td>
<td align="right">1.3424268</td>
<td align="right">0.1378084</td>
<td align="right">9.7412567</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2020</td>
<td align="right">1.2273237</td>
<td align="right">0.1247691</td>
<td align="right">9.8367631</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2021</td>
<td align="right">1.2584190</td>
<td align="right">0.1276608</td>
<td align="right">9.8575219</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2022</td>
<td align="right">1.1390881</td>
<td align="right">0.1463310</td>
<td align="right">7.7843267</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2023</td>
<td align="right">0.6102015</td>
<td align="right">0.1898603</td>
<td align="right">3.2139505</td>
<td align="right">0.0013092</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">2.9648713</td>
<td align="right">0.0969190</td>
<td align="right">30.5912167</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.0002664</td>
<td align="right">0.0000258</td>
<td align="right">10.3407606</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000146</td>
<td align="right">0.0000065</td>
<td align="right">2.2517660</td>
<td align="right">0.0243371</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.1942472</td>
<td align="right">0.1252658</td>
<td align="right">-1.5506803</td>
<td align="right">0.1209783</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0003322</td>
<td align="right">0.0003918</td>
<td align="right">0.8477925</td>
<td align="right">0.3965535</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0005148</td>
<td align="right">0.0002229</td>
<td align="right">2.3091962</td>
<td align="right">0.0209327</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000003</td>
<td align="right">0.0000004</td>
<td align="right">0.6665503</td>
<td align="right">0.5050594</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0001209</td>
<td align="right">0.0000714</td>
<td align="right">1.6942622</td>
<td align="right">0.0902155</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000081</td>
<td align="right">0.0000104</td>
<td align="right">-0.7734548</td>
<td align="right">0.4392532</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.2260633</td>
<td align="right">0.0629410</td>
<td align="right">3.5916707</td>
<td align="right">0.0003286</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.8393448</td>
<td align="right">0.0729989</td>
<td align="right">11.4980481</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.9812183</td>
<td align="right">0.0705017</td>
<td align="right">13.9176580</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">1.3236549</td>
<td align="right">0.0823057</td>
<td align="right">16.0821818</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">1.6218709</td>
<td align="right">0.0967912</td>
<td align="right">16.7563862</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">1.5674968</td>
<td align="right">0.0958583</td>
<td align="right">16.3522228</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">2.0206755</td>
<td align="right">0.1339647</td>
<td align="right">15.0836386</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">1.6571876</td>
<td align="right">0.1505980</td>
<td align="right">11.0040484</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">1.0516629</td>
<td align="right">0.1482858</td>
<td align="right">7.0921364</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">1.0048672</td>
<td align="right">0.1665236</td>
<td align="right">6.0343821</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">(Intercept)</td>
<td align="right">-2.1218737</td>
<td align="right">0.5229481</td>
<td align="right">-4.0575226</td>
<td align="right">0.0000496</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">alt_twitter_l</td>
<td align="right">0.0127060</td>
<td align="right">0.0022907</td>
<td align="right">5.5468478</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000934</td>
<td align="right">0.0002173</td>
<td align="right">0.4298177</td>
<td align="right">0.6673283</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">inferred_genderw</td>
<td align="right">-0.0318196</td>
<td align="right">0.3135169</td>
<td align="right">-0.1014923</td>
<td align="right">0.9191596</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">news_all_total_l</td>
<td align="right">-0.0025702</td>
<td align="right">0.0016747</td>
<td align="right">-1.5347752</td>
<td align="right">0.1248390</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0053947</td>
<td align="right">0.0051114</td>
<td align="right">1.0554282</td>
<td align="right">0.2912295</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000015</td>
<td align="right">0.0000025</td>
<td align="right">0.5927809</td>
<td align="right">0.5533278</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0066670</td>
<td align="right">0.0114616</td>
<td align="right">-0.5816762</td>
<td align="right">0.5607848</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0004634</td>
<td align="right">0.0011011</td>
<td align="right">0.4208770</td>
<td align="right">0.6738449</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2014</td>
<td align="right">1.2539226</td>
<td align="right">0.5706314</td>
<td align="right">2.1974299</td>
<td align="right">0.0279898</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2015</td>
<td align="right">1.6425373</td>
<td align="right">0.7761230</td>
<td align="right">2.1163364</td>
<td align="right">0.0343162</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2016</td>
<td align="right">1.6989140</td>
<td align="right">0.5412767</td>
<td align="right">3.1387165</td>
<td align="right">0.0016969</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2017</td>
<td align="right">2.4599006</td>
<td align="right">0.4969887</td>
<td align="right">4.9496109</td>
<td align="right">0.0000007</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2018</td>
<td align="right">3.1432010</td>
<td align="right">0.5785291</td>
<td align="right">5.4330908</td>
<td align="right">0.0000001</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2019</td>
<td align="right">3.5137467</td>
<td align="right">0.7415014</td>
<td align="right">4.7386920</td>
<td align="right">0.0000022</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2020</td>
<td align="right">3.4512786</td>
<td align="right">0.5251654</td>
<td align="right">6.5717937</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2021</td>
<td align="right">4.2223078</td>
<td align="right">0.6245405</td>
<td align="right">6.7606627</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2022</td>
<td align="right">3.9200115</td>
<td align="right">0.6150715</td>
<td align="right">6.3732612</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2023</td>
<td align="right">3.5229970</td>
<td align="right">0.5004958</td>
<td align="right">7.0390139</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
</tbody>
</table>
</div>
<div id="write-out-the-models-1" class="section level3" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Write out the
models</h3>
<pre class="r"><code>write_csv(all_count_models_news, &quot;Plots_april/reg_mod_poisson_news.csv&quot;)
write_csv(all_count_models_online_news, &quot;Plots_april/reg_mod_poisson_online_news.csv&quot;)
write_csv(all_count_models_twitter, &quot;Plots_april/reg_mod_poisson_twitter.csv&quot;)</code></pre>
</div>
</div>
<div id="binary-models---any-attention" class="section level2"
number="4.3">
<h2><span class="header-section-number">4.3</span> Binary models - any
attention</h2>
<div id="news-2" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> News</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_bin_models_news &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_bin_comparisons_news &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(any_news ~ # professor publication variables
                     news_all_l + 
                     cited_by_total_all_l + 
                     # gender
                     inferred_gender +
                     # attention variables
                     alt_online_all_total_l + alt_twitter_total_l +
                     # coauthor publication variables
                     coa_tot_cited_by_total_l +
                     # coauthor publication variables
                     coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;binomial&#39;) 
  
  model_result &lt;- coeftest(news_model, type = &quot;HC0&quot;, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(PseudoR2(news_model),3)
  model_result$field &lt;- field
  
  all_bin_models_news &lt;- rbind(all_bin_models_news,
                      model_result)
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;HC0&quot;)
  gender_comparison$field &lt;- field
  
  all_bin_comparisons_news &lt;- rbind(all_bin_comparisons_news,
                           gender_comparison)
  
  
}

all_bin_models_news$stars &lt;- ifelse(all_bin_models_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin_models_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin_models_news$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin_models_news$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin_comparisons_news$stars &lt;- ifelse(all_bin_comparisons_news$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin_comparisons_news$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin_comparisons_news$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin_comparisons_news$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin_comparisons_news$group1 &lt;- str_split_i(all_bin_comparisons_news$inferred_gender, &quot;-&quot;, 1)
all_bin_comparisons_news$group2 &lt;- str_split_i(all_bin_comparisons_news$inferred_gender, &quot;-&quot;, 2)

all_bin_comparisons_news$p_rounded &lt;- round(all_bin_comparisons_news$p.value, 4)</code></pre>
<pre class="r"><code>knitr::kable(all_bin_models_news)</code></pre>
<table>
<colgroup>
<col width="26%" />
<col width="11%" />
<col width="11%" />
<col width="12%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.8356667</td>
<td align="right">0.0512393</td>
<td align="right">-16.3091101</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.3620686</td>
<td align="right">0.0085416</td>
<td align="right">42.3887171</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000240</td>
<td align="right">0.0000033</td>
<td align="right">7.1888135</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.0469983</td>
<td align="right">0.0392064</td>
<td align="right">-1.1987413</td>
<td align="right">0.2306286</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0008406</td>
<td align="right">0.0003113</td>
<td align="right">2.6998210</td>
<td align="right">0.0069377</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000309</td>
<td align="right">0.0000285</td>
<td align="right">1.0845341</td>
<td align="right">0.2781280</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000013</td>
<td align="right">0.0000003</td>
<td align="right">4.4832056</td>
<td align="right">0.0000074</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0001175</td>
<td align="right">0.0001208</td>
<td align="right">0.9731396</td>
<td align="right">0.3304839</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000176</td>
<td align="right">0.0000164</td>
<td align="right">-1.0784799</td>
<td align="right">0.2808196</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.0301944</td>
<td align="right">0.0696702</td>
<td align="right">0.4333900</td>
<td align="right">0.6647315</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.1160130</td>
<td align="right">0.0692433</td>
<td align="right">1.6754405</td>
<td align="right">0.0938478</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.2321055</td>
<td align="right">0.0692134</td>
<td align="right">3.3534770</td>
<td align="right">0.0007980</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.2671738</td>
<td align="right">0.0694761</td>
<td align="right">3.8455498</td>
<td align="right">0.0001203</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.1745926</td>
<td align="right">0.0700301</td>
<td align="right">2.4931088</td>
<td align="right">0.0126630</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.0213019</td>
<td align="right">0.0708225</td>
<td align="right">-0.3007781</td>
<td align="right">0.7635837</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.1752821</td>
<td align="right">0.0721570</td>
<td align="right">-2.4291754</td>
<td align="right">0.0151332</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.1314588</td>
<td align="right">0.0727111</td>
<td align="right">-1.8079617</td>
<td align="right">0.0706125</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.5784141</td>
<td align="right">0.0736879</td>
<td align="right">7.8495121</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.4611399</td>
<td align="right">0.0757720</td>
<td align="right">6.0858886</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1760000</td>
<td align="right">0.1760000</td>
<td align="right">0.1760000</td>
<td align="right">0.1760000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.5054203</td>
<td align="right">0.0602270</td>
<td align="right">-8.3919224</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.3786010</td>
<td align="right">0.0093059</td>
<td align="right">40.6837866</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000052</td>
<td align="right">0.0000077</td>
<td align="right">0.6727201</td>
<td align="right">0.5011254</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.0105154</td>
<td align="right">0.0362352</td>
<td align="right">-0.2901980</td>
<td align="right">0.7716648</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0027717</td>
<td align="right">0.0007056</td>
<td align="right">3.9283219</td>
<td align="right">0.0000855</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000422</td>
<td align="right">0.0000797</td>
<td align="right">0.5292922</td>
<td align="right">0.5966028</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000008</td>
<td align="right">0.0000007</td>
<td align="right">1.1655429</td>
<td align="right">0.2437993</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0008827</td>
<td align="right">0.0003844</td>
<td align="right">-2.2960521</td>
<td align="right">0.0216729</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0001396</td>
<td align="right">0.0000540</td>
<td align="right">2.5860662</td>
<td align="right">0.0097078</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.0511347</td>
<td align="right">0.0800045</td>
<td align="right">0.6391479</td>
<td align="right">0.5227267</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.0171069</td>
<td align="right">0.0799311</td>
<td align="right">-0.2140207</td>
<td align="right">0.8305309</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.1164326</td>
<td align="right">0.0794557</td>
<td align="right">1.4653763</td>
<td align="right">0.1428183</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.0996937</td>
<td align="right">0.0800289</td>
<td align="right">1.2457213</td>
<td align="right">0.2128667</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.2028789</td>
<td align="right">0.0804402</td>
<td align="right">2.5221082</td>
<td align="right">0.0116654</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.0379298</td>
<td align="right">0.0811092</td>
<td align="right">0.4676387</td>
<td align="right">0.6400430</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.0149345</td>
<td align="right">0.0814658</td>
<td align="right">-0.1833225</td>
<td align="right">0.8545450</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.0580575</td>
<td align="right">0.0837587</td>
<td align="right">-0.6931523</td>
<td align="right">0.4882140</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.3514271</td>
<td align="right">0.0866752</td>
<td align="right">4.0545272</td>
<td align="right">0.0000502</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.3387141</td>
<td align="right">0.0878222</td>
<td align="right">3.8568178</td>
<td align="right">0.0001149</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1990000</td>
<td align="right">0.1990000</td>
<td align="right">0.1990000</td>
<td align="right">0.1990000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.7841396</td>
<td align="right">0.0561756</td>
<td align="right">-13.9587209</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.2903799</td>
<td align="right">0.0080731</td>
<td align="right">35.9687193</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000003</td>
<td align="right">0.0000029</td>
<td align="right">0.1100608</td>
<td align="right">0.9123611</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.1029439</td>
<td align="right">0.0355782</td>
<td align="right">-2.8934502</td>
<td align="right">0.0038103</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0006178</td>
<td align="right">0.0002176</td>
<td align="right">2.8391426</td>
<td align="right">0.0045235</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0000067</td>
<td align="right">0.0000186</td>
<td align="right">0.3595870</td>
<td align="right">0.7191560</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000008</td>
<td align="right">0.0000002</td>
<td align="right">3.2834590</td>
<td align="right">0.0010254</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0000169</td>
<td align="right">0.0000830</td>
<td align="right">0.2030865</td>
<td align="right">0.8390674</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000047</td>
<td align="right">0.0000088</td>
<td align="right">0.5309523</td>
<td align="right">0.5954518</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.0001179</td>
<td align="right">0.0757223</td>
<td align="right">-0.0015565</td>
<td align="right">0.9987581</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.0297390</td>
<td align="right">0.0755428</td>
<td align="right">0.3936714</td>
<td align="right">0.6938236</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.1726549</td>
<td align="right">0.0750049</td>
<td align="right">2.3019159</td>
<td align="right">0.0213399</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.2607079</td>
<td align="right">0.0750980</td>
<td align="right">3.4715699</td>
<td align="right">0.0005174</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.1793574</td>
<td align="right">0.0753952</td>
<td align="right">2.3788972</td>
<td align="right">0.0173645</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.0084920</td>
<td align="right">0.0762441</td>
<td align="right">-0.1113792</td>
<td align="right">0.9113157</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.0863107</td>
<td align="right">0.0775271</td>
<td align="right">-1.1132971</td>
<td align="right">0.2655809</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.1999062</td>
<td align="right">0.0797342</td>
<td align="right">-2.5071583</td>
<td align="right">0.0121706</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.7997190</td>
<td align="right">0.0797009</td>
<td align="right">10.0340070</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.8367126</td>
<td align="right">0.0815125</td>
<td align="right">10.2648346</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1490000</td>
<td align="right">0.1490000</td>
<td align="right">0.1490000</td>
<td align="right">0.1490000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.3973493</td>
<td align="right">0.2172152</td>
<td align="right">-1.8292885</td>
<td align="right">0.0673564</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.3586305</td>
<td align="right">0.0305239</td>
<td align="right">11.7491746</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000758</td>
<td align="right">0.0001115</td>
<td align="right">-0.6800959</td>
<td align="right">0.4964438</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.0179192</td>
<td align="right">0.1145856</td>
<td align="right">0.1563827</td>
<td align="right">0.8757314</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">0.0089048</td>
<td align="right">0.0060867</td>
<td align="right">1.4629827</td>
<td align="right">0.1434721</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0011434</td>
<td align="right">0.0016809</td>
<td align="right">0.6802105</td>
<td align="right">0.4963712</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000046</td>
<td align="right">0.0000049</td>
<td align="right">0.9334050</td>
<td align="right">0.3506109</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0031727</td>
<td align="right">0.0027318</td>
<td align="right">-1.1614112</td>
<td align="right">0.2454747</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0004781</td>
<td align="right">0.0005381</td>
<td align="right">0.8885574</td>
<td align="right">0.3742410</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.1366402</td>
<td align="right">0.2810039</td>
<td align="right">0.4862572</td>
<td align="right">0.6267848</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.2950816</td>
<td align="right">0.2772794</td>
<td align="right">-1.0642030</td>
<td align="right">0.2872367</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.0259526</td>
<td align="right">0.2665958</td>
<td align="right">-0.0973482</td>
<td align="right">0.9224499</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.0903570</td>
<td align="right">0.2686188</td>
<td align="right">-0.3363765</td>
<td align="right">0.7365870</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.2956385</td>
<td align="right">0.2701976</td>
<td align="right">1.0941568</td>
<td align="right">0.2738862</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.0150377</td>
<td align="right">0.2749641</td>
<td align="right">0.0546895</td>
<td align="right">0.9563858</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.3368914</td>
<td align="right">0.2774554</td>
<td align="right">-1.2142179</td>
<td align="right">0.2246645</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.6014635</td>
<td align="right">0.2856465</td>
<td align="right">-2.1056222</td>
<td align="right">0.0352372</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.2981960</td>
<td align="right">0.2879249</td>
<td align="right">1.0356729</td>
<td align="right">0.3003548</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.1628390</td>
<td align="right">0.2901447</td>
<td align="right">0.5612336</td>
<td align="right">0.5746383</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1700000</td>
<td align="right">0.1700000</td>
<td align="right">0.1700000</td>
<td align="right">0.1700000</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="online-news-2" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Online News</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_bin_models_online_news &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_bin_comparisons_online_news &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(any_online_news ~ # professor publication variables
                         alt_online_all_l+
                         cited_by_total_all_l + 
                         # gender
                         inferred_gender  +
                         # attention variables
                         news_all_total_l + alt_twitter_total_l +
                         # coauthor publication variables
                         coa_tot_cited_by_total_l +
                         # coauthor publication variables
                         coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;binomial&#39;)  
  
  model_result &lt;- coeftest(news_model, type = &quot;HC0&quot;, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(PseudoR2(news_model),3)
  model_result$field &lt;- field
  
  all_bin_models_online_news &lt;- rbind(all_bin_models_online_news,
                      model_result)
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_bin_comparisons_online_news &lt;- rbind(all_bin_comparisons_online_news,
                           gender_comparison)
  
  
}

all_bin_models_online_news$stars &lt;- ifelse(all_bin_models_online_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin_models_online_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin_models_online_news$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin_models_online_news$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin_comparisons_online_news$stars &lt;- ifelse(all_bin_comparisons_online_news$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin_comparisons_online_news$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin_comparisons_online_news$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin_comparisons_online_news$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin_comparisons_online_news$group1 &lt;- str_split_i(all_bin_comparisons_online_news$inferred_gender, &quot;-&quot;, 1)
all_bin_comparisons_online_news$group2 &lt;- str_split_i(all_bin_comparisons_online_news$inferred_gender, &quot;-&quot;, 2)

all_bin_comparisons_online_news$p_rounded &lt;- round(all_bin_comparisons_online_news$p.value, 4)</code></pre>
<pre class="r"><code>knitr::kable(all_bin_models_online_news)</code></pre>
<table>
<colgroup>
<col width="26%" />
<col width="11%" />
<col width="11%" />
<col width="12%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.2866395</td>
<td align="right">0.0526884</td>
<td align="right">-24.4197762</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.1881991</td>
<td align="right">0.0060806</td>
<td align="right">30.9508857</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0001497</td>
<td align="right">0.0000051</td>
<td align="right">29.1732565</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.3483005</td>
<td align="right">0.0412362</td>
<td align="right">8.4464762</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0002747</td>
<td align="right">0.0001711</td>
<td align="right">1.6057491</td>
<td align="right">0.1083290</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0007022</td>
<td align="right">0.0000993</td>
<td align="right">7.0713111</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000014</td>
<td align="right">0.0000003</td>
<td align="right">4.0447211</td>
<td align="right">0.0000524</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0004835</td>
<td align="right">0.0003688</td>
<td align="right">1.3109397</td>
<td align="right">0.1898781</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0002250</td>
<td align="right">0.0000564</td>
<td align="right">3.9871402</td>
<td align="right">0.0000669</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.0538269</td>
<td align="right">0.0707170</td>
<td align="right">0.7611594</td>
<td align="right">0.4465619</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.0657167</td>
<td align="right">0.0710866</td>
<td align="right">0.9244599</td>
<td align="right">0.3552469</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.2696055</td>
<td align="right">0.0708979</td>
<td align="right">3.8027278</td>
<td align="right">0.0001431</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.1019784</td>
<td align="right">0.0727941</td>
<td align="right">1.4009153</td>
<td align="right">0.1612394</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.0169577</td>
<td align="right">0.0733989</td>
<td align="right">0.2310344</td>
<td align="right">0.8172880</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.0510618</td>
<td align="right">0.0741088</td>
<td align="right">-0.6890116</td>
<td align="right">0.4908160</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.1391930</td>
<td align="right">0.0748286</td>
<td align="right">1.8601576</td>
<td align="right">0.0628632</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.0593792</td>
<td align="right">0.0770588</td>
<td align="right">-0.7705704</td>
<td align="right">0.4409616</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-0.0208981</td>
<td align="right">0.0792762</td>
<td align="right">-0.2636114</td>
<td align="right">0.7920794</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.3272712</td>
<td align="right">0.0821638</td>
<td align="right">-3.9831553</td>
<td align="right">0.0000680</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2550000</td>
<td align="right">0.2550000</td>
<td align="right">0.2550000</td>
<td align="right">0.2550000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.9476433</td>
<td align="right">0.0720823</td>
<td align="right">-27.0197322</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.3257408</td>
<td align="right">0.0120481</td>
<td align="right">27.0367957</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0002585</td>
<td align="right">0.0000123</td>
<td align="right">21.0741134</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.2394018</td>
<td align="right">0.0397650</td>
<td align="right">6.0204104</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0001886</td>
<td align="right">0.0001455</td>
<td align="right">-1.2962337</td>
<td align="right">0.1948950</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0039963</td>
<td align="right">0.0003057</td>
<td align="right">13.0742968</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000033</td>
<td align="right">0.0000010</td>
<td align="right">3.2592007</td>
<td align="right">0.0011173</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0012557</td>
<td align="right">0.0008465</td>
<td align="right">1.4833449</td>
<td align="right">0.1379828</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0003235</td>
<td align="right">0.0000983</td>
<td align="right">3.2892260</td>
<td align="right">0.0010046</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.0798134</td>
<td align="right">0.0949216</td>
<td align="right">0.8408348</td>
<td align="right">0.4004405</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.1034136</td>
<td align="right">0.0937826</td>
<td align="right">1.1026949</td>
<td align="right">0.2701597</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.5006855</td>
<td align="right">0.0900243</td>
<td align="right">5.5616686</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.4204783</td>
<td align="right">0.0911976</td>
<td align="right">4.6106261</td>
<td align="right">0.0000040</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.4402283</td>
<td align="right">0.0911863</td>
<td align="right">4.8277897</td>
<td align="right">0.0000014</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.3754800</td>
<td align="right">0.0923704</td>
<td align="right">4.0649385</td>
<td align="right">0.0000480</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.6719220</td>
<td align="right">0.0913008</td>
<td align="right">7.3594280</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.3999309</td>
<td align="right">0.0953661</td>
<td align="right">4.1936393</td>
<td align="right">0.0000275</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.4895604</td>
<td align="right">0.0970580</td>
<td align="right">5.0439968</td>
<td align="right">0.0000005</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.2796535</td>
<td align="right">0.0999204</td>
<td align="right">2.7987625</td>
<td align="right">0.0051299</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2760000</td>
<td align="right">0.2760000</td>
<td align="right">0.2760000</td>
<td align="right">0.2760000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.7309816</td>
<td align="right">0.0561583</td>
<td align="right">-13.0164486</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.1174024</td>
<td align="right">0.0060711</td>
<td align="right">19.3377757</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0001149</td>
<td align="right">0.0000067</td>
<td align="right">17.0222359</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.2251843</td>
<td align="right">0.0410747</td>
<td align="right">5.4823056</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0000728</td>
<td align="right">0.0001990</td>
<td align="right">0.3656005</td>
<td align="right">0.7146632</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0015021</td>
<td align="right">0.0001417</td>
<td align="right">10.6007081</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000100</td>
<td align="right">0.0000009</td>
<td align="right">11.1495400</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0002471</td>
<td align="right">0.0003529</td>
<td align="right">-0.7002829</td>
<td align="right">0.4837507</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000962</td>
<td align="right">0.0000417</td>
<td align="right">2.3057687</td>
<td align="right">0.0211236</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.1553249</td>
<td align="right">0.0735661</td>
<td align="right">2.1113652</td>
<td align="right">0.0347409</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.4966654</td>
<td align="right">0.0757486</td>
<td align="right">6.5567603</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.5363822</td>
<td align="right">0.0782061</td>
<td align="right">6.8585716</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.1879163</td>
<td align="right">0.0806127</td>
<td align="right">2.3310989</td>
<td align="right">0.0197481</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.1661156</td>
<td align="right">0.0825389</td>
<td align="right">2.0125730</td>
<td align="right">0.0441596</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.2495184</td>
<td align="right">0.0861002</td>
<td align="right">2.8980013</td>
<td align="right">0.0037555</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.1335760</td>
<td align="right">0.0889727</td>
<td align="right">1.5013142</td>
<td align="right">0.1332743</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.2160783</td>
<td align="right">0.0939093</td>
<td align="right">2.3009245</td>
<td align="right">0.0213959</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.4255980</td>
<td align="right">0.1006012</td>
<td align="right">4.2305441</td>
<td align="right">0.0000233</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.1434701</td>
<td align="right">0.1023218</td>
<td align="right">1.4021460</td>
<td align="right">0.1608717</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2470000</td>
<td align="right">0.2470000</td>
<td align="right">0.2470000</td>
<td align="right">0.2470000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-2.6225861</td>
<td align="right">0.3429440</td>
<td align="right">-7.6472715</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.1375591</td>
<td align="right">0.0280638</td>
<td align="right">4.9016559</td>
<td align="right">0.0000010</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0008832</td>
<td align="right">0.0001221</td>
<td align="right">7.2345577</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.1708756</td>
<td align="right">0.1641922</td>
<td align="right">1.0407044</td>
<td align="right">0.2980128</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0007447</td>
<td align="right">0.0008890</td>
<td align="right">0.8377230</td>
<td align="right">0.4021863</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">0.0060870</td>
<td align="right">0.0016892</td>
<td align="right">3.6035136</td>
<td align="right">0.0003139</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000056</td>
<td align="right">0.0000038</td>
<td align="right">-1.4434714</td>
<td align="right">0.1488877</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0012261</td>
<td align="right">0.0027983</td>
<td align="right">0.4381688</td>
<td align="right">0.6612639</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0001527</td>
<td align="right">0.0006296</td>
<td align="right">0.2425684</td>
<td align="right">0.8083398</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.6559612</td>
<td align="right">0.5123080</td>
<td align="right">-1.2804038</td>
<td align="right">0.2004031</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.1685788</td>
<td align="right">0.4272463</td>
<td align="right">0.3945705</td>
<td align="right">0.6931599</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.3817399</td>
<td align="right">0.4491179</td>
<td align="right">-0.8499771</td>
<td align="right">0.3953378</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.4121986</td>
<td align="right">0.3997607</td>
<td align="right">1.0311134</td>
<td align="right">0.3024877</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.1416647</td>
<td align="right">0.4324431</td>
<td align="right">-0.3275915</td>
<td align="right">0.7432206</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.1958544</td>
<td align="right">0.4118192</td>
<td align="right">0.4755835</td>
<td align="right">0.6343711</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.1131309</td>
<td align="right">0.4164351</td>
<td align="right">0.2716650</td>
<td align="right">0.7858796</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.8625315</td>
<td align="right">0.3903039</td>
<td align="right">2.2098970</td>
<td align="right">0.0271123</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.3624762</td>
<td align="right">0.4132741</td>
<td align="right">0.8770844</td>
<td align="right">0.3804408</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.2446931</td>
<td align="right">0.4171243</td>
<td align="right">0.5866190</td>
<td align="right">0.5574596</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1390000</td>
<td align="right">0.1390000</td>
<td align="right">0.1390000</td>
<td align="right">0.1390000</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="twitter-2" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Twitter</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_bin_predictions_twitter &lt;- data.frame(matrix(ncol = 7, nrow = 0))
all_bin_models_twitter &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_bin_comparisons_twitter &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(any_twitter ~ # professor publication variables
                     alt_twitter_l +  cited_by_total_all_l + 
                     # gender
                     inferred_gender +
                     # attention variables
                     news_all_total_l +
                     alt_online_all_total_l +
                     # coauthor publication variables
                     coa_tot_cited_by_total_l +
                     # coauthor publication variables
                     coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;binomial&#39;)
  
  model_result &lt;- coeftest(news_model, type = &quot;HC0&quot;, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(PseudoR2(news_model),3)
  model_result$field &lt;- field
  
  all_bin_models_twitter &lt;- rbind(all_bin_models_twitter,
                      model_result)
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_bin_comparisons_twitter &lt;- rbind(all_bin_comparisons_twitter,
                           gender_comparison)
  
  
}

all_bin_models_twitter$stars &lt;- ifelse(all_bin_models_twitter$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin_models_twitter$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin_models_twitter$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin_models_twitter$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin_comparisons_twitter$stars &lt;- ifelse(all_bin_comparisons_twitter$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin_comparisons_twitter$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin_comparisons_twitter$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin_comparisons_twitter$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin_comparisons_twitter$group1 &lt;- str_split_i(all_bin_comparisons_twitter$inferred_gender, &quot;-&quot;, 1)
all_bin_comparisons_twitter$group2 &lt;- str_split_i(all_bin_comparisons_twitter$inferred_gender, &quot;-&quot;, 2)

all_bin_comparisons_twitter$p_rounded &lt;- round(all_bin_comparisons_twitter$p.value, 4)</code></pre>
<pre class="r"><code>knitr::kable(all_bin_models_twitter)</code></pre>
<table>
<colgroup>
<col width="26%" />
<col width="11%" />
<col width="11%" />
<col width="12%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.2076778</td>
<td align="right">0.0583355</td>
<td align="right">-20.7022810</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.4511110</td>
<td align="right">0.0091909</td>
<td align="right">49.0825757</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000002</td>
<td align="right">0.0000041</td>
<td align="right">-0.0613682</td>
<td align="right">0.9510660</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.0045110</td>
<td align="right">0.0511363</td>
<td align="right">-0.0882146</td>
<td align="right">0.9297061</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0005598</td>
<td align="right">0.0002127</td>
<td align="right">-2.6311874</td>
<td align="right">0.0085087</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0003110</td>
<td align="right">0.0004217</td>
<td align="right">-0.7375317</td>
<td align="right">0.4607991</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000005</td>
<td align="right">0.0000004</td>
<td align="right">1.4399967</td>
<td align="right">0.1498683</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0000815</td>
<td align="right">0.0001833</td>
<td align="right">0.4445774</td>
<td align="right">0.6566252</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000878</td>
<td align="right">0.0000375</td>
<td align="right">-2.3385985</td>
<td align="right">0.0193562</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.0849322</td>
<td align="right">0.0808159</td>
<td align="right">-1.0509349</td>
<td align="right">0.2932885</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.1666062</td>
<td align="right">0.0824349</td>
<td align="right">-2.0210643</td>
<td align="right">0.0432731</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.1465610</td>
<td align="right">0.0838760</td>
<td align="right">-1.7473523</td>
<td align="right">0.0805762</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.1037977</td>
<td align="right">0.0850904</td>
<td align="right">-1.2198526</td>
<td align="right">0.2225207</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.1373068</td>
<td align="right">0.0866979</td>
<td align="right">-1.5837375</td>
<td align="right">0.1132535</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.1178109</td>
<td align="right">0.0875528</td>
<td align="right">-1.3455984</td>
<td align="right">0.1784321</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.0346755</td>
<td align="right">0.0876170</td>
<td align="right">0.3957621</td>
<td align="right">0.6922805</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.1324449</td>
<td align="right">0.0908521</td>
<td align="right">-1.4578074</td>
<td align="right">0.1448936</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-0.1318979</td>
<td align="right">0.0930982</td>
<td align="right">-1.4167612</td>
<td align="right">0.1565528</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.2147427</td>
<td align="right">0.0939936</td>
<td align="right">-2.2846524</td>
<td align="right">0.0223332</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.4710000</td>
<td align="right">0.4710000</td>
<td align="right">0.4710000</td>
<td align="right">0.4710000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.6725422</td>
<td align="right">0.0723271</td>
<td align="right">-23.1246980</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.4405525</td>
<td align="right">0.0102541</td>
<td align="right">42.9636850</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000392</td>
<td align="right">0.0000092</td>
<td align="right">4.2651065</td>
<td align="right">0.0000200</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.0476401</td>
<td align="right">0.0459245</td>
<td align="right">-1.0373561</td>
<td align="right">0.2995699</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0007991</td>
<td align="right">0.0001977</td>
<td align="right">-4.0417791</td>
<td align="right">0.0000530</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0018799</td>
<td align="right">0.0009209</td>
<td align="right">-2.0413057</td>
<td align="right">0.0412204</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000016</td>
<td align="right">0.0000007</td>
<td align="right">2.3633601</td>
<td align="right">0.0181101</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0003035</td>
<td align="right">0.0005343</td>
<td align="right">-0.5680306</td>
<td align="right">0.5700142</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000179</td>
<td align="right">0.0000661</td>
<td align="right">0.2711714</td>
<td align="right">0.7862592</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.0318498</td>
<td align="right">0.0980040</td>
<td align="right">-0.3249848</td>
<td align="right">0.7451926</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.0223829</td>
<td align="right">0.0974216</td>
<td align="right">0.2297528</td>
<td align="right">0.8182839</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.0683117</td>
<td align="right">0.0965385</td>
<td align="right">0.7076112</td>
<td align="right">0.4791867</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.0018816</td>
<td align="right">0.0985370</td>
<td align="right">-0.0190957</td>
<td align="right">0.9847648</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.0666291</td>
<td align="right">0.0998407</td>
<td align="right">-0.6673546</td>
<td align="right">0.5045457</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.1099027</td>
<td align="right">0.0998887</td>
<td align="right">1.1002515</td>
<td align="right">0.2712226</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.1790799</td>
<td align="right">0.0988099</td>
<td align="right">1.8123676</td>
<td align="right">0.0699294</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.1797776</td>
<td align="right">0.1015855</td>
<td align="right">1.7697164</td>
<td align="right">0.0767744</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.2110103</td>
<td align="right">0.1033368</td>
<td align="right">2.0419664</td>
<td align="right">0.0411549</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.0304564</td>
<td align="right">0.1060139</td>
<td align="right">0.2872872</td>
<td align="right">0.7738924</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.4170000</td>
<td align="right">0.4170000</td>
<td align="right">0.4170000</td>
<td align="right">0.4170000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.6699487</td>
<td align="right">0.0766939</td>
<td align="right">-21.7741928</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.4531810</td>
<td align="right">0.0107399</td>
<td align="right">42.1960966</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000023</td>
<td align="right">0.0000049</td>
<td align="right">-0.4721942</td>
<td align="right">0.6367882</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.0625365</td>
<td align="right">0.0558007</td>
<td align="right">1.1207124</td>
<td align="right">0.2624103</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0000568</td>
<td align="right">0.0002454</td>
<td align="right">0.2312997</td>
<td align="right">0.8170820</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0000088</td>
<td align="right">0.0002968</td>
<td align="right">-0.0297885</td>
<td align="right">0.9762357</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000000</td>
<td align="right">0.0000004</td>
<td align="right">0.0502229</td>
<td align="right">0.9599448</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0001439</td>
<td align="right">0.0001354</td>
<td align="right">1.0632433</td>
<td align="right">0.2876716</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000207</td>
<td align="right">0.0000147</td>
<td align="right">-1.4059636</td>
<td align="right">0.1597349</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.1834718</td>
<td align="right">0.1060711</td>
<td align="right">-1.7297052</td>
<td align="right">0.0836830</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.4358203</td>
<td align="right">0.1131110</td>
<td align="right">-3.8530312</td>
<td align="right">0.0001167</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.4756615</td>
<td align="right">0.1165272</td>
<td align="right">-4.0819791</td>
<td align="right">0.0000447</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.4170847</td>
<td align="right">0.1165783</td>
<td align="right">-3.5777201</td>
<td align="right">0.0003466</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.2851655</td>
<td align="right">0.1147071</td>
<td align="right">-2.4860318</td>
<td align="right">0.0129176</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.0965517</td>
<td align="right">0.1128680</td>
<td align="right">-0.8554390</td>
<td align="right">0.3923082</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.1325287</td>
<td align="right">0.1106347</td>
<td align="right">1.1978940</td>
<td align="right">0.2309583</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.1226547</td>
<td align="right">0.1125293</td>
<td align="right">1.0899799</td>
<td align="right">0.2757220</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.1349392</td>
<td align="right">0.1143205</td>
<td align="right">1.1803587</td>
<td align="right">0.2378576</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.1040194</td>
<td align="right">0.1176666</td>
<td align="right">-0.8840182</td>
<td align="right">0.3766864</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.6140000</td>
<td align="right">0.6140000</td>
<td align="right">0.6140000</td>
<td align="right">0.6140000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-3.4146209</td>
<td align="right">0.4663518</td>
<td align="right">-7.3219857</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.3484183</td>
<td align="right">0.0350626</td>
<td align="right">9.9370392</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0002705</td>
<td align="right">0.0001321</td>
<td align="right">2.0483574</td>
<td align="right">0.0405250</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.4348096</td>
<td align="right">0.1491870</td>
<td align="right">2.9145278</td>
<td align="right">0.0035623</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">0.0010274</td>
<td align="right">0.0008270</td>
<td align="right">1.2424534</td>
<td align="right">0.2140693</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0309486</td>
<td align="right">0.0136065</td>
<td align="right">-2.2745439</td>
<td align="right">0.0229333</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000023</td>
<td align="right">0.0000032</td>
<td align="right">-0.7305695</td>
<td align="right">0.4650422</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0102918</td>
<td align="right">0.0065307</td>
<td align="right">1.5759191</td>
<td align="right">0.1150445</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0010530</td>
<td align="right">0.0007878</td>
<td align="right">-1.3365765</td>
<td align="right">0.1813609</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.6260344</td>
<td align="right">0.5574663</td>
<td align="right">1.1229996</td>
<td align="right">0.2614377</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">1.0158189</td>
<td align="right">0.5291385</td>
<td align="right">1.9197598</td>
<td align="right">0.0548883</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">1.1013484</td>
<td align="right">0.5144071</td>
<td align="right">2.1410054</td>
<td align="right">0.0322736</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">1.2899430</td>
<td align="right">0.5091503</td>
<td align="right">2.5335211</td>
<td align="right">0.0112923</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">1.6324530</td>
<td align="right">0.5033138</td>
<td align="right">3.2434098</td>
<td align="right">0.0011811</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">1.7710835</td>
<td align="right">0.5017007</td>
<td align="right">3.5301594</td>
<td align="right">0.0004153</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">1.6766364</td>
<td align="right">0.5063273</td>
<td align="right">3.3113689</td>
<td align="right">0.0009284</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">1.7705915</td>
<td align="right">0.5055899</td>
<td align="right">3.5020307</td>
<td align="right">0.0004617</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">1.5250070</td>
<td align="right">0.5213251</td>
<td align="right">2.9252513</td>
<td align="right">0.0034418</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">1.7051689</td>
<td align="right">0.5168178</td>
<td align="right">3.2993616</td>
<td align="right">0.0009691</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2510000</td>
<td align="right">0.2510000</td>
<td align="right">0.2510000</td>
<td align="right">0.2510000</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="write-out-the-models-2" class="section level3" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Write out the
models</h3>
<pre class="r"><code>write_csv(all_bin_models_news, &quot;Plots_april/reg_mod_bin_news.csv&quot;)
write_csv(all_bin_models_online_news, &quot;Plots_april/reg_mod_bin_online_news.csv&quot;)
write_csv(all_bin_models_twitter, &quot;Plots_april/reg_mod_bin_twitter.csv&quot;)</code></pre>
</div>
</div>
<div id="binary-models---top-10" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Binary models - top
10</h2>
<div id="news-3" class="section level3" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> News</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_bin10_models_news &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_bin10_comparisons_news &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(news_all_top_10 ~ # professor publication variables
                     news_all_l + 
                     cited_by_total_all_l + 
                     # gender
                     inferred_gender +
                     # attention variables
                     alt_online_all_total_l + alt_twitter_total_l +
                     # coauthor publication variables
                     coa_tot_cited_by_total_l +
                     # coauthor publication variables
                     coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;binomial&#39;) 
  
  model_result &lt;- coeftest(news_model, type = &quot;HC0&quot;, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(PseudoR2(news_model),3)
  model_result$field &lt;- field
  
  all_bin10_models_news &lt;- rbind(all_bin10_models_news,
                      model_result)
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;HC0&quot;)
  gender_comparison$field &lt;- field
  
  all_bin10_comparisons_news &lt;- rbind(all_bin10_comparisons_news,
                           gender_comparison)
  
  
}

all_bin10_models_news$stars &lt;- ifelse(all_bin10_models_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin10_models_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin10_models_news$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin10_models_news$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin10_comparisons_news$stars &lt;- ifelse(all_bin10_comparisons_news$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin10_comparisons_news$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin10_comparisons_news$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin10_comparisons_news$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin10_comparisons_news$group1 &lt;- str_split_i(all_bin10_comparisons_news$inferred_gender, &quot;-&quot;, 1)
all_bin10_comparisons_news$group2 &lt;- str_split_i(all_bin10_comparisons_news$inferred_gender, &quot;-&quot;, 2)

all_bin10_comparisons_news$p_rounded &lt;- round(all_bin10_comparisons_news$p.value, 4)</code></pre>
<pre class="r"><code>knitr::kable(all_bin10_models_news)</code></pre>
<table>
<colgroup>
<col width="26%" />
<col width="11%" />
<col width="11%" />
<col width="12%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.4593887</td>
<td align="right">0.1177384</td>
<td align="right">-12.3951819</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.1936867</td>
<td align="right">0.0063989</td>
<td align="right">30.2687258</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000139</td>
<td align="right">0.0000038</td>
<td align="right">-3.6501607</td>
<td align="right">0.0002621</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.1616513</td>
<td align="right">0.1007876</td>
<td align="right">-1.6038816</td>
<td align="right">0.1087402</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0006109</td>
<td align="right">0.0002635</td>
<td align="right">-2.3182185</td>
<td align="right">0.0204374</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0001635</td>
<td align="right">0.0000357</td>
<td align="right">-4.5781390</td>
<td align="right">0.0000047</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000002</td>
<td align="right">0.0000004</td>
<td align="right">0.6157162</td>
<td align="right">0.5380818</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0000425</td>
<td align="right">0.0001119</td>
<td align="right">0.3800092</td>
<td align="right">0.7039386</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000125</td>
<td align="right">0.0000196</td>
<td align="right">-0.6385824</td>
<td align="right">0.5230946</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.0352636</td>
<td align="right">0.1600393</td>
<td align="right">0.2203433</td>
<td align="right">0.8256038</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.0746386</td>
<td align="right">0.1605571</td>
<td align="right">0.4648726</td>
<td align="right">0.6420227</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.0776611</td>
<td align="right">0.1597134</td>
<td align="right">0.4862529</td>
<td align="right">0.6267879</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.2967539</td>
<td align="right">0.1648552</td>
<td align="right">-1.8000884</td>
<td align="right">0.0718467</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.0420132</td>
<td align="right">0.1621205</td>
<td align="right">-0.2591482</td>
<td align="right">0.7955209</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.1459758</td>
<td align="right">0.1661265</td>
<td align="right">-0.8787025</td>
<td align="right">0.3795626</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.2278362</td>
<td align="right">0.1673109</td>
<td align="right">-1.3617540</td>
<td align="right">0.1732755</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.2011551</td>
<td align="right">0.1688789</td>
<td align="right">-1.1911206</td>
<td align="right">0.2336062</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-0.1229764</td>
<td align="right">0.1748501</td>
<td align="right">-0.7033248</td>
<td align="right">0.4818534</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.1938952</td>
<td align="right">0.1820170</td>
<td align="right">-1.0652589</td>
<td align="right">0.2867588</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.3190000</td>
<td align="right">0.3190000</td>
<td align="right">0.3190000</td>
<td align="right">0.3190000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.9063794</td>
<td align="right">0.1480000</td>
<td align="right">-12.8809430</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.1970533</td>
<td align="right">0.0062969</td>
<td align="right">31.2939125</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000631</td>
<td align="right">0.0000140</td>
<td align="right">-4.5201381</td>
<td align="right">0.0000062</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.2963316</td>
<td align="right">0.0972200</td>
<td align="right">-3.0480532</td>
<td align="right">0.0023033</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0010636</td>
<td align="right">0.0007755</td>
<td align="right">-1.3713883</td>
<td align="right">0.1702539</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0002408</td>
<td align="right">0.0001033</td>
<td align="right">-2.3304886</td>
<td align="right">0.0197803</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000047</td>
<td align="right">0.0000018</td>
<td align="right">-2.5852623</td>
<td align="right">0.0097305</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0004155</td>
<td align="right">0.0003770</td>
<td align="right">-1.1021696</td>
<td align="right">0.2703879</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000949</td>
<td align="right">0.0000485</td>
<td align="right">1.9574381</td>
<td align="right">0.0502960</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.0535544</td>
<td align="right">0.1993452</td>
<td align="right">-0.2686518</td>
<td align="right">0.7881977</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.0686629</td>
<td align="right">0.1928611</td>
<td align="right">0.3560226</td>
<td align="right">0.7218236</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.0133320</td>
<td align="right">0.1940827</td>
<td align="right">0.0686926</td>
<td align="right">0.9452343</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.1176011</td>
<td align="right">0.1948099</td>
<td align="right">-0.6036710</td>
<td align="right">0.5460624</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.0617003</td>
<td align="right">0.1957680</td>
<td align="right">-0.3151704</td>
<td align="right">0.7526323</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.0894499</td>
<td align="right">0.1956345</td>
<td align="right">-0.4572296</td>
<td align="right">0.6475060</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.0934700</td>
<td align="right">0.1995287</td>
<td align="right">-0.4684541</td>
<td align="right">0.6394599</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.4573040</td>
<td align="right">0.2186410</td>
<td align="right">-2.0915750</td>
<td align="right">0.0364765</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-0.7915535</td>
<td align="right">0.2326133</td>
<td align="right">-3.4028725</td>
<td align="right">0.0006668</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.2881303</td>
<td align="right">0.2251960</td>
<td align="right">-1.2794643</td>
<td align="right">0.2007336</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.4610000</td>
<td align="right">0.4610000</td>
<td align="right">0.4610000</td>
<td align="right">0.4610000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.1147954</td>
<td align="right">0.1192922</td>
<td align="right">-9.3450816</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.1691692</td>
<td align="right">0.0068068</td>
<td align="right">24.8530034</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000116</td>
<td align="right">0.0000042</td>
<td align="right">-2.7645796</td>
<td align="right">0.0056996</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.0929473</td>
<td align="right">0.0818278</td>
<td align="right">-1.1358892</td>
<td align="right">0.2560030</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0004596</td>
<td align="right">0.0002417</td>
<td align="right">-1.9016578</td>
<td align="right">0.0572159</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0001009</td>
<td align="right">0.0000236</td>
<td align="right">-4.2730275</td>
<td align="right">0.0000193</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000003</td>
<td align="right">0.0000003</td>
<td align="right">0.9421213</td>
<td align="right">0.3461305</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0000787</td>
<td align="right">0.0001007</td>
<td align="right">-0.7818908</td>
<td align="right">0.4342787</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000050</td>
<td align="right">0.0000108</td>
<td align="right">-0.4603239</td>
<td align="right">0.6452838</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.0304472</td>
<td align="right">0.1581931</td>
<td align="right">0.1924684</td>
<td align="right">0.8473753</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.1585483</td>
<td align="right">0.1629725</td>
<td align="right">-0.9728533</td>
<td align="right">0.3306262</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.1161024</td>
<td align="right">0.1569093</td>
<td align="right">-0.7399331</td>
<td align="right">0.4593406</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.1882366</td>
<td align="right">0.1594914</td>
<td align="right">-1.1802300</td>
<td align="right">0.2379088</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.0934056</td>
<td align="right">0.1593951</td>
<td align="right">-0.5860008</td>
<td align="right">0.5578750</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.0180468</td>
<td align="right">0.1655745</td>
<td align="right">-0.1089949</td>
<td align="right">0.9132065</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">0.0348607</td>
<td align="right">0.1679643</td>
<td align="right">0.2075481</td>
<td align="right">0.8355819</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.5279380</td>
<td align="right">0.1839415</td>
<td align="right">-2.8701409</td>
<td align="right">0.0041029</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-0.2432080</td>
<td align="right">0.1921781</td>
<td align="right">-1.2655346</td>
<td align="right">0.2056798</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.1790328</td>
<td align="right">0.1866258</td>
<td align="right">-0.9593141</td>
<td align="right">0.3374005</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2420000</td>
<td align="right">0.2420000</td>
<td align="right">0.2420000</td>
<td align="right">0.2420000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-1.7662343</td>
<td align="right">0.7429778</td>
<td align="right">-2.3772370</td>
<td align="right">0.0174429</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">news_all_l</td>
<td align="right">0.2245362</td>
<td align="right">0.0249805</td>
<td align="right">8.9884608</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0006861</td>
<td align="right">0.0003655</td>
<td align="right">-1.8770801</td>
<td align="right">0.0605071</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.7837961</td>
<td align="right">0.3196778</td>
<td align="right">-2.4518316</td>
<td align="right">0.0142131</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0117272</td>
<td align="right">0.0124088</td>
<td align="right">-0.9450746</td>
<td align="right">0.3446208</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0260823</td>
<td align="right">0.0081619</td>
<td align="right">-3.1956225</td>
<td align="right">0.0013953</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000456</td>
<td align="right">0.0000229</td>
<td align="right">1.9893365</td>
<td align="right">0.0466641</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.1160611</td>
<td align="right">0.0463197</td>
<td align="right">-2.5056522</td>
<td align="right">0.0122226</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0014633</td>
<td align="right">0.0021124</td>
<td align="right">0.6927387</td>
<td align="right">0.4884735</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">1.0670507</td>
<td align="right">0.8801287</td>
<td align="right">1.2123803</td>
<td align="right">0.2253669</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.0616346</td>
<td align="right">0.8371387</td>
<td align="right">-0.0736253</td>
<td align="right">0.9413085</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">0.4624229</td>
<td align="right">0.8202934</td>
<td align="right">0.5637286</td>
<td align="right">0.5729388</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.4515041</td>
<td align="right">0.8067359</td>
<td align="right">0.5596678</td>
<td align="right">0.5757060</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.4681704</td>
<td align="right">0.8416180</td>
<td align="right">0.5562743</td>
<td align="right">0.5780234</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">0.4136174</td>
<td align="right">0.8272997</td>
<td align="right">0.4999607</td>
<td align="right">0.6171027</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.1952005</td>
<td align="right">0.9035383</td>
<td align="right">-0.2160401</td>
<td align="right">0.8289565</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">0.1122544</td>
<td align="right">0.8748859</td>
<td align="right">0.1283075</td>
<td align="right">0.8979056</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.5576844</td>
<td align="right">0.9253361</td>
<td align="right">0.6026830</td>
<td align="right">0.5467196</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">0.7750246</td>
<td align="right">0.9227906</td>
<td align="right">0.8398704</td>
<td align="right">0.4009810</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.4770000</td>
<td align="right">0.4770000</td>
<td align="right">0.4770000</td>
<td align="right">0.4770000</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="online-news-3" class="section level3" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Online News</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_bin10_models_online_news &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_bin10_comparisons_online_news &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(alt_online_all_top_10 ~ # professor publication variables
                         alt_online_all_l+
                         cited_by_total_all_l + 
                         # gender
                         inferred_gender  +
                         # attention variables
                         news_all_total_l + alt_twitter_total_l +
                         # coauthor publication variables
                         coa_tot_cited_by_total_l +
                         # coauthor publication variables
                         coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;binomial&#39;)  
  
  model_result &lt;- coeftest(news_model, type = &quot;HC0&quot;, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(PseudoR2(news_model),3)
  model_result$field &lt;- field
  
  all_bin10_models_online_news &lt;- rbind(all_bin10_models_online_news,
                      model_result)
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_bin10_comparisons_online_news &lt;- rbind(all_bin10_comparisons_online_news,
                           gender_comparison)
  
  
}

all_bin10_models_online_news$stars &lt;- ifelse(all_bin10_models_online_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin10_models_online_news$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin10_models_online_news$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin10_models_online_news$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin10_comparisons_online_news$stars &lt;- ifelse(all_bin10_comparisons_online_news$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin10_comparisons_online_news$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin10_comparisons_online_news$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin10_comparisons_online_news$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin10_comparisons_online_news$group1 &lt;- str_split_i(all_bin10_comparisons_online_news$inferred_gender, &quot;-&quot;, 1)
all_bin10_comparisons_online_news$group2 &lt;- str_split_i(all_bin10_comparisons_online_news$inferred_gender, &quot;-&quot;, 2)

all_bin10_comparisons_online_news$p_rounded &lt;- round(all_bin10_comparisons_online_news$p.value, 4)</code></pre>
<pre class="r"><code>knitr::kable(all_bin10_models_online_news)</code></pre>
<table>
<colgroup>
<col width="26%" />
<col width="11%" />
<col width="11%" />
<col width="12%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.5045903</td>
<td align="right">0.0958581</td>
<td align="right">-5.2639314</td>
<td align="right">0.0000001</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.0353491</td>
<td align="right">0.0018336</td>
<td align="right">19.2780581</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000244</td>
<td align="right">0.0000037</td>
<td align="right">6.5095192</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.1490899</td>
<td align="right">0.0865285</td>
<td align="right">1.7230144</td>
<td align="right">0.0848859</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0014904</td>
<td align="right">0.0002129</td>
<td align="right">-7.0003236</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0000529</td>
<td align="right">0.0000292</td>
<td align="right">-1.8125142</td>
<td align="right">0.0699068</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000010</td>
<td align="right">0.0000003</td>
<td align="right">2.9894885</td>
<td align="right">0.0027944</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0007757</td>
<td align="right">0.0001588</td>
<td align="right">4.8834657</td>
<td align="right">0.0000010</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000527</td>
<td align="right">0.0000216</td>
<td align="right">-2.4461183</td>
<td align="right">0.0144404</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.0410930</td>
<td align="right">0.1330782</td>
<td align="right">-0.3087886</td>
<td align="right">0.7574823</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.1897952</td>
<td align="right">0.1347938</td>
<td align="right">-1.4080411</td>
<td align="right">0.1591189</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.3313590</td>
<td align="right">0.1348954</td>
<td align="right">-2.4564137</td>
<td align="right">0.0140331</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.6574618</td>
<td align="right">0.1392206</td>
<td align="right">-4.7224458</td>
<td align="right">0.0000023</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.7734674</td>
<td align="right">0.1409111</td>
<td align="right">-5.4890473</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.6610980</td>
<td align="right">0.1397995</td>
<td align="right">-4.7289001</td>
<td align="right">0.0000023</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.8172302</td>
<td align="right">0.1422506</td>
<td align="right">-5.7450021</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-1.1976473</td>
<td align="right">0.1501404</td>
<td align="right">-7.9768463</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-1.2699377</td>
<td align="right">0.1576900</td>
<td align="right">-8.0533798</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-1.2427992</td>
<td align="right">0.1638597</td>
<td align="right">-7.5845333</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1780000</td>
<td align="right">0.1780000</td>
<td align="right">0.1780000</td>
<td align="right">0.1780000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.5204956</td>
<td align="right">0.1107837</td>
<td align="right">-4.6983074</td>
<td align="right">0.0000026</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.0861288</td>
<td align="right">0.0054725</td>
<td align="right">15.7385096</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0001795</td>
<td align="right">0.0000133</td>
<td align="right">13.4448024</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.2953047</td>
<td align="right">0.0744003</td>
<td align="right">3.9691304</td>
<td align="right">0.0000721</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0035971</td>
<td align="right">0.0003189</td>
<td align="right">-11.2797835</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0001411</td>
<td align="right">0.0000926</td>
<td align="right">-1.5240773</td>
<td align="right">0.1274894</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000032</td>
<td align="right">0.0000013</td>
<td align="right">2.4590965</td>
<td align="right">0.0139287</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0010629</td>
<td align="right">0.0005507</td>
<td align="right">1.9299184</td>
<td align="right">0.0536169</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000284</td>
<td align="right">0.0000625</td>
<td align="right">-0.4536308</td>
<td align="right">0.6500945</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.2670438</td>
<td align="right">0.1515471</td>
<td align="right">-1.7621175</td>
<td align="right">0.0780494</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.1296690</td>
<td align="right">0.1483529</td>
<td align="right">-0.8740574</td>
<td align="right">0.3820870</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.2394927</td>
<td align="right">0.1486895</td>
<td align="right">-1.6106900</td>
<td align="right">0.1072473</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.5420252</td>
<td align="right">0.1526317</td>
<td align="right">-3.5511972</td>
<td align="right">0.0003835</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.8412981</td>
<td align="right">0.1580198</td>
<td align="right">-5.3240033</td>
<td align="right">0.0000001</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.7754541</td>
<td align="right">0.1545537</td>
<td align="right">-5.0173751</td>
<td align="right">0.0000005</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.9410694</td>
<td align="right">0.1562307</td>
<td align="right">-6.0235888</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-1.1896315</td>
<td align="right">0.1710759</td>
<td align="right">-6.9538245</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-1.3763326</td>
<td align="right">0.1781391</td>
<td align="right">-7.7261683</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-1.4399531</td>
<td align="right">0.1860289</td>
<td align="right">-7.7404790</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2660000</td>
<td align="right">0.2660000</td>
<td align="right">0.2660000</td>
<td align="right">0.2660000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.5516988</td>
<td align="right">0.1061917</td>
<td align="right">-5.1953105</td>
<td align="right">0.0000002</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.0101395</td>
<td align="right">0.0008509</td>
<td align="right">11.9162681</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000361</td>
<td align="right">0.0000041</td>
<td align="right">8.8662245</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.1211564</td>
<td align="right">0.0749290</td>
<td align="right">1.6169489</td>
<td align="right">0.1058893</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0022619</td>
<td align="right">0.0003234</td>
<td align="right">-6.9945820</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0000398</td>
<td align="right">0.0000176</td>
<td align="right">-2.2646791</td>
<td align="right">0.0235324</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000019</td>
<td align="right">0.0000003</td>
<td align="right">6.1399204</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0003278</td>
<td align="right">0.0001110</td>
<td align="right">2.9522784</td>
<td align="right">0.0031544</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0000166</td>
<td align="right">0.0000104</td>
<td align="right">-1.5935067</td>
<td align="right">0.1110466</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.1352674</td>
<td align="right">0.1422588</td>
<td align="right">-0.9508543</td>
<td align="right">0.3416783</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.1451834</td>
<td align="right">0.1444420</td>
<td align="right">-1.0051326</td>
<td align="right">0.3148330</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.4588581</td>
<td align="right">0.1415463</td>
<td align="right">-3.2417516</td>
<td align="right">0.0011880</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.8252257</td>
<td align="right">0.1478752</td>
<td align="right">-5.5805548</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.8601293</td>
<td align="right">0.1495576</td>
<td align="right">-5.7511590</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.7915223</td>
<td align="right">0.1538619</td>
<td align="right">-5.1443680</td>
<td align="right">0.0000003</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-0.8450740</td>
<td align="right">0.1558663</td>
<td align="right">-5.4217872</td>
<td align="right">0.0000001</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-1.2804378</td>
<td align="right">0.1638576</td>
<td align="right">-7.8143305</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-1.2018873</td>
<td align="right">0.1726753</td>
<td align="right">-6.9603890</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-1.6578795</td>
<td align="right">0.1825638</td>
<td align="right">-9.0810958</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1570000</td>
<td align="right">0.1570000</td>
<td align="right">0.1570000</td>
<td align="right">0.1570000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.0436170</td>
<td align="right">0.4523691</td>
<td align="right">0.0964191</td>
<td align="right">0.9231878</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_online_all_l</td>
<td align="right">0.2199190</td>
<td align="right">0.0604127</td>
<td align="right">3.6402774</td>
<td align="right">0.0002723</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0007285</td>
<td align="right">0.0002166</td>
<td align="right">3.3638313</td>
<td align="right">0.0007687</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.2020706</td>
<td align="right">0.2344455</td>
<td align="right">-0.8619086</td>
<td align="right">0.3887378</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0062770</td>
<td align="right">0.0014411</td>
<td align="right">-4.3557615</td>
<td align="right">0.0000133</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_total_l</td>
<td align="right">-0.0010464</td>
<td align="right">0.0017167</td>
<td align="right">-0.6095697</td>
<td align="right">0.5421469</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000077</td>
<td align="right">0.0000068</td>
<td align="right">-1.1414010</td>
<td align="right">0.2537031</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0091699</td>
<td align="right">0.0063881</td>
<td align="right">1.4354756</td>
<td align="right">0.1511516</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0013004</td>
<td align="right">0.0010832</td>
<td align="right">-1.2004736</td>
<td align="right">0.2299555</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-1.2997918</td>
<td align="right">0.6328255</td>
<td align="right">-2.0539499</td>
<td align="right">0.0399805</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.4528212</td>
<td align="right">0.5484585</td>
<td align="right">-0.8256251</td>
<td align="right">0.4090168</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-1.0025703</td>
<td align="right">0.5561641</td>
<td align="right">-1.8026521</td>
<td align="right">0.0714429</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.2807496</td>
<td align="right">0.5209654</td>
<td align="right">-0.5389025</td>
<td align="right">0.5899541</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.5335407</td>
<td align="right">0.5470671</td>
<td align="right">-0.9752747</td>
<td align="right">0.3294240</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.3640846</td>
<td align="right">0.5327908</td>
<td align="right">-0.6833538</td>
<td align="right">0.4943833</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-1.0765504</td>
<td align="right">0.5778239</td>
<td align="right">-1.8631114</td>
<td align="right">0.0624466</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.1979658</td>
<td align="right">0.5465319</td>
<td align="right">-0.3622218</td>
<td align="right">0.7171863</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-1.0816380</td>
<td align="right">0.6090970</td>
<td align="right">-1.7758057</td>
<td align="right">0.0757649</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.5653087</td>
<td align="right">0.5984810</td>
<td align="right">-0.9445725</td>
<td align="right">0.3448772</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.1690000</td>
<td align="right">0.1690000</td>
<td align="right">0.1690000</td>
<td align="right">0.1690000</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="twitter-3" class="section level3" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Twitter</h3>
<p>This time period’s news given one’s total citations/publications,
past total attention, controlling for the field and year (Lexis sample
only). Pooled model with clustered SEs:</p>
<pre class="r"><code>fields &lt;- c(&quot;stem&quot;, &quot;soc_sci&quot;, &quot;medicine&quot;, &quot;arts&quot;)

all_bin10_models_twitter &lt;- data.frame(matrix(ncol = 10, nrow = 0))
all_bin10_comparisons_twitter &lt;- data.frame(matrix(ncol = 6, nrow = 0))

for (field in fields){
  
  field_dataset &lt;- get(field)
  
  news_model &lt;- glm(alt_twitter_top_10 ~ # professor publication variables
                     alt_twitter_l +  cited_by_total_all_l + 
                     # gender
                     inferred_gender +
                     # attention variables
                     news_all_total_l +
                     alt_online_all_total_l +
                     # coauthor publication variables
                     coa_tot_cited_by_total_l +
                     # coauthor publication variables
                     coa_online_news_total_l + coa_twitter_total_l+as.factor(year),
                   data = field_dataset, family = &#39;binomial&#39;)
  
  model_result &lt;- coeftest(news_model, type = &quot;HC0&quot;, cluster = ~profile_id)[,] %&gt;% 
    as.data.frame() %&gt;% 
    tibble::rownames_to_column(var = &quot;term&quot;)
  
  model_result[nrow(model_result)+1, 1] &lt;- &quot;R^2&quot;
  model_result[nrow(model_result), 2:ncol(model_result)] &lt;- round(PseudoR2(news_model),3)
  model_result$field &lt;- field
  
  all_bin10_models_twitter &lt;- rbind(all_bin10_models_twitter,
                      model_result)
  
  gender_comparison &lt;- test_predictions(news_model, c(&quot;inferred_gender&quot;), vcov_fun = &quot;vcovCL&quot;)
  gender_comparison$field &lt;- field
  
  all_bin10_comparisons_twitter &lt;- rbind(all_bin10_comparisons_twitter,
                           gender_comparison)
  
  
}

all_bin10_models_twitter$stars &lt;- ifelse(all_bin10_models_twitter$`Pr(&gt;|z|)` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin10_models_twitter$`Pr(&gt;|z|)` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin10_models_twitter$`Pr(&gt;|z|)` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin10_models_twitter$`Pr(&gt;|z|)` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin10_comparisons_twitter$stars &lt;- ifelse(all_bin10_comparisons_twitter$`p.value` &lt;= 0.001, &quot;***&quot;,
                           ifelse(all_bin10_comparisons_twitter$`p.value` &lt;= 0.001, &quot;**&quot;,
                                  ifelse(all_bin10_comparisons_twitter$`p.value` &lt;= 0.05, &quot;*&quot;,
                                         ifelse(all_bin10_comparisons_twitter$`p.value` &lt;= 0.1, &quot;.&quot;, &quot;&quot;))))

all_bin10_comparisons_twitter$group1 &lt;- str_split_i(all_bin10_comparisons_twitter$inferred_gender, &quot;-&quot;, 1)
all_bin10_comparisons_twitter$group2 &lt;- str_split_i(all_bin10_comparisons_twitter$inferred_gender, &quot;-&quot;, 2)

all_bin10_comparisons_twitter$p_rounded &lt;- round(all_bin10_comparisons_twitter$p.value, 4)</code></pre>
</div>
</div>
<div id="write-out-the-models-3" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Write out the
models</h2>
<pre class="r"><code>write_csv(all_bin10_models_news, &quot;Plots_april/reg_mod_bin10_news.csv&quot;)
write_csv(all_bin10_models_online_news, &quot;Plots_april/reg_mod_bin10_online_news.csv&quot;)
write_csv(all_bin10_models_twitter, &quot;Plots_april/reg_mod_bin10_twitter.csv&quot;)</code></pre>
<pre class="r"><code>knitr::kable(all_bin10_models_twitter)</code></pre>
<table>
<colgroup>
<col width="26%" />
<col width="11%" />
<col width="11%" />
<col width="12%" />
<col width="20%" />
<col width="9%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">z value</th>
<th align="right">Pr(&gt;|z|)</th>
<th align="left">field</th>
<th align="left">stars</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.4081183</td>
<td align="right">0.0980817</td>
<td align="right">-4.1610057</td>
<td align="right">0.0000317</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.0144879</td>
<td align="right">0.0005399</td>
<td align="right">26.8332065</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000069</td>
<td align="right">0.0000035</td>
<td align="right">1.9879231</td>
<td align="right">0.0468202</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">-0.0437047</td>
<td align="right">0.0948927</td>
<td align="right">-0.4605702</td>
<td align="right">0.6451070</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0038940</td>
<td align="right">0.0003689</td>
<td align="right">-10.5567251</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0005596</td>
<td align="right">0.0003523</td>
<td align="right">-1.5884496</td>
<td align="right">0.1121847</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000008</td>
<td align="right">0.0000004</td>
<td align="right">-1.8775314</td>
<td align="right">0.0604453</td>
<td align="left">stem</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0004749</td>
<td align="right">0.0001575</td>
<td align="right">-3.0153748</td>
<td align="right">0.0025666</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000471</td>
<td align="right">0.0000226</td>
<td align="right">2.0826675</td>
<td align="right">0.0372815</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.0181775</td>
<td align="right">0.1360644</td>
<td align="right">0.1335945</td>
<td align="right">0.8937232</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.0969512</td>
<td align="right">0.1385735</td>
<td align="right">-0.6996374</td>
<td align="right">0.4841538</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.3350940</td>
<td align="right">0.1416796</td>
<td align="right">-2.3651533</td>
<td align="right">0.0180226</td>
<td align="left">stem</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.4904803</td>
<td align="right">0.1441818</td>
<td align="right">-3.4018194</td>
<td align="right">0.0006694</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.8029766</td>
<td align="right">0.1520599</td>
<td align="right">-5.2806604</td>
<td align="right">0.0000001</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-1.0881774</td>
<td align="right">0.1611433</td>
<td align="right">-6.7528546</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-1.0244308</td>
<td align="right">0.1577418</td>
<td align="right">-6.4943524</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-1.2924661</td>
<td align="right">0.1685517</td>
<td align="right">-7.6680680</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-1.0151493</td>
<td align="right">0.1705999</td>
<td align="right">-5.9504673</td>
<td align="right">0.0000000</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.7415144</td>
<td align="right">0.1717994</td>
<td align="right">-4.3161641</td>
<td align="right">0.0000159</td>
<td align="left">stem</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2940000</td>
<td align="right">0.2940000</td>
<td align="right">0.2940000</td>
<td align="right">0.2940000</td>
<td align="left">stem</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.0574312</td>
<td align="right">0.1121818</td>
<td align="right">-0.5119472</td>
<td align="right">0.6086880</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.0443317</td>
<td align="right">0.0017746</td>
<td align="right">24.9817953</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000024</td>
<td align="right">0.0000098</td>
<td align="right">-0.2452345</td>
<td align="right">0.8062749</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.1303226</td>
<td align="right">0.0771820</td>
<td align="right">1.6885107</td>
<td align="right">0.0913132</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0045982</td>
<td align="right">0.0003515</td>
<td align="right">-13.0811491</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0026374</td>
<td align="right">0.0006343</td>
<td align="right">-4.1579885</td>
<td align="right">0.0000321</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000013</td>
<td align="right">0.0000012</td>
<td align="right">-1.0831918</td>
<td align="right">0.2787233</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0005528</td>
<td align="right">0.0005094</td>
<td align="right">1.0853130</td>
<td align="right">0.2777831</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">-0.0001225</td>
<td align="right">0.0000692</td>
<td align="right">-1.7695173</td>
<td align="right">0.0768076</td>
<td align="left">soc_sci</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.1875217</td>
<td align="right">0.1544097</td>
<td align="right">-1.2144430</td>
<td align="right">0.2245786</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.3781829</td>
<td align="right">0.1532109</td>
<td align="right">-2.4683815</td>
<td align="right">0.0135726</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.4454416</td>
<td align="right">0.1528396</td>
<td align="right">-2.9144383</td>
<td align="right">0.0035633</td>
<td align="left">soc_sci</td>
<td align="left">*</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.5341768</td>
<td align="right">0.1544326</td>
<td align="right">-3.4589635</td>
<td align="right">0.0005423</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-0.7790251</td>
<td align="right">0.1629700</td>
<td align="right">-4.7801736</td>
<td align="right">0.0000018</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-0.9080773</td>
<td align="right">0.1629395</td>
<td align="right">-5.5730946</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-1.1020459</td>
<td align="right">0.1649186</td>
<td align="right">-6.6823648</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-0.8949330</td>
<td align="right">0.1755175</td>
<td align="right">-5.0988238</td>
<td align="right">0.0000003</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-1.0327111</td>
<td align="right">0.1808984</td>
<td align="right">-5.7087903</td>
<td align="right">0.0000000</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.7310696</td>
<td align="right">0.1793232</td>
<td align="right">-4.0768269</td>
<td align="right">0.0000457</td>
<td align="left">soc_sci</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.3300000</td>
<td align="right">0.3300000</td>
<td align="right">0.3300000</td>
<td align="right">0.3300000</td>
<td align="left">soc_sci</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.4914402</td>
<td align="right">0.1112364</td>
<td align="right">-4.4179798</td>
<td align="right">0.0000100</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.0111036</td>
<td align="right">0.0004064</td>
<td align="right">27.3208817</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">0.0000010</td>
<td align="right">0.0000048</td>
<td align="right">0.2167935</td>
<td align="right">0.8283693</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.0822333</td>
<td align="right">0.0874592</td>
<td align="right">0.9402479</td>
<td align="right">0.3470904</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0046211</td>
<td align="right">0.0005500</td>
<td align="right">-8.4020821</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0011412</td>
<td align="right">0.0003298</td>
<td align="right">-3.4601197</td>
<td align="right">0.0005399</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">0.0000000</td>
<td align="right">0.0000004</td>
<td align="right">0.0282276</td>
<td align="right">0.9774806</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">-0.0002820</td>
<td align="right">0.0001480</td>
<td align="right">-1.9050007</td>
<td align="right">0.0567800</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000283</td>
<td align="right">0.0000139</td>
<td align="right">2.0285122</td>
<td align="right">0.0425080</td>
<td align="left">medicine</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">-0.2539692</td>
<td align="right">0.1484618</td>
<td align="right">-1.7106702</td>
<td align="right">0.0871420</td>
<td align="left">medicine</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">-0.2479159</td>
<td align="right">0.1522465</td>
<td align="right">-1.6283852</td>
<td align="right">0.1034432</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">-0.7963773</td>
<td align="right">0.1548948</td>
<td align="right">-5.1414069</td>
<td align="right">0.0000003</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">-0.9093851</td>
<td align="right">0.1602746</td>
<td align="right">-5.6739176</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">-1.1795440</td>
<td align="right">0.1723184</td>
<td align="right">-6.8451428</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">-1.4785421</td>
<td align="right">0.1929983</td>
<td align="right">-7.6609090</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">-1.3978724</td>
<td align="right">0.1923403</td>
<td align="right">-7.2677037</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">-2.0435860</td>
<td align="right">0.2151163</td>
<td align="right">-9.4999103</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">-1.2770715</td>
<td align="right">0.2055720</td>
<td align="right">-6.2122841</td>
<td align="right">0.0000000</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">-0.8888969</td>
<td align="right">0.1960611</td>
<td align="right">-4.5337754</td>
<td align="right">0.0000058</td>
<td align="left">medicine</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.3720000</td>
<td align="right">0.3720000</td>
<td align="right">0.3720000</td>
<td align="right">0.3720000</td>
<td align="left">medicine</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">-0.8569303</td>
<td align="right">0.5378643</td>
<td align="right">-1.5932092</td>
<td align="right">0.1111133</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">alt_twitter_l</td>
<td align="right">0.0957864</td>
<td align="right">0.0196283</td>
<td align="right">4.8800232</td>
<td align="right">0.0000011</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">cited_by_total_all_l</td>
<td align="right">-0.0000043</td>
<td align="right">0.0002161</td>
<td align="right">-0.0200386</td>
<td align="right">0.9840126</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">inferred_genderw</td>
<td align="right">0.3341218</td>
<td align="right">0.2335392</td>
<td align="right">1.4306883</td>
<td align="right">0.1525196</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">news_all_total_l</td>
<td align="right">-0.0085120</td>
<td align="right">0.0015196</td>
<td align="right">-5.6013638</td>
<td align="right">0.0000000</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="even">
<td align="left">alt_online_all_total_l</td>
<td align="right">-0.0715505</td>
<td align="right">0.0171104</td>
<td align="right">-4.1817054</td>
<td align="right">0.0000289</td>
<td align="left">arts</td>
<td align="left">***</td>
</tr>
<tr class="odd">
<td align="left">coa_tot_cited_by_total_l</td>
<td align="right">-0.0000070</td>
<td align="right">0.0000070</td>
<td align="right">-1.0052451</td>
<td align="right">0.3147788</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">coa_online_news_total_l</td>
<td align="right">0.0110908</td>
<td align="right">0.0099414</td>
<td align="right">1.1156227</td>
<td align="right">0.2645837</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">coa_twitter_total_l</td>
<td align="right">0.0000911</td>
<td align="right">0.0013294</td>
<td align="right">0.0685174</td>
<td align="right">0.9453738</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2014</td>
<td align="right">0.7150243</td>
<td align="right">0.6575588</td>
<td align="right">1.0873921</td>
<td align="right">0.2768636</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2015</td>
<td align="right">0.8140452</td>
<td align="right">0.6213809</td>
<td align="right">1.3100581</td>
<td align="right">0.1901762</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2016</td>
<td align="right">1.1787082</td>
<td align="right">0.6116843</td>
<td align="right">1.9269879</td>
<td align="right">0.0539811</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2017</td>
<td align="right">0.6320590</td>
<td align="right">0.6026853</td>
<td align="right">1.0487381</td>
<td align="right">0.2942987</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2018</td>
<td align="right">0.8946209</td>
<td align="right">0.6290759</td>
<td align="right">1.4221190</td>
<td align="right">0.1549917</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2019</td>
<td align="right">1.0240230</td>
<td align="right">0.6124881</td>
<td align="right">1.6719066</td>
<td align="right">0.0945427</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2020</td>
<td align="right">1.2144276</td>
<td align="right">0.6403149</td>
<td align="right">1.8966101</td>
<td align="right">0.0578794</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2021</td>
<td align="right">1.1710476</td>
<td align="right">0.6371672</td>
<td align="right">1.8378968</td>
<td align="right">0.0660776</td>
<td align="left">arts</td>
<td align="left">.</td>
</tr>
<tr class="even">
<td align="left">as.factor(year)2022</td>
<td align="right">0.9550996</td>
<td align="right">0.6814466</td>
<td align="right">1.4015765</td>
<td align="right">0.1610418</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">as.factor(year)2023</td>
<td align="right">1.5508706</td>
<td align="right">0.6792847</td>
<td align="right">2.2830937</td>
<td align="right">0.0224248</td>
<td align="left">arts</td>
<td align="left">*</td>
</tr>
<tr class="even">
<td align="left">R^2</td>
<td align="right">0.2440000</td>
<td align="right">0.2440000</td>
<td align="right">0.2440000</td>
<td align="right">0.2440000</td>
<td align="left">arts</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="mobility-per-gender" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Mobility per
gender</h1>
<p>Let us look only at people who have entered the dataset before 2012
and limit the dataset to the period after 2012:</p>
<pre class="r"><code>prof_panel_mobility &lt;- filter(prof_panel_filter, first_pub &lt;= 2012 &amp; year &gt;= 2012)

# split the periods into 2
prof_panel_mobility$period &lt;- ifelse(prof_panel_mobility$year &lt;= 2017, &quot;first&quot;, &quot;second&quot;)</code></pre>
<p>Now, select professors’ attention in these years and add it up per
period:</p>
<p>Get transition matrices per gender: (see the “helper_functions.R”
file for the actual function)</p>
<pre class="r"><code>splits &lt;- 10

gender_matrices &lt;- gen_transition_matrix(prof_panel_mobility, split_by = &quot;gender&quot;, brackets = splits)</code></pre>
<p>Get transition matrices per gender and field:</p>
<pre class="r"><code>gender_field_matrices &lt;- gen_transition_matrix(prof_panel_mobility, split_by = &quot;gender &amp; field&quot;, brackets = splits)</code></pre>
<p>Get plots for: ### Overall transitions:</p>
<pre class="r"><code>loop_list &lt;- c(&quot;pub_transitions&quot;, &quot;cit_transitions&quot;,
          &quot;online_news_transitions&quot;, &quot;news_transitions&quot;, 
          &quot;twitter_transitions&quot;)

titles &lt;- c(&quot;Publications&quot;, &quot;Citations&quot;,
            &quot;Online news attention&quot;, &quot;News attention&quot;,
            &quot;Twitter attention&quot;)


color_list &lt;- c(&quot;#fb923c&quot;, &quot;#fbbf24&quot;, &quot;#34d399&quot;, &quot;#22d3ee&quot;, &quot;#818cf8&quot;)

overall_transition_plots &lt;- list()

for (matrix in loop_list){
  matrix_current &lt;- gender_matrices[[matrix]][[&quot;all&quot;]]
  
  plot_current &lt;- matrix_current %&gt;% 
    as.data.frame() %&gt;%
    rownames_to_column(&quot;p1&quot;) %&gt;%
    pivot_longer(-c(p1), names_to = &quot;p2&quot;, values_to = &quot;prob&quot;)%&gt;%
    ggplot(aes(x=as.integer(p1), y=as.integer(p2), fill=prob)) + 
    geom_tile() +
    scale_fill_gradient2(low = &quot;#f87171&quot;, mid = &quot;white&quot;, high = color_list[which(loop_list == matrix)])+
    scale_x_continuous(breaks=seq(0, splits, 1), expand = c(0, 0))+
    scale_y_continuous(breaks=seq(0, splits, 1), trans = &quot;reverse&quot;, expand = c(0, 0))+
    xlab(&quot;Period 1: 2011-2017&quot;)+
    ylab(&quot;Period 2: 2018-2023&quot;)+
    theme_minimal()+
    ggtitle(titles[which(loop_list == matrix)])+
    guides(fill=guide_legend(title=&quot;Probability&quot;))+
    theme(plot.title = element_text(size = 10),
          axis.text.y = element_text(size = 10),
          axis.title.y = element_text(size = 11),
          axis.text.x = element_text(size = 10) ,
          axis.title.x = element_text(size = 11),
          legend.title=element_text(size=10), 
          legend.text=element_text(size=8))
  
  overall_transition_plots[[matrix]] &lt;- plot_current
  
}</code></pre>
<p>Plot these:</p>
<pre class="r"><code>grid.arrange(grobs = overall_transition_plots, ncol = 2)</code></pre>
<p><img src="April_analyses_files/figure-html/unnamed-chunk-75-1.png" width="768" /></p>
<div id="overall-transitions-per-field" class="section level3"
number="5.0.1">
<h3><span class="header-section-number">5.0.1</span> Overall transitions
per field:</h3>
<pre class="r"><code>loop_list &lt;- c(&quot;pub_transitions&quot;, &quot;cit_transitions&quot;,
          &quot;online_news_transitions&quot;, &quot;news_transitions&quot;, 
          &quot;twitter_transitions&quot;)

titles &lt;- c(&quot;Publications&quot;, &quot;Citations&quot;,
            &quot;Online news attention&quot;, &quot;News attention&quot;,
            &quot;Twitter attention&quot;)


color_list &lt;- c(&quot;#fb923c&quot;, &quot;#fbbf24&quot;, &quot;#34d399&quot;, &quot;#22d3ee&quot;, &quot;#818cf8&quot;)

overall_field_transition_plots &lt;- list()

for (matrix in loop_list){
  fields &lt;- c(&quot;STEM&quot;, &quot;Social sciences&quot;, &quot;Medicine&quot;, &quot;Arts &amp; Humanities&quot;)
  
  for (field in fields){
  matrix_current &lt;- gender_field_matrices[[matrix]][[field]][[&quot;all&quot;]]
  
  plot_current &lt;- matrix_current %&gt;% 
    as.data.frame() %&gt;%
    rownames_to_column(&quot;p1&quot;) %&gt;%
    pivot_longer(-c(p1), names_to = &quot;p2&quot;, values_to = &quot;prob&quot;)%&gt;%
    ggplot(aes(x=as.integer(p1), y=as.integer(p2), fill=prob)) + 
    geom_tile() +
    scale_fill_gradient2(low = &quot;#f87171&quot;, mid = &quot;white&quot;, high = color_list[which(loop_list == matrix)])+
    scale_x_continuous(breaks=seq(0, splits, 1), expand = c(0, 0))+
    scale_y_continuous(breaks=seq(0, splits, 1), trans = &quot;reverse&quot;, expand = c(0, 0))+
    xlab(&quot;Period 1: 2011-2017&quot;)+
    ylab(&quot;Period 2: 2018-2023&quot;)+
    theme_minimal()+
    ggtitle(titles[which(loop_list == matrix)])+
    guides(fill=guide_legend(title=&quot;Probability&quot;))+
  theme(plot.title = element_text(size = 10),
        axis.text.y = element_text(size = 9),
        axis.title.y = element_text(size = 10),
        axis.text.x = element_text(size = 9) ,
        axis.title.x = element_text(size = 10),
        legend.title=element_text(size=10), 
        legend.text=element_text(size=8))
  
  overall_field_transition_plots[[field]][[matrix]] &lt;- plot_current
  
  }
  
}</code></pre>
<p>Prepare transition plots per field:</p>
<pre class="r"><code>plot1 &lt;- overall_field_transition_plots[[&#39;STEM&#39;]][4][[&quot;news_transitions&quot;]]+ggtitle(&quot;(i) News attention&quot;)
plot2 &lt;- overall_field_transition_plots[[&#39;STEM&#39;]][3][[&quot;online_news_transitions&quot;]]+ggtitle(&quot;(ii) Online attention&quot;)
plot3 &lt;- overall_field_transition_plots[[&#39;STEM&#39;]][5][[&quot;twitter_transitions&quot;]]+ggtitle(&quot;(iii) Twitter attention&quot;)

# now add the title
title &lt;- ggdraw() + 
  draw_label(
    &quot;(a) STEM&quot;,
    x = 0,
    hjust = 0
  ) +
  theme(
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    plot.margin = margin(0, 0, 0, 7)
  )
stem &lt;- plot_grid(plot1,
                  plot2,
                  plot3, ncol = 3, nrow = 1)

stem &lt;- plot_grid(
  title, stem,
  ncol = 1,
  # rel_heights values control vertical title margins
  rel_heights = c(0.1, 1)
)

plot1 &lt;- overall_field_transition_plots[[&#39;Social sciences&#39;]][4][[&quot;news_transitions&quot;]]+ggtitle(&quot;(i) News attention&quot;)
plot2 &lt;- overall_field_transition_plots[[&#39;Social sciences&#39;]][3][[&quot;online_news_transitions&quot;]]+ggtitle(&quot;(ii) Online attention&quot;)
plot3 &lt;- overall_field_transition_plots[[&#39;Social sciences&#39;]][5][[&quot;twitter_transitions&quot;]]+ggtitle(&quot;(iii) Twitter attention&quot;)

soc_sci &lt;- plot_grid(plot1,
                     plot2,
                     plot3, ncol = 3, nrow = 1)

title &lt;- ggdraw() + 
  draw_label(
    &quot;(b) Social science&quot;,
    x = 0,
    hjust = 0
  ) +
  theme(
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    plot.margin = margin(0, 0, 0, 7)
  )

soc_sci &lt;- plot_grid(
  title, soc_sci,
  ncol = 1,
  # rel_heights values control vertical title margins
  rel_heights = c(0.1, 1)
)

plot1 &lt;- overall_field_transition_plots[[&#39;Medicine&#39;]][4][[&quot;news_transitions&quot;]]+ggtitle(&quot;(i) News attention&quot;)
plot2 &lt;- overall_field_transition_plots[[&#39;Medicine&#39;]][3][[&quot;online_news_transitions&quot;]]+ggtitle(&quot;(ii) Online attention&quot;)
plot3 &lt;- overall_field_transition_plots[[&#39;Medicine&#39;]][5][[&quot;twitter_transitions&quot;]]+ggtitle(&quot;(iii) Twitter attention&quot;)

medicine &lt;- plot_grid(plot1,
          plot2,
          plot3, ncol = 3, nrow = 1)

title &lt;- ggdraw() + 
  draw_label(
    &quot;(c) Medicine&quot;,
    x = 0,
    hjust = 0
  ) +
  theme(
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    plot.margin = margin(0, 0, 0, 7)
  )

medicine &lt;- plot_grid(
  title, medicine,
  ncol = 1,
  # rel_heights values control vertical title margins
  rel_heights = c(0.1, 1)
)

plot1 &lt;- overall_field_transition_plots[[&#39;Arts &amp; Humanities&#39;]][4][[&quot;news_transitions&quot;]]+ggtitle(&quot;(i) News attention&quot;)
plot2 &lt;- overall_field_transition_plots[[&#39;Arts &amp; Humanities&#39;]][3][[&quot;online_news_transitions&quot;]]+ggtitle(&quot;(ii) Online attention&quot;)
plot3 &lt;- overall_field_transition_plots[[&#39;Arts &amp; Humanities&#39;]][5][[&quot;twitter_transitions&quot;]]+ggtitle(&quot;(iii) Twitter attention&quot;)

arts_hum &lt;- plot_grid(plot1,
          plot2,
          plot3, ncol = 3, nrow = 1)

title &lt;- ggdraw() + 
  draw_label(
    &quot;(d) Arts &amp; Humanities&quot;,
    x = 0,
    hjust = 0
  ) +
  theme(
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    plot.margin = margin(0, 0, 0, 7)
  )

arts_hum &lt;- plot_grid(
  title, arts_hum,
  ncol = 1,
  # rel_heights values control vertical title margins
  rel_heights = c(0.1, 1)
)</code></pre>
<p>Save the plot:</p>
<pre class="r"><code>ggsave(file=&quot;Plots_april/Supplemental/P_overall_transitions.png&quot;, 
       grid.arrange(stem, soc_sci,
                    medicine, arts_hum,
                    ncol = 1, nrow = 4),
       width = 10,
       height = 10,
       units = &quot;in&quot;)</code></pre>
<p><img src="April_analyses_files/figure-html/unnamed-chunk-78-1.png" width="960" /></p>
</div>
<div id="differences-in-transitions" class="section level3"
number="5.0.2">
<h3><span class="header-section-number">5.0.2</span> Differences in
transitions:</h3>
<pre class="r"><code>loop_list &lt;- c(&quot;online_news_transitions&quot;, &quot;news_transitions&quot;, 
          &quot;twitter_transitions&quot;)

titles &lt;- c(&quot;Online news attention&quot;, &quot;News attention&quot;,
            &quot;Twitter attention&quot;)


color_list &lt;- c(&quot;#fb923c&quot;, &quot;#fbbf24&quot;, &quot;#34d399&quot;, &quot;#22d3ee&quot;, &quot;#818cf8&quot;)
color_list2 &lt;- c(&quot;#fff7ed&quot;, &quot;#fffbeb&quot;, &quot;#ecfdf5&quot;, &quot;#ecfeff&quot;, &quot;#eef2ff&quot;)

overall_diff_plots &lt;- list()

for (matrix in loop_list){
  matrix_current_men &lt;- gender_matrices[[matrix]][[&quot;men&quot;]]
  matrix_current_women &lt;- gender_matrices[[matrix]][[&quot;women&quot;]]
  matrix_diff &lt;- matrix_current_women - matrix_current_men
  plot_current &lt;- matrix_diff %&gt;% 
    as.data.frame() %&gt;%
    rownames_to_column(&quot;p1&quot;) %&gt;%
    pivot_longer(-c(p1), names_to = &quot;p2&quot;, values_to = &quot;prob&quot;)%&gt;%
    ggplot(aes(x=as.integer(p1), y=as.integer(p2), fill=prob)) + 
    geom_tile() +
    scale_fill_gradient2(low = &quot;#f87171&quot;, mid = &quot;white&quot;, high = color_list[which(loop_list == matrix)])+
    scale_x_continuous(breaks=seq(0, splits, 1), expand = c(0, 0))+
    scale_y_continuous(breaks=seq(0, splits, 1), trans = &quot;reverse&quot;, expand = c(0, 0))+
    xlab(&quot;p_1&quot;)+
    ylab(&quot;p_2&quot;)+
    theme_minimal()+
    ggtitle(titles[which(loop_list == matrix)])+
    guides(fill=guide_legend(title=&quot;Diff. (w - m)&quot;))
  
  overall_diff_plots[[matrix]] &lt;- plot_current
  
}</code></pre>
<p>Plot these:</p>
<pre class="r"><code>grid.arrange(grobs = overall_diff_plots, ncol = 3)</code></pre>
<p><img src="April_analyses_files/figure-html/unnamed-chunk-80-1.png" width="1152" /></p>
<p>Differences per field:</p>
<pre class="r"><code>loop_list &lt;- c(&quot;pub_transitions&quot;, &quot;cit_transitions&quot;,
          &quot;online_news_transitions&quot;, &quot;news_transitions&quot;, 
          &quot;twitter_transitions&quot;)

titles &lt;- c(&quot;Publications&quot;, &quot;Citations&quot;,
            &quot;Online news attention&quot;, &quot;News attention&quot;,
            &quot;Twitter attention&quot;)


color_list &lt;- c(&quot;#fb923c&quot;, &quot;#fbbf24&quot;, &quot;#34d399&quot;, &quot;#22d3ee&quot;, &quot;#818cf8&quot;)

overall_field_transition_plots_diff &lt;- list()

for (matrix in loop_list){
  fields &lt;- c(&quot;STEM&quot;, &quot;Social sciences&quot;, &quot;Medicine&quot;, &quot;Arts &amp; Humanities&quot;)
  
  for (field in fields){
  matrix_current_men &lt;- gender_field_matrices[[matrix]][[field]][[&quot;men&quot;]]
  matrix_current_women &lt;- gender_field_matrices[[matrix]][[field]][[&quot;women&quot;]]
  matrix_diff &lt;- matrix_current_women - matrix_current_men
  
  plot_current &lt;- matrix_diff %&gt;% 
    as.data.frame() %&gt;%
    rownames_to_column(&quot;p1&quot;) %&gt;%
    pivot_longer(-c(p1), names_to = &quot;p2&quot;, values_to = &quot;prob&quot;)%&gt;%
    ggplot(aes(x=as.integer(p1), y=as.integer(p2), fill=prob)) + 
    geom_tile() +
    scale_fill_gradient2(low = &quot;#f87171&quot;, mid = &quot;white&quot;, high = color_list[which(loop_list == matrix)], limits=c(-0.4, 0.4), breaks=seq(round(-0.4, 1),round(0.4,1),by=0.2))+
    scale_x_continuous(breaks=seq(0, splits, 1), expand = c(0, 0))+
    scale_y_continuous(breaks=seq(0, splits, 1), trans = &quot;reverse&quot;, expand = c(0, 0))+
    xlab(&quot;Period 1: 2011-2017&quot;)+
    ylab(&quot;Period 2: 2018-2023&quot;)+
    theme_minimal()+
    ggtitle(titles[which(loop_list == matrix)])+
    guides(fill=guide_legend(title=&quot;Prob. diff. (w-m)&quot;))+
  theme(plot.title = element_text(size = 10),
        axis.text.y = element_text(size = 9),
        axis.title.y = element_text(size = 10),
        axis.text.x = element_text(size = 9) ,
        axis.title.x = element_text(size = 10),
        legend.title=element_text(size=10), 
        legend.text=element_text(size=8))
  
  overall_field_transition_plots_diff[[field]][[matrix]] &lt;- plot_current
  
  }
  
}</code></pre>
<p>Prepare transition difference plots per field:</p>
<pre class="r"><code>plot1 &lt;- overall_field_transition_plots_diff[[&#39;STEM&#39;]][4][[&quot;news_transitions&quot;]]+ggtitle(&quot;(i) News attention&quot;)
plot2 &lt;- overall_field_transition_plots_diff[[&#39;STEM&#39;]][3][[&quot;online_news_transitions&quot;]]+ggtitle(&quot;(ii) Online attention&quot;)
plot3 &lt;- overall_field_transition_plots_diff[[&#39;STEM&#39;]][5][[&quot;twitter_transitions&quot;]]+ggtitle(&quot;(iii) Twitter attention&quot;)

# now add the title
title &lt;- ggdraw() + 
  draw_label(
    &quot;(a) STEM&quot;,
    x = 0,
    hjust = 0
  ) +
  theme(
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    plot.margin = margin(0, 0, 0, 7)
  )
stem &lt;- plot_grid(plot1,
                  plot2,
                  plot3, ncol = 3, nrow = 1)

stem &lt;- plot_grid(
  title, stem,
  ncol = 1,
  # rel_heights values control vertical title margins
  rel_heights = c(0.1, 1)
)

plot1 &lt;- overall_field_transition_plots_diff[[&#39;Social sciences&#39;]][4][[&quot;news_transitions&quot;]]+ggtitle(&quot;(i) News attention&quot;)
plot2 &lt;- overall_field_transition_plots_diff[[&#39;Social sciences&#39;]][3][[&quot;online_news_transitions&quot;]]+ggtitle(&quot;(ii) Online attention&quot;)
plot3 &lt;- overall_field_transition_plots_diff[[&#39;Social sciences&#39;]][5][[&quot;twitter_transitions&quot;]]+ggtitle(&quot;(iii) Twitter attention&quot;)

soc_sci &lt;- plot_grid(plot1,
                     plot2,
                     plot3, ncol = 3, nrow = 1)

title &lt;- ggdraw() + 
  draw_label(
    &quot;(b) Social science&quot;,
    x = 0,
    hjust = 0
  ) +
  theme(
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    plot.margin = margin(0, 0, 0, 7)
  )

soc_sci &lt;- plot_grid(
  title, soc_sci,
  ncol = 1,
  # rel_heights values control vertical title margins
  rel_heights = c(0.1, 1)
)

plot1 &lt;- overall_field_transition_plots_diff[[&#39;Medicine&#39;]][4][[&quot;news_transitions&quot;]]+ggtitle(&quot;(i) News attention&quot;)
plot2 &lt;- overall_field_transition_plots_diff[[&#39;Medicine&#39;]][3][[&quot;online_news_transitions&quot;]]+ggtitle(&quot;(ii) Online attention&quot;)
plot3 &lt;- overall_field_transition_plots_diff[[&#39;Medicine&#39;]][5][[&quot;twitter_transitions&quot;]]+ggtitle(&quot;(iii) Twitter attention&quot;)

medicine &lt;- plot_grid(plot1,
          plot2,
          plot3, ncol = 3, nrow = 1)

title &lt;- ggdraw() + 
  draw_label(
    &quot;(c) Medicine&quot;,
    x = 0,
    hjust = 0
  ) +
  theme(
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    plot.margin = margin(0, 0, 0, 7)
  )

medicine &lt;- plot_grid(
  title, medicine,
  ncol = 1,
  # rel_heights values control vertical title margins
  rel_heights = c(0.1, 1)
)

plot1 &lt;- overall_field_transition_plots_diff[[&#39;Arts &amp; Humanities&#39;]][4][[&quot;news_transitions&quot;]]+ggtitle(&quot;(i) News attention&quot;)
plot2 &lt;- overall_field_transition_plots_diff[[&#39;Arts &amp; Humanities&#39;]][3][[&quot;online_news_transitions&quot;]]+ggtitle(&quot;(ii) Online attention&quot;)
plot3 &lt;- overall_field_transition_plots_diff[[&#39;Arts &amp; Humanities&#39;]][5][[&quot;twitter_transitions&quot;]]+ggtitle(&quot;(iii) Twitter attention&quot;)

arts_hum &lt;- plot_grid(plot1,
          plot2,
          plot3, ncol = 3, nrow = 1)

title &lt;- ggdraw() + 
  draw_label(
    &quot;(d) Arts &amp; Humanities&quot;,
    x = 0,
    hjust = 0
  ) +
  theme(
    # add margin on the left of the drawing canvas,
    # so title is aligned with left edge of first plot
    plot.margin = margin(0, 0, 0, 7)
  )

arts_hum &lt;- plot_grid(
  title, arts_hum,
  ncol = 1,
  # rel_heights values control vertical title margins
  rel_heights = c(0.1, 1)
)</code></pre>
<p>Save the plot:</p>
<pre class="r"><code>ggsave(file=&quot;Plots_april/Supplemental/P_transition_diff.png&quot;, 
       grid.arrange(stem, soc_sci,
                    medicine, arts_hum,
                    ncol = 1, nrow = 4),
       width = 10,
       height = 10,
       units = &quot;in&quot;)</code></pre>
<p><img src="April_analyses_files/figure-html/unnamed-chunk-83-1.png" width="960" /></p>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlZhcmlvdXMgYW5hbHlzZXMgLSBBcHJpbCAyMDI0LCBmaW5hbCBkYXRhc2V0Ig0KYXV0aG9yOiAiQW5hIE1hY2Fub3ZpYyINCmRhdGU6ICIyMDI0LTA0LTEwIg0Kb3V0cHV0OiBodG1sX2RvY3VtZW50DQotLS0NCg0KYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9DQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpDQprbml0cjo6b3B0c19jaHVuayRzZXQoZXZhbCA9IFRSVUUpDQprbml0cjo6b3B0c19jaHVuayRzZXQod2FybmluZyA9IEZBTFNFKQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KG1lc3NhZ2UgPSBGQUxTRSkNCmBgYA0KDQoNClRoaXMgaXMgYSBmaXJzdCBkcmFmdCBvZiBvdXIgbWFpbiBhbmFseXNlcy4NCg0KTG9hZCB0aGUgcGFja2FnZXM6DQpgYGB7ciBtZXNzYWdlPSAgRiwgd2FybmluZyA9IEYsIGV2YWwgPSBUfQ0KbGlicmFyeShncm91bmRob2cpDQpwYWNrYWdlc190b19sb2FkIDwtIGMoInJlYWRyIiwgImRwbHlyIiwgInRpZHlyIiwgDQogICAgICAgICAgICAgICAgICAgICAgImdncGxvdDIiLCAiZ3JpZEV4dHJhIiwgImNvd3Bsb3QiLA0KICAgICAgICAgICAgICAgICAgICAgICJ0aWR5dmVyc2UiLCAiUlBvc3RncmVzIiwgIm1hcmtvdmNoYWluIg0KICAgICAgICAgICAgICAgICAgICAgICwgIlJQb3N0Z3JlcyIsICJsdWJyaWRhdGUiLCAicHN5Y2giLA0KICAgICAgICAgICAgICAgICAgICAgICJncmlkRXh0cmEiLCAiRGVzY1Rvb2xzIiwgIm1hcmdpbmFsZWZmZWN0cyIsDQogICAgICAgICAgICAgICAgICAgICAgInBhbmVsciIsICJza2ltciIsICJtYXJnaW5zIiwNCiAgICAgICAgICAgICAgICAgICAgICAibG10ZXN0IiwgInNhbmR3aWNoIiwgInJzdGF0aXgiLCAiZ2dwdWJyIiwNCiAgICAgICAgICAgICAgICAgICAgICAic3RhcmdhemVyIiwicGxtIiwgImdyaWQiKQ0KZ3JvdW5kaG9nLmxpYnJhcnkocGFja2FnZXNfdG9fbG9hZCwgZGF0ZSA9ICIyMDIzLTEyLTAxIikNCiNncm91bmRob2cubGlicmFyeShjKCJnZ2VmZmVjdHMiLCAiaW5zaWdodCIpLCBkYXRlID0gIjIwMjQtMDQtMTUiKQ0KDQppbnN0YWxsLnBhY2thZ2VzKCJpbnNpZ2h0IikNCmxpYnJhcnkoaW5zaWdodCkNCmxpYnJhcnkoZ2dlZmZlY3RzKQ0Kc291cmNlKCJoZWxwZXJfZnVuY3Rpb25zLlIiKQ0KYGBgDQoNCkxvYWQgdGhlIHBhbmVsOg0KYGBge3Igd2FybmluZyA9IEYsIG1lc3NhZ2UgPSBGfQ0KcHJvZl9wYW5lbF9jb2EgPC0gcmVhZF9jc3YoInBhbmVsX2RhdGFzZXRzL3Byb2ZfcGFuZWxfdGlkeV8yNl80LmNzdiIpDQoNCnByb2ZfcGFuZWxfZmlsdGVyIDwtIGZpbHRlcihwcm9mX3BhbmVsX2NvYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyIDwgMjAyNCkNCmBgYA0KDQoNCiMgRXhwbG9yZSByZXByZXNlbnRhdGlvbiBhY3Jvc3MgZGlmZmVyZW50IGRhdGEgc291cmNlczoNCmBgYHtyfQ0Kc291cmNlc19jaGVjayA8LSBwcm9mX3BhbmVsX2ZpbHRlciAlPiUNCiAgZ3JvdXBfYnkocHJvZmlsZV9pZCklPiUNCiAgZmlsdGVyKHllYXIgPT0gbWF4KHllYXIpKQ0KYGBgDQoNCiMjIE5ld3MgZGF0YQ0KDQpIb3cgbWFueSBwcm9mZXNzb3JzIGhhdmUgYXQgbGVhc3Qgb25lIG1lbnRpb24/DQpgYGB7cn0NCnNvdXJjZXNfY2hlY2skYW55X25ld3MgPC0gaWZlbHNlKHNvdXJjZXNfY2hlY2skbmV3c19hbGxfdG90YWwgPiAwLCBUUlVFLCBGQUxTRSkNCg0KdGFibGUoc291cmNlc19jaGVjayRhbnlfbmV3cykNCnByb3AudGFibGUodGFibGUoc291cmNlc19jaGVjayRhbnlfbmV3cykpDQpgYGANCjk2JSBvZiBwcm9mZXNzb3JzIGluIG91ciBkYXRhIC0gNjQ5OSBvZiB0aGVtLCBoYXMgYXQgbGVhc3Qgb25lIG5ld3MgbWVudGlvbi4NCg0KT24gYXZlcmFnZSwgYSBwcm9mZXNzb3IgaW4gb3VyIGRhdGFzZXQgaGFzIGFjY3VtdWxhdGVkIDY4LjkgbWVudGlvbnMgdGhyb3VnaG91dA0KdGhlaXIgY2FyZWVyOg0KYGBge3J9DQptZWFuKHNvdXJjZXNfY2hlY2skbmV3c19hbGxfdG90YWwsIG5hLnJtID0gVFJVRSkNCmBgYA0KT3IsIDIuNjUgbWVudGlvbnMgcGVyIHllYXI6DQpgYGB7cn0NCm1lYW4ocHJvZl9wYW5lbF9maWx0ZXIkbmV3c19hbGxhbGwsIG5hLnJtID0gVFJVRSkNCmBgYA0KDQoNCg0KQnJlYWtkb3duIGJ5IG5ld3MgYXJ0aWNsZSB0eXBlOg0KYGBge3IsIGZpZy53aWR0aD0xMiwgd2FybmluZyA9IEYsIG1lc3NhZ2UgPSBGfQ0KbmV3c190eXBlX3NvdXJjZSA8LSBzb3VyY2VzX2NoZWNrICU+JQ0KICBzZWxlY3QocHJvZmlsZV9pZCwgZ2VuZXJhbF9maWVsZCwgZW50cnlfYmF0Y2hfMjAyMywgaW5mZXJyZWRfZ2VuZGVyLCBuZXdzX25hdGlvbmFsX3RvdGFsOm5ld3NfaW50bF90b3RhbCkNCiNuZXdzX3R5cGUkbmV3c19hbGxfdG90YWwgPC0gcm93U3VtcyhuZXdzX3R5cGVbLCA1OjldKQ0KY29sbmFtZXMobmV3c190eXBlX3NvdXJjZSkgPC0gc3RyX3JlbW92ZShzdHJfcmVtb3ZlKHN0cl9yZW1vdmUoY29sbmFtZXMobmV3c190eXBlX3NvdXJjZSksICJuZXdzXyIpLCAiX3RvdGFsIiksICJsZXhpc18iKQ0KY29sbmFtZXMobmV3c190eXBlX3NvdXJjZSlbNTo4XSA8LSBjKCJOYXRpb25hbCBuZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUmVnaW9uYWwgbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk90aGVyIG5ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJJbnRlcm5hdGlvbmFsIG5ld3MiKQ0KDQpuZXdzX3R5cGUgPC0gbmV3c190eXBlX3NvdXJjZSAlPiUNCiAgcGl2b3RfbG9uZ2VyKGNvbHMgPSBjKGBOYXRpb25hbCBuZXdzYDpgSW50ZXJuYXRpb25hbCBuZXdzYCkpJT4lDQogIGZpbHRlcighaXMubmEoZ2VuZXJhbF9maWVsZCkpJT4lDQogIGdyb3VwX2J5KGdlbmVyYWxfZmllbGQsIGluZmVycmVkX2dlbmRlciwgbmFtZSklPiUNCiAgc3VtbWFyaXNlKA0KICAgIHByb2ZzID0gbigpLA0KICAgIHN1bSA9IHN1bSh2YWx1ZSwgbmEucm0gPSBUUlVFKSklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IGluZmVycmVkX2dlbmRlciwgdmFsdWVzX2Zyb20gPSBjKHByb2ZzLHN1bSkpJT4lDQogIGdyb3VwX2J5KGdlbmVyYWxfZmllbGQpJT4lDQogIG11dGF0ZShtX3Byb3AgPSByb3VuZChzdW1fbS9zdW0oc3VtX20sIG5hLnJtID0gVFJVRSksMyksDQogICAgICAgICB3X3Byb3AgPSByb3VuZChzdW1fdy9zdW0oc3VtX3csIG5hLnJtID0gVFJVRSksIDMpLA0KICAgICAgICAgbV9hdmUgPSByb3VuZChzdW1fbS9wcm9mc19tLCAzKSwNCiAgICAgICAgIHdfYXZlID0gcm91bmQoc3VtX3cvcHJvZnNfdywgMykpDQoNCm5ld3Nfb3ZlcmFsbCA8LSBuZXdzX3R5cGVfc291cmNlICU+JQ0KICBwaXZvdF9sb25nZXIoY29scyA9IGMoYE5hdGlvbmFsIG5ld3NgOmBJbnRlcm5hdGlvbmFsIG5ld3NgKSklPiUNCiAgZmlsdGVyKCFpcy5uYShnZW5lcmFsX2ZpZWxkKSklPiUNCiAgZ3JvdXBfYnkoZ2VuZXJhbF9maWVsZCwgaW5mZXJyZWRfZ2VuZGVyKSU+JQ0KICBzdW1tYXJpc2UoDQogICAgcHJvZnMgPSBuX2Rpc3RpbmN0KHByb2ZpbGVfaWQpLA0KICAgIHN1bSA9IHN1bSh2YWx1ZSwgbmEucm0gPSBUUlVFKSklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IGluZmVycmVkX2dlbmRlciwgdmFsdWVzX2Zyb20gPSBjKHByb2ZzLHN1bSkpJT4lDQogIG11dGF0ZShtX3Byb3AgPSByb3VuZChzdW1fbS9zdW0oc3VtX20pLDMpLA0KICAgICAgICAgd19wcm9wID0gcm91bmQoc3VtX3cvc3VtKHN1bV93KSwgMyksDQogICAgICAgICBtX2F2ZSA9IHJvdW5kKHN1bV9tL3Byb2ZzX20sIDMpLA0KICAgICAgICAgd19hdmUgPSByb3VuZChzdW1fdy9wcm9mc193LCAzKSkNCg0KbmV3c19vdmVyYWxsJG5hbWUgPC0gIkFsbCBuZXdzIg0KbmV3c19vdmVyYWxsIDwtIG5ld3Nfb3ZlcmFsbFtjb2xuYW1lcyhuZXdzX3R5cGUpXQ0KDQpuZXdzX3R5cGUgPC0gcmJpbmQobmV3c190eXBlLA0KICAgICAgICAgICAgICAgICAgIG5ld3Nfb3ZlcmFsbCkNCg0KbmV3c19vdmVyYWxsX292ZXJhbGwgPC0gbmV3c190eXBlX3NvdXJjZSAlPiUNCiAgcGl2b3RfbG9uZ2VyKGNvbHMgPSBjKGBOYXRpb25hbCBuZXdzYDpgSW50ZXJuYXRpb25hbCBuZXdzYCkpJT4lDQogIGZpbHRlcighaXMubmEoZ2VuZXJhbF9maWVsZCkpJT4lDQogIGdyb3VwX2J5KGluZmVycmVkX2dlbmRlciklPiUNCiAgc3VtbWFyaXNlKA0KICAgIHByb2ZzID0gbl9kaXN0aW5jdChwcm9maWxlX2lkKSwNCiAgICBzdW0gPSBzdW0odmFsdWUsIG5hLnJtID0gVFJVRSkpJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSBpbmZlcnJlZF9nZW5kZXIsIHZhbHVlc19mcm9tID0gYyhwcm9mcyxzdW0pKSU+JQ0KICBtdXRhdGUobV9wcm9wID0gcm91bmQoc3VtX20vc3VtKHN1bV9tKSwzKSwNCiAgICAgICAgIHdfcHJvcCA9IHJvdW5kKHN1bV93L3N1bShzdW1fdyksIDMpLA0KICAgICAgICAgbV9hdmUgPSByb3VuZChzdW1fbS9wcm9mc19tLCAzKSwNCiAgICAgICAgIHdfYXZlID0gcm91bmQoc3VtX3cvcHJvZnNfdywgMykpDQoNCm5ld3Nfb3ZlcmFsbF9vdmVyYWxsJG5hbWUgPC0gIkFsbCBuZXdzIg0KbmV3c19vdmVyYWxsX292ZXJhbGwkZ2VuZXJhbF9maWVsZCA8LSAiQWxsIGZpZWxkcyINCm5ld3Nfb3ZlcmFsbF9vdmVyYWxsIDwtIG5ld3Nfb3ZlcmFsbF9vdmVyYWxsW2NvbG5hbWVzKG5ld3NfdHlwZSldDQoNCm5ld3NfdHlwZSA8LSByYmluZChuZXdzX3R5cGUsDQogICAgICAgICAgICAgICAgICAgbmV3c19vdmVyYWxsX292ZXJhbGwpDQoNCg0KbmV3c190eXBlIDwtIG5ld3NfdHlwZSAlPiUNCiAgYXJyYW5nZShnZW5lcmFsX2ZpZWxkLCBuYW1lKSU+JQ0KICBzZWxlY3QoZ2VuZXJhbF9maWVsZDpzdW1fdywgbV9hdmUsIHdfYXZlLCBtX3Byb3AsIHdfcHJvcCkNCg0KY29sbmFtZXMobmV3c190eXBlKSA8LSBjKCJGaWVsZCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIk5ld3MgdHlwZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIk4gcHJvZmVzc29ycyAtIG1lbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIk4gcHJvZmVzc29ycyAtIHdvbWVuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiTmV3cyBtZW50aW9ucyAtIG1lbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIk5ld3MgbWVudGlvbnMgLSB3b21lbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIkF2Zy4gbmV3cyBtZW50aW9ucyAtIG1lbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIkF2Zy4gbmV3cyBtZW50aW9ucyAtIHdvbWVuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiU2hhcmUgbWVudGlvbnMgcGVyIHNvdXJjZSAtIG1lbiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgIlNoYXJlIG1lbnRpb25zIHBlciBzb3VyY2UgLSB3b21lbiIpDQoNCiMgb3V0cHV0IHRvIHJlc3VsdHMNCndyaXRlX2NzdihuZXdzX3R5cGUsICJQbG90c19hcHJpbC9TdXBwbGVtZW50YWwvVF9uZXdzX3NvdXJjZS5jc3YiKQ0Ka25pdHI6OmthYmxlKG5ld3NfdHlwZSkNCmBgYA0KDQojIyBBbHRtZXRyaWMgZGF0YQ0KDQpIb3cgbWFueSBwcm9mZXNzb3JzIGhhdmUgYXQgbGVhc3Qgb25lIG1lbnRpb24/DQpgYGB7cn0NCnNvdXJjZXNfY2hlY2skYW55X2FsdCA8LSBpZmVsc2Uoc291cmNlc19jaGVjayRhbHRfb25saW5lX2FsbF90b3RhbCA+IDAsIFRSVUUsIEZBTFNFKQ0KDQp0YWJsZShzb3VyY2VzX2NoZWNrJGFueV9hbHQpDQpwcm9wLnRhYmxlKHRhYmxlKHNvdXJjZXNfY2hlY2skYW55X2FsdCkpDQpgYGANCjc4JSBvZiBwcm9mZXNzb3JzIGluIG91ciBkYXRhIC0gNTMwMSBvZiB0aGVtLCBoYXMgYXQgbGVhc3Qgb25lIG5ld3MgbWVudGlvbi4NCg0KT24gYXZlcmFnZSwgYSBwcm9mZXNzb3IgaW4gb3VyIGRhdGFzZXQgaGFzIGFjY3VtdWxhdGVkIDEwMi43IG9ubGluZSBtZW50aW9ucyB0aHJvdWdob3V0DQp0aGVpciBjYXJlZXI6DQpgYGB7cn0NCm1lYW4oc291cmNlc19jaGVjayRhbHRfb25saW5lX2FsbF90b3RhbCwgbmEucm0gPSBUUlVFKQ0KYGBgDQpPciwgOC4zIG1lbnRpb25zIHBlciB5ZWFyOg0KYGBge3J9DQptZWFuKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfYWxsLCBuYS5ybSA9IFRSVUUpDQpgYGANCg0KQ2hlY2sgdGhlIGF2ZXJhZ2VzIGJyZWFrZG93bjoNCmBgYHtyLCBmaWcud2lkdGg9MTIsIHdhcm5pbmcgPSBGLCBtZXNzYWdlID0gRn0NCm9ubGluZV9uZXdzX3R5cGVfc291cmNlIDwtIHNvdXJjZXNfY2hlY2sgJT4lDQogIHNlbGVjdChwcm9maWxlX2lkLCBnZW5lcmFsX2ZpZWxkLCBlbnRyeV9iYXRjaF8yMDIzLCBpbmZlcnJlZF9nZW5kZXIsIGFsdF9uZXdzX2FnZ3JlZ2F0b3JfdG90YWw6YWx0X3NjaWVuY2VfbmV3c190b3RhbCkNCiNuZXdzX3R5cGUkbmV3c19hbGxfdG90YWwgPC0gcm93U3VtcyhuZXdzX3R5cGVbLCA1OjldKQ0KY29sbmFtZXMob25saW5lX25ld3NfdHlwZV9zb3VyY2UpIDwtIHN0cl9yZW1vdmUoc3RyX3JlbW92ZShzdHJfcmVtb3ZlKGNvbG5hbWVzKG9ubGluZV9uZXdzX3R5cGVfc291cmNlKSwgImFsdF8iKSwgIl90b3RhbCIpLCAibGV4aXNfIikNCmNvbG5hbWVzKG9ubGluZV9uZXdzX3R5cGVfc291cmNlKVs1OjE0XSA8LSBjKCJOZXdzIGFnZ3JlZ2F0b3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJPbmxpbmUgYmxvZyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNjaWVuY2UgbmV3cyBhZ2dyZWdhdG9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRmluYW5jZSBuZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiR2VuZXJhbCBpbnRlcmVzdCAtIGxvY2FsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiR2VuZXJhbCBpbnRlcmVzdCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1lZGljYWwgcG9ydGFscyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk90aGVyIG5ld3MiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQb3B1bGFyIHNjaWVuY2UgbmV3cyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlNjaWVuY2UgbmV3cyIpDQoNCm9ubGluZV9uZXdzX3R5cGUgPC0gb25saW5lX25ld3NfdHlwZV9zb3VyY2UgJT4lDQogIHBpdm90X2xvbmdlcihjb2xzID0gYyhgTmV3cyBhZ2dyZWdhdG9yYDpgU2NpZW5jZSBuZXdzYCkpJT4lDQogIGZpbHRlcighaXMubmEoZ2VuZXJhbF9maWVsZCkpJT4lDQogIGdyb3VwX2J5KGdlbmVyYWxfZmllbGQsIGluZmVycmVkX2dlbmRlciwgbmFtZSklPiUNCiAgc3VtbWFyaXNlKA0KICAgIHByb2ZzID0gbigpLA0KICAgIHN1bSA9IHN1bSh2YWx1ZSwgbmEucm0gPSBUUlVFKSklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IGluZmVycmVkX2dlbmRlciwgdmFsdWVzX2Zyb20gPSBjKHByb2ZzLHN1bSkpJT4lDQogIGdyb3VwX2J5KGdlbmVyYWxfZmllbGQpJT4lDQogIG11dGF0ZShtX3Byb3AgPSByb3VuZChzdW1fbS9zdW0oc3VtX20pLDMpLA0KICAgICAgICAgd19wcm9wID0gcm91bmQoc3VtX3cvc3VtKHN1bV93KSwgMyksDQogICAgICAgICBtX2F2ZSA9IHJvdW5kKHN1bV9tL3Byb2ZzX20sIDMpLA0KICAgICAgICAgd19hdmUgPSByb3VuZChzdW1fdy9wcm9mc193LCAzKSkNCg0Kb25saW5lX25ld3Nfb3ZlcmFsbCA8LSBvbmxpbmVfbmV3c190eXBlX3NvdXJjZSAlPiUNCiAgcGl2b3RfbG9uZ2VyKGNvbHMgPSBjKGBOZXdzIGFnZ3JlZ2F0b3JgOmBTY2llbmNlIG5ld3NgKSklPiUNCiAgZmlsdGVyKCFpcy5uYShnZW5lcmFsX2ZpZWxkKSklPiUNCiAgZ3JvdXBfYnkoZ2VuZXJhbF9maWVsZCwgaW5mZXJyZWRfZ2VuZGVyKSU+JQ0KICBzdW1tYXJpc2UoDQogICAgcHJvZnMgPSBuX2Rpc3RpbmN0KHByb2ZpbGVfaWQpLA0KICAgIHN1bSA9IHN1bSh2YWx1ZSwgbmEucm0gPSBUUlVFKSklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IGluZmVycmVkX2dlbmRlciwgdmFsdWVzX2Zyb20gPSBjKHByb2ZzLHN1bSkpJT4lDQogIG11dGF0ZShtX3Byb3AgPSByb3VuZChzdW1fbS9zdW0oc3VtX20pLDMpLA0KICAgICAgICAgd19wcm9wID0gcm91bmQoc3VtX3cvc3VtKHN1bV93KSwgMyksDQogICAgICAgICBtX2F2ZSA9IHJvdW5kKHN1bV9tL3Byb2ZzX20sIDMpLA0KICAgICAgICAgd19hdmUgPSByb3VuZChzdW1fdy9wcm9mc193LCAzKSkNCg0Kb25saW5lX25ld3Nfb3ZlcmFsbCRuYW1lIDwtICJBbGwgbmV3cyINCm9ubGluZV9uZXdzX292ZXJhbGwgPC0gb25saW5lX25ld3Nfb3ZlcmFsbFtjb2xuYW1lcyhvbmxpbmVfbmV3c190eXBlKV0NCg0Kb25saW5lX25ld3NfdHlwZSA8LSByYmluZChvbmxpbmVfbmV3c190eXBlLA0KICAgICAgICAgICAgICAgICAgIG9ubGluZV9uZXdzX292ZXJhbGwpDQoNCm9ubGluZV9uZXdzX292ZXJhbGxfb3ZlcmFsbCA8LSBvbmxpbmVfbmV3c190eXBlX3NvdXJjZSAlPiUNCiAgcGl2b3RfbG9uZ2VyKGNvbHMgPSBjKGBOZXdzIGFnZ3JlZ2F0b3JgOmBTY2llbmNlIG5ld3NgKSklPiUNCiAgZmlsdGVyKCFpcy5uYShnZW5lcmFsX2ZpZWxkKSklPiUNCiAgZ3JvdXBfYnkoaW5mZXJyZWRfZ2VuZGVyKSU+JQ0KICBzdW1tYXJpc2UoDQogICAgcHJvZnMgPSBuX2Rpc3RpbmN0KHByb2ZpbGVfaWQpLA0KICAgIHN1bSA9IHN1bSh2YWx1ZSwgbmEucm0gPSBUUlVFKSklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IGluZmVycmVkX2dlbmRlciwgdmFsdWVzX2Zyb20gPSBjKHByb2ZzLHN1bSkpJT4lDQogIG11dGF0ZShtX3Byb3AgPSByb3VuZChzdW1fbS9zdW0oc3VtX20pLDMpLA0KICAgICAgICAgd19wcm9wID0gcm91bmQoc3VtX3cvc3VtKHN1bV93KSwgMyksDQogICAgICAgICBtX2F2ZSA9IHJvdW5kKHN1bV9tL3Byb2ZzX20sIDMpLA0KICAgICAgICAgd19hdmUgPSByb3VuZChzdW1fdy9wcm9mc193LCAzKSkNCg0Kb25saW5lX25ld3Nfb3ZlcmFsbF9vdmVyYWxsJG5hbWUgPC0gIkFsbCBuZXdzIg0Kb25saW5lX25ld3Nfb3ZlcmFsbF9vdmVyYWxsJGdlbmVyYWxfZmllbGQgPC0gIkFsbCBmaWVsZHMiDQpvbmxpbmVfbmV3c19vdmVyYWxsX292ZXJhbGwgPC0gb25saW5lX25ld3Nfb3ZlcmFsbF9vdmVyYWxsW2NvbG5hbWVzKG9ubGluZV9uZXdzX3R5cGUpXQ0KDQpvbmxpbmVfbmV3c190eXBlIDwtIHJiaW5kKG9ubGluZV9uZXdzX3R5cGUsDQogICAgICAgICAgICAgICAgICAgb25saW5lX25ld3Nfb3ZlcmFsbF9vdmVyYWxsKQ0KDQpvbmxpbmVfbmV3c190eXBlIDwtIG9ubGluZV9uZXdzX3R5cGUgJT4lDQogIGFycmFuZ2UoZ2VuZXJhbF9maWVsZCwgbmFtZSklPiUNCiAgc2VsZWN0KGdlbmVyYWxfZmllbGQ6c3VtX3csIG1fYXZlLCB3X2F2ZSwgbV9wcm9wLCB3X3Byb3ApDQoNCmNvbG5hbWVzKG9ubGluZV9uZXdzX3R5cGUpIDwtIGMoIkZpZWxkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiTmV3cyB0eXBlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiTiBwcm9mZXNzb3JzIC0gbWVuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiTiBwcm9mZXNzb3JzIC0gd29tZW4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJOZXdzIG1lbnRpb25zIC0gbWVuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiTmV3cyBtZW50aW9ucyAtIHdvbWVuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiQXZnLiBuZXdzIG1lbnRpb25zIC0gbWVuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiQXZnLiBuZXdzIG1lbnRpb25zIC0gd29tZW4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICJTaGFyZSBtZW50aW9ucyBwZXIgc291cmNlIC0gbWVuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAiU2hhcmUgbWVudGlvbnMgcGVyIHNvdXJjZSAtIHdvbWVuIikNCg0KIyBvdXRwdXQgdG8gcmVzdWx0cw0Kd3JpdGVfY3N2KG9ubGluZV9uZXdzX3R5cGUsICJQbG90c19hcHJpbC9TdXBwbGVtZW50YWwvVF9vbmxpbmVfbmV3c19zb3VyY2UuY3N2IikNCmtuaXRyOjprYWJsZShvbmxpbmVfbmV3c190eXBlKQ0KYGBgDQoNCiMjIFR3aXR0ZXIgZGF0YQ0KDQpIb3cgbWFueSBwcm9mZXNzb3JzIGhhdmUgYXQgbGVhc3Qgb25lIG1lbnRpb24/DQpgYGB7cn0NCnNvdXJjZXNfY2hlY2skYW55X2FsdCA8LSBpZmVsc2Uoc291cmNlc19jaGVjayRhbHRfdHdpdHRlciA+IDAsIFRSVUUsIEZBTFNFKQ0KDQp0YWJsZShzb3VyY2VzX2NoZWNrJGFueV9hbHQpDQpwcm9wLnRhYmxlKHRhYmxlKHNvdXJjZXNfY2hlY2skYW55X2FsdCkpDQpgYGANCjc4JSBvZiBwcm9mZXNzb3JzIGluIG91ciBkYXRhIC0gNTMwMSBvZiB0aGVtLCBoYXMgYXQgbGVhc3Qgb25lIG5ld3MgbWVudGlvbi4NCg0KT24gYXZlcmFnZSwgYSBwcm9mZXNzb3IgaW4gb3VyIGRhdGFzZXQgaGFzIGFjY3VtdWxhdGVkIDEwMi43IG9ubGluZSBtZW50aW9ucyB0aHJvdWdob3V0DQp0aGVpciBjYXJlZXI6DQpgYGB7cn0NCm1lYW4oc291cmNlc19jaGVjayRhbHRfb25saW5lX2FsbF90b3RhbCwgbmEucm0gPSBUUlVFKQ0KYGBgDQpPciwgOC4zIG1lbnRpb25zIHBlciB5ZWFyOg0KYGBge3J9DQptZWFuKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfYWxsLCBuYS5ybSA9IFRSVUUpDQpgYGANCg0KYGBge3IsIGZpZy53aWR0aD0xMiwgd2FybmluZyA9IEYsIG1lc3NhZ2UgPSBGfQ0KdHdpdHRlcl90eXBlX3NvdXJjZSA8LSBzb3VyY2VzX2NoZWNrICU+JQ0KICBzZWxlY3QocHJvZmlsZV9pZCwgZ2VuZXJhbF9maWVsZCwgZW50cnlfYmF0Y2hfMjAyMywgaW5mZXJyZWRfZ2VuZGVyLCBhbHRfdHdpdHRlcl90b3RhbCkNCiNuZXdzX3R5cGUkbmV3c19hbGxfdG90YWwgPC0gcm93U3VtcyhuZXdzX3R5cGVbLCA1OjldKQ0KY29sbmFtZXModHdpdHRlcl90eXBlX3NvdXJjZSkgPC0gc3RyX3JlbW92ZShzdHJfcmVtb3ZlKHN0cl9yZW1vdmUoY29sbmFtZXModHdpdHRlcl90eXBlX3NvdXJjZSksICJhbHRfIiksICJfdG90YWwiKSwgImxleGlzXyIpDQpjb2xuYW1lcyh0d2l0dGVyX3R5cGVfc291cmNlKVs1XSA8LSBjKCJUd2l0dGVyIikNCg0KdHdpdHRlcl90eXBlIDwtIHR3aXR0ZXJfdHlwZV9zb3VyY2UgJT4lDQogIHBpdm90X2xvbmdlcihjb2xzID0gYyhgVHdpdHRlcmApKSU+JQ0KICBmaWx0ZXIoIWlzLm5hKGdlbmVyYWxfZmllbGQpKSU+JQ0KICBncm91cF9ieShnZW5lcmFsX2ZpZWxkLCBpbmZlcnJlZF9nZW5kZXIpJT4lDQogIHN1bW1hcmlzZSgNCiAgICBwcm9mcyA9IG4oKSwNCiAgICBzdW0gPSBzdW0odmFsdWUsIG5hLnJtID0gVFJVRSkpJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSBpbmZlcnJlZF9nZW5kZXIsIHZhbHVlc19mcm9tID0gYyhwcm9mcyxzdW0pKSU+JQ0KICBncm91cF9ieShnZW5lcmFsX2ZpZWxkKSU+JQ0KICBtdXRhdGUobV9wcm9wID0gcm91bmQoc3VtX20vc3VtKHN1bV9tKSwzKSwNCiAgICAgICAgIHdfcHJvcCA9IHJvdW5kKHN1bV93L3N1bShzdW1fdyksIDMpLA0KICAgICAgICAgbV9hdmUgPSByb3VuZChzdW1fbS9wcm9mc19tLCAzKSwNCiAgICAgICAgIHdfYXZlID0gcm91bmQoc3VtX3cvcHJvZnNfdywgMykpDQoNCnR3aXR0ZXJfb3ZlcmFsbCA8LSB0d2l0dGVyX3R5cGVfc291cmNlICU+JQ0KICBwaXZvdF9sb25nZXIoY29scyA9IGMoYFR3aXR0ZXJgKSklPiUNCiAgZmlsdGVyKCFpcy5uYShnZW5lcmFsX2ZpZWxkKSklPiUNCiAgZ3JvdXBfYnkoaW5mZXJyZWRfZ2VuZGVyKSU+JQ0KICBzdW1tYXJpc2UoDQogICAgcHJvZnMgPSBuX2Rpc3RpbmN0KHByb2ZpbGVfaWQpLA0KICAgIHN1bSA9IHN1bSh2YWx1ZSwgbmEucm0gPSBUUlVFKSklPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9IGluZmVycmVkX2dlbmRlciwgdmFsdWVzX2Zyb20gPSBjKHByb2ZzLHN1bSkpJT4lDQogIG11dGF0ZShtX3Byb3AgPSByb3VuZChzdW1fbS9zdW0oc3VtX20pLDMpLA0KICAgICAgICAgd19wcm9wID0gcm91bmQoc3VtX3cvc3VtKHN1bV93KSwgMyksDQogICAgICAgICBtX2F2ZSA9IHJvdW5kKHN1bV9tL3Byb2ZzX20sIDMpLA0KICAgICAgICAgd19hdmUgPSByb3VuZChzdW1fdy9wcm9mc193LCAzKSkNCg0KdHdpdHRlcl9vdmVyYWxsJGdlbmVyYWxfZmllbGQgPC0gIkFsbCBmaWVsZHMiDQp0d2l0dGVyX292ZXJhbGwgPC0gdHdpdHRlcl9vdmVyYWxsW2NvbG5hbWVzKHR3aXR0ZXJfdHlwZSldDQoNCnR3aXR0ZXJfdHlwZSA8LSByYmluZCh0d2l0dGVyX3R5cGUsDQogICAgICAgICAgICAgICAgICAgdHdpdHRlcl9vdmVyYWxsKQ0KDQojIG91dHB1dCB0byByZXN1bHRzDQp3cml0ZV9jc3YodHdpdHRlcl90eXBlLCAiUGxvdHNfYXByaWwvU3VwcGxlbWVudGFsL1RfdHdpdHRlci5jc3YiKQ0Ka25pdHI6OmthYmxlKHR3aXR0ZXJfdHlwZSkNCmBgYA0KDQoNCiMgV29tZW4ncyByZXByZXNlbnRhdGlvbiBhY3Jvc3MgdGhlIGJvYXJkDQoNCkZpcnN0LCBnZXQgcmVwcmVzZW50YXRpb24gcGVyIGZpZWxkIGluIG91ciBkYXRhc2V0Og0KKD8gcHJvZmVzc29ycykNCmBgYHtyfQ0KcmVwcl9maWVsZF8yMDIzIDwtIHByb2ZfcGFuZWxfZmlsdGVyICU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkKSU+JQ0KICBmaWx0ZXIoeWVhciA9PSBtYXgoeWVhcikpJT4lDQogIGZpbHRlcighaXMubmEoZ2VuZXJhbF9maWVsZCkpJT4lDQogIGdyb3VwX2J5KGdlbmVyYWxfZmllbGQsIGluZmVycmVkX2dlbmRlciklPiUNCiAgc3VtbWFyaXNlKG4gPSBuKCkpJT4lDQogIHBpdm90X3dpZGVyKHZhbHVlc19mcm9tID0gbiwgbmFtZXNfZnJvbSA9IGluZmVycmVkX2dlbmRlcikNCg0KcmVwcl9maWVsZF8yMDIzJHNoYXJlX3dvbWVuX2ZpZWxkIDwtIHJlcHJfZmllbGRfMjAyMyR3LyhyZXByX2ZpZWxkXzIwMjMkbStyZXByX2ZpZWxkXzIwMjMkdykNCg0KYGBgDQoNCk5vdyBnZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIHdvbWVuIGFtb25nIHRoZSB0b3AgMTAlIGFuZCAyMCUgb2YgcmVzZWFyY2hlcnMgaW4gdGVybXMNCm9mIHRvdGFsIGZhbWUgaW4gdGhlaXIgZmllbGQgaW4gMjAyMyAoYmFzZWQgb24gdGhlaXIgZW50cnkgYmF0Y2gpOg0KYGBge3J9DQojIGZpcnN0LCBnZXQgdGhlIGxhdGVzdCB5ZWFyIGluIHRoZSBwYW5lbCBmb3IgZWFjaCBwcm9mDQp3b21lbl9maWVsZF8yMDIzIDwtIHByb2ZfcGFuZWxfZmlsdGVyICU+JQ0KICBncm91cF9ieShwcm9maWxlX2lkKSU+JQ0KICBmaWx0ZXIoeWVhciA9PSBtYXgoeWVhcikpDQoNCiMgYW5kIG5vdyBzZXQgdGhlIGZpbmFsIHllYXIgYXMgMjAyMywgYXNzdW1pbmcgdGhlcmUgd2FzIG5vIGF0dGVudGlvbiBhZnRlcg0KIyB3aGF0ZXZlciB0aGUgbGFzdCB5ZWFyIGlzIGluIHRoZSBkYXRhc2V0IChxdWl0ZSBzb21lIHByb2Zlc3NvcnMgd2l0aA0KIyAwIG1lbnRpb25zIGV2ZW4gaW4gdGhpcyBsYXN0IHllYXIsIHNvIHdlIHdhbnQgdG8ga2VlcCB0aGVtIGZvciBjb3JyZWN0DQojIHNoYXJlcykNCndvbWVuX2ZpZWxkXzIwMjMkeWVhciA8LSAyMDIzDQoNCiMgZ2V0IHRoZWlyIGRlY2lsZSBiYXNlZCBvbiB0aGVpciB0b3RhbCBwZXJmb3JtYW5jZSB3aXRoaW4gdGhlaXIgZW50cnkgYmF0Y2gNCndvbWVuX2ZpZWxkXzIwMjMgPC0gd29tZW5fZmllbGRfMjAyMyAlPiUNCiAgZmlsdGVyKCFpcy5uYShnZW5lcmFsX2ZpZWxkKSklPiUNCiAgc2VsZWN0KHByb2ZpbGVfaWQsIHllYXIsIGluZmVycmVkX2dlbmRlciwgZ2VuZXJhbF9maWVsZCwgZW50cnlfYmF0Y2hfMjAyMywgY291bnRfcHVic190b3RhbCwNCiAgICAgICAgIGNpdGVkX2J5X3RvdGFsX2FsbCwgYWx0X29ubGluZV9hbGxfdG90YWwsIG5ld3NfYWxsX3RvdGFsLCBhbHRfdHdpdHRlcl90b3RhbCklPiUNCiAgcmVwbGFjZShpcy5uYSguKSwgMCklPiUNCiAgZ3JvdXBfYnkoZ2VuZXJhbF9maWVsZCwgZW50cnlfYmF0Y2hfMjAyMyklPiUNCiAgbXV0YXRlKA0KICAgICAgICAgYFB1YmxpY2F0aW9uc2AgPSBudGlsZSgtY291bnRfcHVic190b3RhbCwgMjApLA0KICAgICAgICAgYENpdGF0aW9uc2AgPSBudGlsZSgtY2l0ZWRfYnlfdG90YWxfYWxsLCAyMCksICAgIA0KICAgICAgICAgYE9ubGluZSBuZXdzYCA9IG50aWxlKC1hbHRfb25saW5lX2FsbF90b3RhbCwgMjApLA0KICAgICAgICAgYE5ld3NgID0gbnRpbGUoLW5ld3NfYWxsX3RvdGFsLCAyMCksDQogICAgICAgICBgVHdpdHRlcmAgPSBudGlsZSgtYWx0X3R3aXR0ZXJfdG90YWwsIDIwKSkNCmBgYA0KDQojIyMgJSB3b21lbiBhbW9uZyBzY2llbnRpc3RzIGluIHRvcCBuJQ0KR2V0IHNoYXJlcyBvZiB3b21lbiBhbW9uZyB0b3AgbiUgc2NpZW50aXN0cyBwZXIgYXR0ZW50aW9uIGRvbWFpbjoNCmBgYHtyfQ0KIyByZWFycmFuZ2UgdGhlIGRhdGFzZXQgdG8gZ2V0IGNvdW50cyBvZiB3b21lbiBhbmQgbWVuIGluIGVhY2ggZGVjaWxlDQojIHRoZW4gbGVhdmUgb25seSB0b3AgMTAgYW5kIDIwDQpzaGFyZV93b21lbl9maWVsZF8yMDIzIDwtIHdvbWVuX2ZpZWxkXzIwMjMgJT4lDQogIHVuZ3JvdXAoKSU+JQ0KICBzZWxlY3QocHJvZmlsZV9pZCwgeWVhciwgaW5mZXJyZWRfZ2VuZGVyLCBnZW5lcmFsX2ZpZWxkLCBgUHVibGljYXRpb25zYDpgVHdpdHRlcmApJT4lDQogIHBpdm90X2xvbmdlcihgUHVibGljYXRpb25zYDpgVHdpdHRlcmApJT4lDQogIGdyb3VwX2J5KGdlbmVyYWxfZmllbGQsIGluZmVycmVkX2dlbmRlciwgbmFtZSwgdmFsdWUpJT4lDQogIHN1bW1hcmlzZShuID0gbigpKSU+JQ0KICBwaXZvdF93aWRlcih2YWx1ZXNfZnJvbSA9IG4sIG5hbWVzX2Zyb20gPSBpbmZlcnJlZF9nZW5kZXIpJT4lDQogIGdyb3VwX2J5KGdlbmVyYWxfZmllbGQsIG5hbWUpJT4lDQogIG11dGF0ZShtID0gY3Vtc3VtKG0pLA0KICAgICAgICAgdyA9IGN1bXN1bSh3KSklPiUNCiAgZmlsdGVyKHZhbHVlICVpbiUgYygxLCAyLCAzLCA0KSkNCiANCnNoYXJlX3dvbWVuX2ZpZWxkXzIwMjMkc2hhcmVfd29tZW4gPC0gc2hhcmVfd29tZW5fZmllbGRfMjAyMyR3LyhzaGFyZV93b21lbl9maWVsZF8yMDIzJG0rc2hhcmVfd29tZW5fZmllbGRfMjAyMyR3KSANCmBgYA0KQ29tYmluZSB0aGUgZmllbGQgcmVwcmVzZW50YXRpb24gd2l0aCB0aGUgYXR0ZW50aW9uIHJlcHJlc2VudGF0aW9uOg0KYGBge3J9DQpyZXByX2ZpZWxkXzIwMjMkbmFtZSA8LSAib3ZlcmFsbCINCnJlcHJfZmllbGRfMjAyMyR2YWx1ZSA8LSAwDQoNCnJlcHJfZmllbGRfMjAyMyA8LSByZXByX2ZpZWxkXzIwMjNbYyhjb2xuYW1lcyhzaGFyZV93b21lbl9maWVsZF8yMDIzKVsxOjVdLCJzaGFyZV93b21lbl9maWVsZCIpXQ0KDQpzaGFyZV93b21lbl9maWVsZF8yMDIzIDwtIG1lcmdlKHNoYXJlX3dvbWVuX2ZpZWxkXzIwMjMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcHJfZmllbGRfMjAyM1tjKCJnZW5lcmFsX2ZpZWxkIiwgInNoYXJlX3dvbWVuX2ZpZWxkIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9ICJnZW5lcmFsX2ZpZWxkIikNCg0Kc2hhcmVfd29tZW5fZmllbGRfMjAyMyRzaGFyZV93b21lbl9maWVsZCA8LSBpZmVsc2Uoc2hhcmVfd29tZW5fZmllbGRfMjAyMyRuYW1lID09ICJOZXdzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlX3dvbWVuX2ZpZWxkXzIwMjMkc2hhcmVfd29tZW5fZmllbGQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOQSkNCmBgYA0KDQpQbG90IHRoaXMgb3V0Og0KDQpUb3AgMTAlOg0KYGBge3Igd2FybmluZyA9IEZ9DQpyZXByX2F0dG5fNSA8LSBzaGFyZV93b21lbl9maWVsZF8yMDIzICU+JQ0KICBmaWx0ZXIodmFsdWUgPT0gMSAmIG5hbWUgJWluJSBjKCJOZXdzIiwgIk9ubGluZSBuZXdzIiwgIlR3aXR0ZXIiKSklPiUNCiAgZ2dwbG90KGFlcyh5PXNoYXJlX3dvbWVuLCB4PWdlbmVyYWxfZmllbGQpKSArIA0KICBnZW9tX3BvaW50KGFlcyhzaGFwZT1uYW1lLCBjb2xvcj1uYW1lKSwgcG9zaXRpb249cG9zaXRpb25fZG9kZ2Uod2lkdGg9MC4yKSwgc3RhdD0iaWRlbnRpdHkiLCBzaXplID0gMi41KSsNCiAgZ2VvbV9iYXIoc3RhdD0iaWRlbnRpdHkiLCBhZXMoeT1zaGFyZV93b21lbl9maWVsZCwgeD1nZW5lcmFsX2ZpZWxkKSwgYWxwaGE9MC4yLCB3aWR0aCA9IDAuNCkrDQogIGd1aWRlcyhmaWxsID0gZ3VpZGVfbGVnZW5kKHJldmVyc2U9VFJVRSwgdGl0bGUgPSAiTWVhc3VyZSIpKSsNCiAgc2NhbGVfeV9jb250aW51b3VzKGxpbWl0cz1jKDAsIDAuNSkpKw0KICBjb29yZF9mbGlwKCkrDQogIHhsYWIoIiIpKw0KICB5bGFiKCIlIFdvbWVuIikrDQogIGxhYnMoY29sb3IgPSAiQXR0ZW50aW9uIHR5cGUiLA0KICAgICAgIHNoYXBlID0gIkF0dGVudGlvbiB0eXBlIikrDQogIGdndGl0bGUoIihhKSB0b3AgNSUgb2YgYXR0ZW50aW9uIGRvbWFpbnMiKSsNCiAgdGhlbWVfbWluaW1hbF92Z3JpZCgpKw0KICB0aGVtZShwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgIGF4aXMudGV4dC55ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgIGF4aXMudGl0bGUueSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTEpLA0KICAgICAgICBheGlzLnRleHQueCA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApICwNCiAgICAgICAgYXhpcy50aXRsZS54ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMSksDQogICAgICAgIGxlZ2VuZC50aXRsZT1lbGVtZW50X3RleHQoc2l6ZT0xMSksIA0KICAgICAgICBsZWdlbmQudGV4dD1lbGVtZW50X3RleHQoc2l6ZT0xMCkpDQoNCnJlcHJfYXR0bl8xMCA8LSBzaGFyZV93b21lbl9maWVsZF8yMDIzICU+JQ0KICBmaWx0ZXIodmFsdWUgPT0gMiAmIG5hbWUgJWluJSBjKCJOZXdzIiwgIk9ubGluZSBuZXdzIiwgIlR3aXR0ZXIiKSklPiUNCiAgZ2dwbG90KGFlcyh5PXNoYXJlX3dvbWVuLCB4PWdlbmVyYWxfZmllbGQpKSArIA0KICBnZW9tX3BvaW50KGFlcyhzaGFwZT1uYW1lLCBjb2xvcj1uYW1lKSwgcG9zaXRpb249cG9zaXRpb25fZG9kZ2Uod2lkdGg9MC4yKSwgc3RhdD0iaWRlbnRpdHkiLCBzaXplID0gMi41KSsNCiAgZ2VvbV9iYXIoc3RhdD0iaWRlbnRpdHkiLCBhZXMoeT1zaGFyZV93b21lbl9maWVsZCwgeD1nZW5lcmFsX2ZpZWxkKSwgYWxwaGE9MC4yLCB3aWR0aCA9IDAuNCkrDQogIGd1aWRlcyhmaWxsID0gZ3VpZGVfbGVnZW5kKHJldmVyc2U9VFJVRSwgdGl0bGUgPSAiTWVhc3VyZSIpKSsNCiAgc2NhbGVfeV9jb250aW51b3VzKGxpbWl0cz1jKDAsIDAuNSkpKw0KICBjb29yZF9mbGlwKCkrDQogIHhsYWIoIiIpKw0KICB5bGFiKCIlIFdvbWVuIikrDQogIGxhYnMoY29sb3IgPSAiQXR0ZW50aW9uIHR5cGUiLA0KICAgICAgIHNoYXBlID0gIkF0dGVudGlvbiB0eXBlIikrDQogIGdndGl0bGUoIihiKSB0b3AgMTAlIG9mIGF0dGVudGlvbiBkb21haW5zIikrDQogIHRoZW1lX21pbmltYWxfdmdyaWQoKSsNCiAgdGhlbWUocGxvdC50aXRsZSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApLA0KICAgICAgICBheGlzLnRleHQueSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApLA0KICAgICAgICBheGlzLnRpdGxlLnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDExKSwNCiAgICAgICAgYXhpcy50ZXh0LnggPSBlbGVtZW50X3RleHQoc2l6ZSA9IDEwKSAsDQogICAgICAgIGF4aXMudGl0bGUueCA9IGVsZW1lbnRfdGV4dChzaXplID0gMTEpLA0KICAgICAgICBsZWdlbmQudGl0bGU9ZWxlbWVudF90ZXh0KHNpemU9MTEpLCANCiAgICAgICAgbGVnZW5kLnRleHQ9ZWxlbWVudF90ZXh0KHNpemU9MTApKQ0KDQpyZXByX2F0dG5fMTUgPC0gc2hhcmVfd29tZW5fZmllbGRfMjAyMyAlPiUNCiAgZmlsdGVyKHZhbHVlID09IDMgJiBuYW1lICVpbiUgYygiTmV3cyIsICJPbmxpbmUgbmV3cyIsICJUd2l0dGVyIikpJT4lDQogIGdncGxvdChhZXMoeT1zaGFyZV93b21lbiwgeD1nZW5lcmFsX2ZpZWxkKSkgKyANCiAgICBnZW9tX3BvaW50KGFlcyhzaGFwZT1uYW1lLCBjb2xvcj1uYW1lKSwgcG9zaXRpb249cG9zaXRpb25fZG9kZ2Uod2lkdGg9MC4yKSwgc3RhdD0iaWRlbnRpdHkiLCBzaXplID0gMi41KSsNCiAgZ2VvbV9iYXIoc3RhdD0iaWRlbnRpdHkiLCBhZXMoeT1zaGFyZV93b21lbl9maWVsZCwgeD1nZW5lcmFsX2ZpZWxkKSwgYWxwaGE9MC4yLCB3aWR0aCA9IDAuNCkrDQogIGd1aWRlcyhmaWxsID0gZ3VpZGVfbGVnZW5kKHJldmVyc2U9VFJVRSwgdGl0bGUgPSAiTWVhc3VyZSIpKSsNCiAgc2NhbGVfeV9jb250aW51b3VzKGxpbWl0cz1jKDAsIDAuNSkpKw0KICBjb29yZF9mbGlwKCkrDQogIHhsYWIoIiIpKw0KICB5bGFiKCIlIFdvbWVuIikrDQogIGxhYnMoY29sb3IgPSAiQXR0ZW50aW9uIHR5cGUiLA0KICAgICAgIHNoYXBlID0gIkF0dGVudGlvbiB0eXBlIikrDQogIGdndGl0bGUoIihjKSB0b3AgMTUlIG9mIGF0dGVudGlvbiBkb21haW5zIikrDQogIHRoZW1lX21pbmltYWxfdmdyaWQoKSsNCiAgdGhlbWUocGxvdC50aXRsZSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApLA0KICAgICAgICBheGlzLnRleHQueSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApLA0KICAgICAgICBheGlzLnRpdGxlLnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDExKSwNCiAgICAgICAgYXhpcy50ZXh0LnggPSBlbGVtZW50X3RleHQoc2l6ZSA9IDEwKSAsDQogICAgICAgIGF4aXMudGl0bGUueCA9IGVsZW1lbnRfdGV4dChzaXplID0gMTEpLA0KICAgICAgICBsZWdlbmQudGl0bGU9ZWxlbWVudF90ZXh0KHNpemU9MTEpLCANCiAgICAgICAgbGVnZW5kLnRleHQ9ZWxlbWVudF90ZXh0KHNpemU9MTApKQ0KDQpyZXByX2F0dG5fMjAgPC0gc2hhcmVfd29tZW5fZmllbGRfMjAyMyAlPiUNCiAgZmlsdGVyKHZhbHVlID09IDQgJiBuYW1lICVpbiUgYygiTmV3cyIsICJPbmxpbmUgbmV3cyIsICJUd2l0dGVyIikpJT4lDQogIGdncGxvdChhZXMoeT1zaGFyZV93b21lbiwgeD1nZW5lcmFsX2ZpZWxkKSkgKyANCiAgICBnZW9tX3BvaW50KGFlcyhzaGFwZT1uYW1lLCBjb2xvcj1uYW1lKSwgcG9zaXRpb249cG9zaXRpb25fZG9kZ2Uod2lkdGg9MC4yKSwgc3RhdD0iaWRlbnRpdHkiLCBzaXplID0gMi41KSsNCiAgZ2VvbV9iYXIoc3RhdD0iaWRlbnRpdHkiLCBhZXMoeT1zaGFyZV93b21lbl9maWVsZCwgeD1nZW5lcmFsX2ZpZWxkKSwgYWxwaGE9MC4yLCB3aWR0aCA9IDAuNCkrDQogIGd1aWRlcyhmaWxsID0gZ3VpZGVfbGVnZW5kKHJldmVyc2U9VFJVRSwgdGl0bGUgPSAiTWVhc3VyZSIpKSsNCiAgc2NhbGVfeV9jb250aW51b3VzKGxpbWl0cz1jKDAsIDAuNSkpKw0KICBjb29yZF9mbGlwKCkrDQogIHhsYWIoIiIpKw0KICB5bGFiKCIlIFdvbWVuIikrDQogIGxhYnMoY29sb3IgPSAiQXR0ZW50aW9uIHR5cGUiLA0KICAgICAgIHNoYXBlID0gIkF0dGVudGlvbiB0eXBlIikrDQogIGdndGl0bGUoIihkKSB0b3AgMjAlIG9mIGF0dGVudGlvbiBkb21haW5zIikrDQogIHRoZW1lX21pbmltYWxfdmdyaWQoKSsNCiAgdGhlbWUocGxvdC50aXRsZSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApLA0KICAgICAgICBheGlzLnRleHQueSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApLA0KICAgICAgICBheGlzLnRpdGxlLnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDExKSwNCiAgICAgICAgYXhpcy50ZXh0LnggPSBlbGVtZW50X3RleHQoc2l6ZSA9IDEwKSAsDQogICAgICAgIGF4aXMudGl0bGUueCA9IGVsZW1lbnRfdGV4dChzaXplID0gMTEpLA0KICAgICAgICBsZWdlbmQudGl0bGU9ZWxlbWVudF90ZXh0KHNpemU9MTEpLCANCiAgICAgICAgbGVnZW5kLnRleHQ9ZWxlbWVudF90ZXh0KHNpemU9MTApKQ0KYGBgDQoNCg0KUGxvdCB0aGVzZSB0d28gbmV4dCB0byBlYWNoIG90aGVyOg0KYGBge3IgZmlnLndpZHRoPTEwLCBmaWcuaGVpZ2h0PTQsIHdhcm5pbmcgPSBGfQ0KbGVnZW5kIDwtIGdldF9sZWdlbmQoDQogICMgY3JlYXRlIHNvbWUgc3BhY2UgdG8gdGhlIGxlZnQgb2YgdGhlIGxlZ2VuZA0KICByZXByX2F0dG5fMTANCikNCg0KY29tYmlfcGxvdCA8LSBjb3dwbG90OjpwbG90X2dyaWQoDQogICAgICAgICAgICAgICAgICAgIHJlcHJfYXR0bl8xMCArIHRoZW1lKGxlZ2VuZC5wb3NpdGlvbj0ibm9uZSIpICsgZ2d0aXRsZSgiKGEpIHRvcCAxMCUgb2YgYXR0ZW50aW9uIGRvbWFpbnMiKSwNCiAgICAgICAgICAgICAgICAgICAgcmVwcl9hdHRuXzIwICsgdGhlbWUobGVnZW5kLnBvc2l0aW9uPSJub25lIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzLnRpdGxlLnk9ZWxlbWVudF9ibGFuaygpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4aXMudGV4dC55PWVsZW1lbnRfYmxhbmsoKSkrZ2d0aXRsZSgiKGIpIHRvcCAyMCUgb2YgYXR0ZW50aW9uIGRvbWFpbnMiKSwNCiAgICAgICAgICAgICAgICAgICAgbGVnZW5kLA0KICAgICAgICAgICAgICAgICAgICBuY29sID0gMywNCiAgICAgICAgICAgICAgICAgICAgcmVsX3dpZHRocyA9IGMoMSwgMC44LCAwLjIyKSkNCg0KDQpnZ3NhdmUyKA0KICBmaWxlbmFtZSA9ICJQbG90c19hcHJpbC9QbG90XzEucG5nIiwNCiAgcGxvdCA9IGNvbWJpX3Bsb3QsDQogIHdpZHRoID0gMTAsDQogIGhlaWdodCA9IDQsDQogIHVuaXRzID0gYygiaW4iKSwNCiAgZHBpID0gMzAwLA0KICBiZyA9ICJ3aGl0ZSINCikNCg0KY29tYmlfcGxvdA0KYGBgDQoNCg0KIyBDb21wYXJlIG1lYW5zIGFuZCBkaXN0cmlidXRpb25zDQojIyBNZWFucyBjb21wYXJpc29uDQoNCmBgYHtyfQ0Kc291cmNlc19jaGVjayA8LSBzb3VyY2VzX2NoZWNrJT4lDQogIGZpbHRlcighaXMubmEoZ2VuZXJhbF9maWVsZCkpDQpgYGANCg0KIyMjIE92ZXJhbGwNCmBgYHtyfQ0Kb3ZlcmFsbF9jb21wYXJpc29ucyA8LSBkYXRhLmZyYW1lKG1hdHJpeChOQSwgbmNvbCA9IDYsIG5yb3cgPSAxKSkNCmkgPC0gMQ0Kb3ZlcmFsbF9jb21wYXJpc29uc1tpLCAxXSA8LSAib3ZlcmFsbCINCm92ZXJhbGxfY29tcGFyaXNvbnNbaSwgMl0gPC0gcm91bmQod2lsY294LnRlc3QoY291bnRfcHVic190b3RhbCB+IGluZmVycmVkX2dlbmRlciwgZGF0YT1zb3VyY2VzX2NoZWNrLCBwYWlyZWQ9RkFMU0UpJHAudmFsdWUsIDUpDQpvdmVyYWxsX2NvbXBhcmlzb25zW2ksIDNdIDwtIHJvdW5kKHdpbGNveC50ZXN0KGNpdGVkX2J5X3RvdGFsX2FsbCB+IGluZmVycmVkX2dlbmRlciwgZGF0YT1zb3VyY2VzX2NoZWNrLCBwYWlyZWQ9RkFMU0UpJHAudmFsdWUsIDUpDQpvdmVyYWxsX2NvbXBhcmlzb25zW2ksIDRdIDwtIHJvdW5kKHdpbGNveC50ZXN0KG5ld3NfYWxsX3RvdGFsIH4gaW5mZXJyZWRfZ2VuZGVyLCBkYXRhPXNvdXJjZXNfY2hlY2ssIHBhaXJlZD1GQUxTRSkkcC52YWx1ZSwgNSkNCm92ZXJhbGxfY29tcGFyaXNvbnNbaSwgNV0gPC0gcm91bmQod2lsY294LnRlc3QoYWx0X29ubGluZV9hbGxfdG90YWwgfiBpbmZlcnJlZF9nZW5kZXIsIGRhdGE9c291cmNlc19jaGVjaywgcGFpcmVkPUZBTFNFKSRwLnZhbHVlLCA1KQ0Kb3ZlcmFsbF9jb21wYXJpc29uc1tpLCA2XSA8LSByb3VuZCh3aWxjb3gudGVzdChhbHRfdHdpdHRlcl90b3RhbCB+IGluZmVycmVkX2dlbmRlciwgZGF0YT1zb3VyY2VzX2NoZWNrLCBwYWlyZWQ9RkFMU0UpJHAudmFsdWUsIDUpDQoNCmNvbG5hbWVzKG92ZXJhbGxfY29tcGFyaXNvbnMpIDwtICBjKCJmaWVsZCIsICJwdWJzX3RvdGFsIiwgImNpdGF0aW9uc190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c190b3RhbCIsICJvbmxpbmVfbmV3c190b3RhbCIsICJ0d2l0dGVyX3RvdGFsIikNCg0KDQpvdmVyYWxsX2NvbXBhcmlzb25zDQoNCm1lYW5fdmFsdWVzIDwtIHNvdXJjZXNfY2hlY2sgJT4lDQogIGdyb3VwX2J5KGluZmVycmVkX2dlbmRlciklPiUNCiAgc3VtbWFyaXNlKHB1YnNfdG90YWwgPSBtZWFuKGNvdW50X3B1YnNfdG90YWwsIG5hLnJtID0gVFJVRSksDQogICAgICAgICAgICBjaXRhdGlvbnNfdG90YWwgPSBtZWFuKGNpdGVkX2J5X3RvdGFsX2FsbCwgbmEucm0gPSBUUlVFKSwNCiAgICAgICAgICAgIG5ld3NfdG90YWwgPSBtZWFuKG5ld3NfYWxsX3RvdGFsLCBuYS5ybSA9IFRSVUUpLA0KICAgICAgICAgICAgb25saW5lX25ld3NfdG90YWwgPSBtZWFuKGFsdF9vbmxpbmVfYWxsX3RvdGFsLCBuYS5ybSA9IFRSVUUpLA0KICAgICAgICAgICAgdHdpdHRlcl90b3RhbCA9ICBtZWFuKGFsdF90d2l0dGVyX3RvdGFsLCBuYS5ybSA9IFRSVUUpKSU+JQ0KICBtdXRhdGUoYWNyb3NzKDI6NiwgXCh4KSByb3VuZCh4LCAxKSkpDQoNCm1lYW5fdmFsdWVzDQpvdmVyYWxsX2NvbXBhcmlzb25zDQpgYGANCg0KDQojIyMgV2l0aGluIGZpZWxkcw0KDQpgYGB7cn0NCmZpZWxkcyA8LSB1bmlxdWUocHJvZl9wYW5lbF9maWx0ZXIkZ2VuZXJhbF9maWVsZCkNCmZpZWxkcyA8LSBmaWVsZHNbIWlzLm5hKGZpZWxkcyldDQpmaWVsZF9jb21wYXJpc29ucyA8LSBkYXRhLmZyYW1lKG1hdHJpeChOQSwgbmNvbCA9IDcsIG5yb3cgPSBsZW5ndGgoZmllbGRzKSkpDQoNCmZvciAoaSBpbiAxOmxlbmd0aChmaWVsZHMpKXsNCiAgZmllbGQgPC0gZmllbGRzW2ldDQogIGRhdGEgPC0gZmlsdGVyKHNvdXJjZXNfY2hlY2ssIA0KICAgICAgICAgICAgICAgICBnZW5lcmFsX2ZpZWxkID09IGZpZWxkKQ0KICBmaWVsZF9jb21wYXJpc29uc1tpLCAxXSA8LSBmaWVsZA0KICBmaWVsZF9jb21wYXJpc29uc1tpLCAyXSA8LSBucm93KGRhdGEpDQogIGZpZWxkX2NvbXBhcmlzb25zW2ksIDNdIDwtIHJvdW5kKHdpbGNveC50ZXN0KGNvdW50X3B1YnNfdG90YWwgfiBpbmZlcnJlZF9nZW5kZXIsIGRhdGE9ZGF0YSwgcGFpcmVkPUZBTFNFKSRwLnZhbHVlLCA1KQ0KICBmaWVsZF9jb21wYXJpc29uc1tpLCA0XSA8LSByb3VuZCh3aWxjb3gudGVzdChjaXRlZF9ieV90b3RhbF9hbGwgfiBpbmZlcnJlZF9nZW5kZXIsIGRhdGE9ZGF0YSwgcGFpcmVkPUZBTFNFKSRwLnZhbHVlLCA1KQ0KICBmaWVsZF9jb21wYXJpc29uc1tpLCA1XSA8LSByb3VuZCh3aWxjb3gudGVzdChuZXdzX2FsbF90b3RhbCB+IGluZmVycmVkX2dlbmRlciwgZGF0YT1kYXRhLCBwYWlyZWQ9RkFMU0UpJHAudmFsdWUsIDUpDQogIGZpZWxkX2NvbXBhcmlzb25zW2ksIDZdIDwtIHJvdW5kKHdpbGNveC50ZXN0KGFsdF9vbmxpbmVfYWxsX3RvdGFsIH4gaW5mZXJyZWRfZ2VuZGVyLCBkYXRhPWRhdGEsIHBhaXJlZD1GQUxTRSkkcC52YWx1ZSwgNSkNCiAgZmllbGRfY29tcGFyaXNvbnNbaSwgN10gPC0gcm91bmQod2lsY294LnRlc3QoYWx0X3R3aXR0ZXJfdG90YWwgfiBpbmZlcnJlZF9nZW5kZXIsIGRhdGE9ZGF0YSwgcGFpcmVkPUZBTFNFKSRwLnZhbHVlLCA1KQ0KfQ0KDQpjb2xuYW1lcyhmaWVsZF9jb21wYXJpc29ucykgPC0gYygiZmllbGQiLCAicHJvZnMiLCAicHVic190b3RhbCIsICJjaXRhdGlvbnNfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfdG90YWwiLCAib25saW5lX25ld3NfdG90YWwiLCAidHdpdHRlcl90b3RhbCIpDQpmaWVsZF9jb21wYXJpc29ucw0KYGBgDQoNCiMjIyBXaXRoaW4geWVhciBncm91cHMNCmBgYHtyfQ0KeWVhcl9ncm91cHMgPC0gdW5pcXVlKHNvdXJjZXNfY2hlY2skZW50cnlfYmF0Y2hfMjAyMykNCnllYXJfZ3JvdXBzIDwtIHllYXJfZ3JvdXBzWyEgeWVhcl9ncm91cHMgPT0gInVwIHRvIE5BIl0NCnllYXJzIDwtIGMoInVwIHRvIDEwIiwidXAgdG8gMjAiLCAidXAgdG8gMzAiLCAidXAgdG8gNDAiLCAidXAgdG8gNTAiKQ0KeWVhcl9ncm91cHMgPC0geWVhcl9ncm91cHNbb3JkZXIobWF0Y2goeWVhcl9ncm91cHMseWVhcnMpKV0NCnllYXJfZ3JvdXBzX2NvbXBhcmlzb25zIDwtIGRhdGEuZnJhbWUobWF0cml4KE5BLCBuY29sID0gNywgbnJvdyA9IGxlbmd0aCh5ZWFyX2dyb3VwcykpKQ0KDQpmb3IgKGkgaW4gMTpsZW5ndGgoeWVhcl9ncm91cHMpKXsNCiAgeWVhcl9ncm91cCA8LSB5ZWFyX2dyb3Vwc1tpXQ0KICBkYXRhIDwtIGZpbHRlcihzb3VyY2VzX2NoZWNrLCANCiAgICAgICAgICAgICAgICAgZW50cnlfYmF0Y2hfMjAyMyA9PSB5ZWFyX2dyb3VwKQ0KICANCiAgeWVhcl9ncm91cHNfY29tcGFyaXNvbnNbaSwgMV0gPC0geWVhcl9ncm91cA0KICB5ZWFyX2dyb3Vwc19jb21wYXJpc29uc1tpLCAyXSA8LSBucm93KGRhdGEpDQogIHllYXJfZ3JvdXBzX2NvbXBhcmlzb25zW2ksIDNdIDwtIHJvdW5kKHdpbGNveC50ZXN0KGNvdW50X3B1YnNfdG90YWwgfiBpbmZlcnJlZF9nZW5kZXIsIGRhdGE9ZGF0YSwgcGFpcmVkPUZBTFNFKSRwLnZhbHVlLCA1KQ0KICB5ZWFyX2dyb3Vwc19jb21wYXJpc29uc1tpLCA0XSA8LSByb3VuZCh3aWxjb3gudGVzdChjaXRlZF9ieV90b3RhbF9hbGwgfiBpbmZlcnJlZF9nZW5kZXIsIGRhdGE9ZGF0YSwgcGFpcmVkPUZBTFNFKSRwLnZhbHVlLCA1KQ0KICB5ZWFyX2dyb3Vwc19jb21wYXJpc29uc1tpLCA1XSA8LSByb3VuZCh3aWxjb3gudGVzdChuZXdzX2FsbF90b3RhbCB+IGluZmVycmVkX2dlbmRlciwgZGF0YT1kYXRhLCBwYWlyZWQ9RkFMU0UpJHAudmFsdWUsIDUpDQogIHllYXJfZ3JvdXBzX2NvbXBhcmlzb25zW2ksIDZdIDwtIHJvdW5kKHdpbGNveC50ZXN0KGFsdF9vbmxpbmVfYWxsX3RvdGFsIH4gaW5mZXJyZWRfZ2VuZGVyLCBkYXRhPWRhdGEsIHBhaXJlZD1GQUxTRSkkcC52YWx1ZSwgNSkNCiAgeWVhcl9ncm91cHNfY29tcGFyaXNvbnNbaSwgN10gPC0gcm91bmQod2lsY294LnRlc3QoYWx0X3R3aXR0ZXJfdG90YWwgfiBpbmZlcnJlZF9nZW5kZXIsIGRhdGE9ZGF0YSwgcGFpcmVkPUZBTFNFKSRwLnZhbHVlLCA1KQ0KfQ0KDQpjb2xuYW1lcyh5ZWFyX2dyb3Vwc19jb21wYXJpc29ucykgPC0gYygiZmllbGQiLCAicHJvZnMiLCAicHVic190b3RhbCIsICJjaXRhdGlvbnNfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfdG90YWwiLCAib25saW5lX25ld3NfdG90YWwiLCAidHdpdHRlcl90b3RhbCIpDQp5ZWFyX2dyb3Vwc19jb21wYXJpc29ucw0KYGBgDQoNCg0KIyMjIFdpdGhpbiB5ZWFyIGdyb3VwcyBhbmQgZmllbGRzDQpgYGB7ciB3YXJuaW5nID0gRn0NCnllYXJfZ3JvdXBzX2ZpZWxkX2NvbXBhcmlzb25zIDwtIGRhdGEuZnJhbWUobWF0cml4KE5BLCBuY29sID0gOCwgbnJvdyA9IGxlbmd0aCh5ZWFyX2dyb3VwcykqbGVuZ3RoKGZpZWxkcykpKQ0Kcm93X2luZGV4IDwtIDANCg0KZm9yIChpIGluIDE6bGVuZ3RoKHllYXJfZ3JvdXBzKSl7DQogIHllYXJfZ3JvdXAgPC0geWVhcl9ncm91cHNbaV0NCiAgDQogIGZvciAoaiBpbiAxOmxlbmd0aChmaWVsZHMpKXsNCiAgICBmaWVsZCA8LSBmaWVsZHNbal0NCiAgICBkYXRhIDwtIGZpbHRlcihzb3VyY2VzX2NoZWNrLCANCiAgICAgICAgICAgICAgICAgICB5ZWFyc19zaW5jZV9lbnRyeSA9PSB5ZWFyX2dyb3VwICYgZ2VuZXJhbF9maWVsZCA9PSBmaWVsZCkNCiAgICANCiAgICB3b21lbiA8LSBmaWx0ZXIoZGF0YSwgaW5mZXJyZWRfZ2VuZGVyID09ICJ3IikNCiAgICBtZW4gPC0gZmlsdGVyKGRhdGEsIGluZmVycmVkX2dlbmRlciA9PSAibSIpDQogICAgDQogICAgaWYgKGxlbmd0aCh1bmlxdWUoZGF0YSRpbmZlcnJlZF9nZW5kZXIpKSAhPSAyKXsNCiAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCAxXSA8LSB5ZWFyX2dyb3VwDQogICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgMl0gPC0gZmllbGQNCiAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCAzXSA8LSBucm93KGRhdGEpDQogICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgNF0gPC0gTkENCiAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCA1XSA8LSBOQQ0KICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDZdIDwtIE5BDQogICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgN10gPC0gTkENCiAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCA4XSA8LSBOQQ0KICAgIH1lbHNlew0KICAgICAgaWYgKGxlbmd0aCh3aGljaChjb2xTdW1zKGRhdGFbYygiYWx0X29ubGluZV9hbGxfdG90YWwiLCAibmV3c19hbGxfdG90YWwiLCAiYWx0X3R3aXR0ZXJfdG90YWwiLCAiY2l0ZWRfYnlfdG90YWxfYWxsIiwgImNvdW50X3B1YnNfdG90YWwiKV0pID09IDApKSA+IDApew0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgMV0gPC0geWVhcl9ncm91cA0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgMl0gPC0gZmllbGQNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDNdIDwtIG5yb3coZGF0YSkNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDRdIDwtIE5BDQogICAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCA1XSA8LSBOQQ0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgNl0gPC0gTkENCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDddIDwtIE5BDQogICAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCA4XSA8LSBOQQ0KICAgICAgICANCiAgICAgIH1lbHNlew0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgMV0gPC0geWVhcl9ncm91cA0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgMl0gPC0gZmllbGQNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDNdIDwtIG5yb3coZGF0YSkNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDRdIDwtIHJvdW5kKHdpbGNveC50ZXN0KGNvdW50X3B1YnNfdG90YWwgfiBpbmZlcnJlZF9nZW5kZXIsIGRhdGE9ZGF0YSwgcGFpcmVkPUZBTFNFKSRwLnZhbHVlLCA1KQ0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgNV0gPC0gcm91bmQod2lsY294LnRlc3QoY2l0ZWRfYnlfdG90YWxfYWxsIH4gaW5mZXJyZWRfZ2VuZGVyLCBkYXRhPWRhdGEsIHBhaXJlZD1GQUxTRSkkcC52YWx1ZSwgNSkNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDZdIDwtIHJvdW5kKHdpbGNveC50ZXN0KG5ld3NfYWxsX3RvdGFsIH4gaW5mZXJyZWRfZ2VuZGVyLCBkYXRhPWRhdGEsIHBhaXJlZD1GQUxTRSkkcC52YWx1ZSwgNSkNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDddIDwtIHJvdW5kKHdpbGNveC50ZXN0KGFsdF9vbmxpbmVfYWxsX3RvdGFsIH4gaW5mZXJyZWRfZ2VuZGVyLCBkYXRhPWRhdGEsIHBhaXJlZD1GQUxTRSkkcC52YWx1ZSwgNSkNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDhdIDwtIHJvdW5kKHdpbGNveC50ZXN0KGFsdF90d2l0dGVyX3RvdGFsIH4gaW5mZXJyZWRfZ2VuZGVyLCBkYXRhPWRhdGEsIHBhaXJlZD1GQUxTRSkkcC52YWx1ZSwgNSkNCiAgICAgIH0NCiAgICB9DQogIH0NCiAgcm93X2luZGV4IDwtIHJvd19pbmRleCArIDQgDQp9DQoNCmNvbG5hbWVzKHllYXJfZ3JvdXBzX2ZpZWxkX2NvbXBhcmlzb25zKSA8LSBjKCJ5ZWFyX2dyb3VwIiwgImZpZWxkIiwgInByb2ZzIiwgInB1YnNfdG90YWwiLCAiY2l0YXRpb25zX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3RvdGFsIiwgIm9ubGluZV9uZXdzX3RvdGFsIiwgInR3aXR0ZXJfdG90YWwiKQ0KeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnMNCmBgYA0KDQojIyMgV3JpdGluZyB0aGlzIG91dA0KYGBge3J9DQp3cml0ZV9jc3Yob3ZlcmFsbF9jb21wYXJpc29ucywgIlBsb3RzX2FwcmlsL1N1cHBsZW1lbnRhbC9tZWFuX292ZXJhbGwuY3N2IikNCndyaXRlX2NzdihmaWVsZF9jb21wYXJpc29ucywgIlBsb3RzX2FwcmlsL1N1cHBsZW1lbnRhbC9tZWFuX3llYXIuY3N2IikNCndyaXRlX2NzdihmaWVsZF9jb21wYXJpc29ucywgIlBsb3RzX2FwcmlsL1N1cHBsZW1lbnRhbC9tZWFuX2ZpZWxkLmNzdiIpDQp3cml0ZV9jc3YoeWVhcl9ncm91cHNfZmllbGRfY29tcGFyaXNvbnMsICJQbG90c19hcHJpbC9TdXBwbGVtZW50YWwvbWVhbl95ZWFyX2ZpZWxkLmNzdiIpDQpgYGANCg0KDQojIyBEaXN0cmlidXRpb25zIGNvbXBhcmlzb24NCg0KIyMjIE92ZXJhbGwNCmBgYHtyfQ0Kb3ZlcmFsbF9kaXN0X2NvbXBhcmlzb25zIDwtIGRhdGEuZnJhbWUobWF0cml4KE5BLCBuY29sID0gNywgbnJvdyA9IDEpKQ0KaSA8LSAxDQp3b21lbiA8LSBmaWx0ZXIoc291cmNlc19jaGVjaywgaW5mZXJyZWRfZ2VuZGVyID09ICJ3IikNCm1lbiA8LSBmaWx0ZXIoc291cmNlc19jaGVjaywgaW5mZXJyZWRfZ2VuZGVyID09ICJtIikNCg0Kb3ZlcmFsbF9kaXN0X2NvbXBhcmlzb25zW2ksIDFdIDwtICJvdmVyYWxsIg0Kb3ZlcmFsbF9kaXN0X2NvbXBhcmlzb25zW2ksIDJdIDwtIG5yb3cocHJvZl9wYW5lbF9maWx0ZXIpDQpvdmVyYWxsX2Rpc3RfY29tcGFyaXNvbnNbaSwgM10gPC0gcm91bmQoa3MudGVzdCh3b21lbiRjb3VudF9wdWJzX3RvdGFsLCBtZW4kY291bnRfcHVic190b3RhbCkkcC52YWx1ZSwgNSkNCm92ZXJhbGxfZGlzdF9jb21wYXJpc29uc1tpLCA0XSA8LSByb3VuZChrcy50ZXN0KHdvbWVuJGNpdGVkX2J5X3RvdGFsX2FsbCwgbWVuJGNpdGVkX2J5X3RvdGFsX2FsbCkkcC52YWx1ZSwgNSkNCm92ZXJhbGxfZGlzdF9jb21wYXJpc29uc1tpLCA1XSA8LSByb3VuZChrcy50ZXN0KHdvbWVuJG5ld3NfYWxsX3RvdGFsLCBtZW4kbmV3c19hbGxfdG90YWwpJHAudmFsdWUsIDUpDQpvdmVyYWxsX2Rpc3RfY29tcGFyaXNvbnNbaSwgNl0gPC0gcm91bmQoa3MudGVzdCh3b21lbiRhbHRfb25saW5lX2FsbF90b3RhbCwgbWVuJGFsdF9vbmxpbmVfYWxsX3RvdGFsKSRwLnZhbHVlLCA1KQ0Kb3ZlcmFsbF9kaXN0X2NvbXBhcmlzb25zW2ksIDddIDwtIHJvdW5kKGtzLnRlc3Qod29tZW4kYWx0X3R3aXR0ZXJfdG90YWwsIG1lbiRhbHRfdHdpdHRlcl90b3RhbCkkcC52YWx1ZSwgNSkNCg0KY29sbmFtZXMob3ZlcmFsbF9kaXN0X2NvbXBhcmlzb25zKSA8LSBjKCJvdmVyYWxsIiwgInByb2ZzIiwgInB1YnNfdG90YWwiLCAiY2l0YXRpb25zX3RvdGFsIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuZXdzX3RvdGFsIiwgIm9ubGluZV9uZXdzX3RvdGFsIiwgInR3aXR0ZXJfdG90YWwiKQ0KDQoNCm92ZXJhbGxfZGlzdF9jb21wYXJpc29ucw0KYGBgDQoNCg0KIyMjIFdpdGhpbiBmaWVsZHMNCg0KYGBge3J9DQpmaWVsZHMgPC0gdW5pcXVlKHNvdXJjZXNfY2hlY2skZ2VuZXJhbF9maWVsZCkNCmZpZWxkcyA8LSBmaWVsZHNbIWlzLm5hKGZpZWxkcyldDQpmaWVsZF9kaXN0X2NvbXBhcmlzb25zIDwtIGRhdGEuZnJhbWUobWF0cml4KE5BLCBuY29sID0gNywgbnJvdyA9IGxlbmd0aChmaWVsZHMpKSkNCg0KZm9yIChpIGluIDE6bGVuZ3RoKGZpZWxkcykpew0KICBmaWVsZCA8LSBmaWVsZHNbaV0NCiAgZGF0YSA8LSBmaWx0ZXIoc291cmNlc19jaGVjaywgDQogICAgICAgICAgICAgICAgIGdlbmVyYWxfZmllbGQgPT0gZmllbGQpDQogIHdvbWVuIDwtIGZpbHRlcihkYXRhLCBpbmZlcnJlZF9nZW5kZXIgPT0gInciKQ0KICBtZW4gPC0gZmlsdGVyKGRhdGEsIGluZmVycmVkX2dlbmRlciA9PSAibSIpDQogIA0KICBmaWVsZF9kaXN0X2NvbXBhcmlzb25zW2ksIDFdIDwtIGZpZWxkDQogIGZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbaSwgMl0gPC0gbnJvdyhkYXRhKQ0KICBmaWVsZF9kaXN0X2NvbXBhcmlzb25zW2ksIDNdIDwtIHJvdW5kKGtzLnRlc3Qod29tZW4kY291bnRfcHVic190b3RhbCwgbWVuJGNvdW50X3B1YnNfdG90YWwpJHAudmFsdWUsIDUpDQogIGZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbaSwgNF0gPC0gcm91bmQoa3MudGVzdCh3b21lbiRjaXRlZF9ieV90b3RhbF9hbGwsIG1lbiRjaXRlZF9ieV90b3RhbF9hbGwpJHAudmFsdWUsIDUpDQogIGZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbaSwgNV0gPC0gcm91bmQoa3MudGVzdCh3b21lbiRuZXdzX2FsbF90b3RhbCwgbWVuJG5ld3NfYWxsX3RvdGFsKSRwLnZhbHVlLCA1KQ0KICBmaWVsZF9kaXN0X2NvbXBhcmlzb25zW2ksIDZdIDwtIHJvdW5kKGtzLnRlc3Qod29tZW4kYWx0X29ubGluZV9hbGxfdG90YWwsIG1lbiRhbHRfb25saW5lX2FsbF90b3RhbCkkcC52YWx1ZSwgNSkNCiAgZmllbGRfZGlzdF9jb21wYXJpc29uc1tpLCA3XSA8LSByb3VuZChrcy50ZXN0KHdvbWVuJGFsdF90d2l0dGVyX3RvdGFsLCBtZW4kYWx0X3R3aXR0ZXJfdG90YWwpJHAudmFsdWUsIDUpDQp9DQoNCmNvbG5hbWVzKGZpZWxkX2Rpc3RfY29tcGFyaXNvbnMpIDwtIGMoImZpZWxkIiwicHJvZnMiLCAicHVic190b3RhbCIsICJjaXRhdGlvbnNfdG90YWwiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm5ld3NfdG90YWwiLCAib25saW5lX25ld3NfdG90YWwiLCAidHdpdHRlcl90b3RhbCIpDQpmaWVsZF9kaXN0X2NvbXBhcmlzb25zDQpgYGANCg0KIyMjIFdpdGhpbiB5ZWFyIGdyb3Vwcw0KYGBge3J9DQp5ZWFyX2dyb3VwcyA8LSB1bmlxdWUocHJvZl9wYW5lbF9maWx0ZXIkZW50cnlfYmF0Y2hfMjAyMykNCnllYXJfZ3JvdXBzIDwtIHllYXJfZ3JvdXBzWyEgeWVhcl9ncm91cHMgPT0gInVwIHRvIE5BIl0NCnllYXJzIDwtIGMoInVwIHRvIDEwIiwidXAgdG8gMjAiLCAidXAgdG8gMzAiLCAidXAgdG8gNDAiLCAidXAgdG8gNTAiKQ0KeWVhcl9ncm91cHMgPC0geWVhcl9ncm91cHNbb3JkZXIobWF0Y2goeWVhcl9ncm91cHMseWVhcnMpKV0NCnllYXJfZ3JvdXBzX2Rpc3RfY29tcGFyaXNvbnMgPC0gZGF0YS5mcmFtZShtYXRyaXgoTkEsIG5jb2wgPSA3LCBucm93ID0gbGVuZ3RoKHllYXJfZ3JvdXBzKSkpDQoNCmZvciAoaSBpbiAxOmxlbmd0aCh5ZWFyX2dyb3Vwcykpew0KICB5ZWFyX2dyb3VwIDwtIHllYXJfZ3JvdXBzW2ldDQogIGRhdGEgPC0gZmlsdGVyKHNvdXJjZXNfY2hlY2ssIA0KICAgICAgICAgICAgICAgICB5ZWFyc19zaW5jZV9lbnRyeSA9PSB5ZWFyX2dyb3VwKQ0KICANCiAgd29tZW4gPC0gZmlsdGVyKGRhdGEsIGluZmVycmVkX2dlbmRlciA9PSAidyIpDQogIG1lbiA8LSBmaWx0ZXIoZGF0YSwgaW5mZXJyZWRfZ2VuZGVyID09ICJtIikNCiAgDQogIHllYXJfZ3JvdXBzX2Rpc3RfY29tcGFyaXNvbnNbaSwgMV0gPC0geWVhcl9ncm91cA0KICB5ZWFyX2dyb3Vwc19kaXN0X2NvbXBhcmlzb25zW2ksIDJdIDwtIG5yb3coZGF0YSkNCiAgeWVhcl9ncm91cHNfZGlzdF9jb21wYXJpc29uc1tpLCAzXSA8LSByb3VuZChrcy50ZXN0KHdvbWVuJGNvdW50X3B1YnNfdG90YWwsIG1lbiRjb3VudF9wdWJzX3RvdGFsKSRwLnZhbHVlLCA1KQ0KICB5ZWFyX2dyb3Vwc19kaXN0X2NvbXBhcmlzb25zW2ksIDRdIDwtIHJvdW5kKGtzLnRlc3Qod29tZW4kY2l0ZWRfYnlfdG90YWxfYWxsLCBtZW4kY2l0ZWRfYnlfdG90YWxfYWxsKSRwLnZhbHVlLCA1KQ0KICB5ZWFyX2dyb3Vwc19kaXN0X2NvbXBhcmlzb25zW2ksIDVdIDwtIHJvdW5kKGtzLnRlc3Qod29tZW4kbmV3c19hbGxfdG90YWwsIG1lbiRuZXdzX2FsbF90b3RhbCkkcC52YWx1ZSwgNSkNCiAgeWVhcl9ncm91cHNfZGlzdF9jb21wYXJpc29uc1tpLCA2XSA8LSByb3VuZChrcy50ZXN0KHdvbWVuJGFsdF9vbmxpbmVfYWxsX3RvdGFsLCBtZW4kYWx0X29ubGluZV9hbGxfdG90YWwpJHAudmFsdWUsIDUpDQogIHllYXJfZ3JvdXBzX2Rpc3RfY29tcGFyaXNvbnNbaSwgN10gPC0gcm91bmQoa3MudGVzdCh3b21lbiRhbHRfdHdpdHRlcl90b3RhbCwgbWVuJGFsdF90d2l0dGVyX3RvdGFsKSRwLnZhbHVlLCA1KQ0KfQ0KDQpjb2xuYW1lcyh5ZWFyX2dyb3Vwc19kaXN0X2NvbXBhcmlzb25zKSA8LSBjKCJmaWVsZCIsICJwcm9mcyIsICJwdWJzX3RvdGFsIiwgImNpdGF0aW9uc190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c190b3RhbCIsICJvbmxpbmVfbmV3c190b3RhbCIsICJ0d2l0dGVyX3RvdGFsIikNCnllYXJfZ3JvdXBzX2Rpc3RfY29tcGFyaXNvbnMNCmBgYA0KIyMjIFdpdGhpbiB5ZWFyIGdyb3VwcyBhbmQgZmllbGRzDQpgYGB7ciB3YXJuaW5nID0gRn0NCnllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnMgPC0gZGF0YS5mcmFtZShtYXRyaXgoTkEsIG5jb2wgPSA4LCBucm93ID0gbGVuZ3RoKHllYXJfZ3JvdXBzKSpsZW5ndGgoZmllbGRzKSkpDQpyb3dfaW5kZXggPC0gMA0KDQpmb3IgKGkgaW4gMTpsZW5ndGgoeWVhcl9ncm91cHMpKXsNCiAgeWVhcl9ncm91cCA8LSB5ZWFyX2dyb3Vwc1tpXQ0KICANCiAgZm9yIChqIGluIDE6bGVuZ3RoKGZpZWxkcykpew0KICAgIGZpZWxkIDwtIGZpZWxkc1tqXQ0KICAgIGRhdGEgPC0gZmlsdGVyKHNvdXJjZXNfY2hlY2ssIA0KICAgICAgICAgICAgICAgICAgIHllYXJzX3NpbmNlX2VudHJ5ID09IHllYXJfZ3JvdXAgJiBnZW5lcmFsX2ZpZWxkID09IGZpZWxkKQ0KICAgIA0KICAgIHdvbWVuIDwtIGZpbHRlcihkYXRhLCBpbmZlcnJlZF9nZW5kZXIgPT0gInciKQ0KICAgIG1lbiA8LSBmaWx0ZXIoZGF0YSwgaW5mZXJyZWRfZ2VuZGVyID09ICJtIikNCiAgICANCiAgICBpZiAobGVuZ3RoKHVuaXF1ZShkYXRhJGluZmVycmVkX2dlbmRlcikpICE9IDIpew0KICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgMV0gPC0geWVhcl9ncm91cA0KICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgMl0gPC0gZmllbGQNCiAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDNdIDwtIG5yb3coZGF0YSkNCiAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDRdIDwtIE5BDQogICAgICB5ZWFyX2dyb3Vwc19maWVsZF9kaXN0X2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCA1XSA8LSBOQQ0KICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgNl0gPC0gTkENCiAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDddIDwtIE5BDQogICAgICB5ZWFyX2dyb3Vwc19maWVsZF9kaXN0X2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCA4XSA8LSBOQQ0KICAgIH1lbHNlew0KICAgICAgaWYgKGxlbmd0aCh3aGljaChjb2xTdW1zKGRhdGFbYygiYWx0X29ubGluZV9hbGxfdG90YWwiLCAibmV3c19hbGxfdG90YWwiLCAiYWx0X3R3aXR0ZXJfdG90YWwiLCAiY2l0ZWRfYnlfdG90YWxfYWxsIiwgImNvdW50X3B1YnNfdG90YWwiKV0pID09IDApKSA+IDApew0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9kaXN0X2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCAxXSA8LSB5ZWFyX2dyb3VwDQogICAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDJdIDwtIGZpZWxkDQogICAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDNdIDwtIG5yb3coZGF0YSkNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgNF0gPC0gTkENCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgNV0gPC0gTkENCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgNl0gPC0gTkENCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgN10gPC0gTkENCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgOF0gPC0gTkENCiAgICAgICAgDQogICAgICB9ZWxzZXsNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgMV0gPC0geWVhcl9ncm91cA0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9kaXN0X2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCAyXSA8LSBmaWVsZA0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9kaXN0X2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCAzXSA8LSBucm93KGRhdGEpDQogICAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDRdIDwtIHJvdW5kKGtzLnRlc3Qod29tZW4kY291bnRfcHVic190b3RhbCwgbWVuJGNvdW50X3B1YnNfdG90YWwpJHAudmFsdWUsIDUpDQogICAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDVdIDwtIHJvdW5kKGtzLnRlc3Qod29tZW4kY2l0ZWRfYnlfdG90YWxfYWxsLCBtZW4kY2l0ZWRfYnlfdG90YWxfYWxsKSRwLnZhbHVlLCA1KQ0KICAgICAgICB5ZWFyX2dyb3Vwc19maWVsZF9kaXN0X2NvbXBhcmlzb25zW3Jvd19pbmRleCtqLCA2XSA8LSByb3VuZChrcy50ZXN0KHdvbWVuJG5ld3NfYWxsX3RvdGFsLCBtZW4kbmV3c19hbGxfdG90YWwpJHAudmFsdWUsIDUpDQogICAgICAgIHllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnNbcm93X2luZGV4K2osIDddIDwtIHJvdW5kKGtzLnRlc3Qod29tZW4kYWx0X29ubGluZV9hbGxfdG90YWwsIG1lbiRhbHRfb25saW5lX2FsbF90b3RhbCkkcC52YWx1ZSwgNSkNCiAgICAgICAgeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29uc1tyb3dfaW5kZXgraiwgOF0gPC0gcm91bmQoa3MudGVzdCh3b21lbiRhbHRfdHdpdHRlcl90b3RhbCwgbWVuJGFsdF90d2l0dGVyX3RvdGFsKSRwLnZhbHVlLCA1KQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICByb3dfaW5kZXggPC0gcm93X2luZGV4ICsgNCANCn0NCg0KY29sbmFtZXMoeWVhcl9ncm91cHNfZmllbGRfZGlzdF9jb21wYXJpc29ucykgPC0gYygieWVhcl9ncm91cCIsICJmaWVsZCIsICJwcm9mcyIsICJwdWJzX3RvdGFsIiwgImNpdGF0aW9uc190b3RhbCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibmV3c190b3RhbCIsICJvbmxpbmVfbmV3c190b3RhbCIsICJ0d2l0dGVyX3RvdGFsIikNCnllYXJfZ3JvdXBzX2ZpZWxkX2Rpc3RfY29tcGFyaXNvbnMNCmBgYA0KDQoNCiMjIyBXcml0aW5nIHRoaXMgb3V0DQpgYGB7cn0NCndyaXRlX2NzdihvdmVyYWxsX2Rpc3RfY29tcGFyaXNvbnMsICJQbG90c19hcHJpbC9TdXBwbGVtZW50YWwvZGlzdF9vdmVyYWxsLmNzdiIpDQp3cml0ZV9jc3YoZmllbGRfZGlzdF9jb21wYXJpc29ucywgIlBsb3RzX2FwcmlsL1N1cHBsZW1lbnRhbC9kaXN0X3llYXIuY3N2IikNCndyaXRlX2NzdihmaWVsZF9kaXN0X2NvbXBhcmlzb25zLCAiUGxvdHNfYXByaWwvU3VwcGxlbWVudGFsL2Rpc3RfZmllbGQuY3N2IikNCndyaXRlX2Nzdih5ZWFyX2dyb3Vwc19maWVsZF9kaXN0X2NvbXBhcmlzb25zLCAiUGxvdHNfYXByaWwvU3VwcGxlbWVudGFsL2Rpc3RfeWVhcl9maWVsZC5jc3YiKQ0KYGBgDQoNCg0KDQojIFJlZ3Jlc3Npb24gbW9kZWxzDQoNCkJpbmFyeSB2YXJpYWJsZXMgZm9yIGFueSBhdHRlbnRpb246DQpgYGB7cn0NCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9uZXdzIDwtIGFzLmZhY3RvcihpZmVsc2UocHJvZl9wYW5lbF9maWx0ZXIkbmV3c19hbGwgPiAwLCAxLCAwKSkNCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9uZXdzX2wgPC0gYXMuZmFjdG9yKGlmZWxzZShwcm9mX3BhbmVsX2ZpbHRlciRuZXdzX2FsbF9sID4gMCwgMSwgMCkpDQoNCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9vbmxpbmVfbmV3cyA8LSBhcy5mYWN0b3IoaWZlbHNlKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfYWxsID4gMCwgMSwgMCkpDQpwcm9mX3BhbmVsX2ZpbHRlciRhbnlfb25saW5lX25ld3NfbCA8LSBhcy5mYWN0b3IoaWZlbHNlKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfYWxsX2wgPiAwLCAxLCAwKSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYW55X29ubGluZV9uZXdzX2dlbiA8LSBhcy5mYWN0b3IoaWZlbHNlKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfZ2VuZXJhbF9hbGwgPiAwLCAxLCAwKSkNCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9vbmxpbmVfbmV3c19nZW5fbCA8LSBhcy5mYWN0b3IoaWZlbHNlKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfZ2VuZXJhbF9hbGxfbCA+IDAsIDEsIDApKQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciRhbnlfb25saW5lX25ld3NfbmFtZSA8LSBhcy5mYWN0b3IoaWZlbHNlKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfbmFtZV9hbGwgPiAwLCAxLCAwKSkNCnByb2ZfcGFuZWxfZmlsdGVyJGFueV9vbmxpbmVfbmV3c19uYW1lX2wgPC0gYXMuZmFjdG9yKGlmZWxzZShwcm9mX3BhbmVsX2ZpbHRlciRhbHRfb25saW5lX25hbWVfYWxsX2wgPiAwLCAxLCAwKSkNCg0KcHJvZl9wYW5lbF9maWx0ZXIkYW55X3R3aXR0ZXIgPC0gYXMuZmFjdG9yKGlmZWxzZShwcm9mX3BhbmVsX2ZpbHRlciRhbHRfdHdpdHRlciA+IDAsIDEsIDApKQ0KcHJvZl9wYW5lbF9maWx0ZXIkYW55X3R3aXR0ZXJfbCA8LSBhcy5mYWN0b3IoaWZlbHNlKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF90d2l0dGVyX2wgPiAwLCAxLCAwKSkNCmBgYA0KDQpCaW5hcnkgdmFyaWFibGVzIGZvciBiZWxvbmdpbmcgdG8gdGhlIHRvcCAxMC8yMCUgaW4gdGhlIGF0dGVudGlvbiBmb3IgZWFjaCBzb3VyY2UuDQpgYGB7cn0NCnBhbmVsX2ZpbHRlcl9sb25nIDwtIHByb2ZfcGFuZWxfZmlsdGVyICU+JQ0KICBwaXZvdF9sb25nZXIoYyhhbHRfb25saW5lX2FsbCwgYWx0X29ubGluZV9uYW1lX2FsbCwgbmV3c19hbGwsIGFsdF90d2l0dGVyKSwgbmFtZXNfdG8gPSAibWVhc3VyZSIsIHZhbHVlc190byA9ICJ2YWx1ZSIpDQoNCnRvcF8xMF9hdHRuIDwtIHBhbmVsX2ZpbHRlcl9sb25nICU+JQ0KICBmaWx0ZXIoIWlzLm5hKGdlbmVyYWxfZmllbGQpICYgIWlzLm5hKHllYXIpICYgeWVhciA+IDIwMTEpJT4lDQogIGdyb3VwX2J5KGdlbmVyYWxfZmllbGQsIHllYXIsIG1lYXN1cmUpJT4lDQogIGZpbHRlcihxdWFudGlsZSh2YWx1ZSwgMC45MCwgbmEucm0gPSBUUlVFKTx2YWx1ZSklPiUNCiAgc2VsZWN0KHByb2ZpbGVfaWQsIGdlbmVyYWxfZmllbGQsIHllYXIsIG1lYXN1cmUsIHZhbHVlKQ0KDQp0b3BfMTBfYXR0biRtZWFzdXJlIDwtIHBhc3RlMCh0b3BfMTBfYXR0biRtZWFzdXJlLCAiX3RvcF8xMCIpDQoNCg0KdG9wXzEwX2F0dG4gPC0gdG9wXzEwX2F0dG4gJT4lDQogIHBpdm90X3dpZGVyKG5hbWVzX2Zyb20gPSAibWVhc3VyZSIpJT4lDQogIG11dGF0ZShhY3Jvc3MoY29udGFpbnMoJ3RvcF8xMCcpLCAgfmlmZWxzZShpcy5uYSguKSwgMCwgMSkpKQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciA8LSBtZXJnZShwcm9mX3BhbmVsX2ZpbHRlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcF8xMF9hdHRuW2MoInllYXIiLCAicHJvZmlsZV9pZCIsICJnZW5lcmFsX2ZpZWxkIiwgImFsdF9vbmxpbmVfYWxsX3RvcF8xMCIsICJhbHRfb25saW5lX25hbWVfYWxsX3RvcF8xMCIsICJhbHRfdHdpdHRlcl90b3BfMTAiLCAibmV3c19hbGxfdG9wXzEwIildLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYnkgPSBjKCJwcm9maWxlX2lkIiwgInllYXIiLCAiZ2VuZXJhbF9maWVsZCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnggPSBUUlVFLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnkgPSBGQUxTRSkNCg0KdG9wXzIwX2F0dG4gPC0gcGFuZWxfZmlsdGVyX2xvbmcgJT4lDQogIGZpbHRlcighaXMubmEoZ2VuZXJhbF9maWVsZCkgJiAhaXMubmEoeWVhcikgJiB5ZWFyID4gMjAxMSklPiUNCiAgZ3JvdXBfYnkoZ2VuZXJhbF9maWVsZCwgeWVhciwgbWVhc3VyZSklPiUNCiAgZmlsdGVyKHF1YW50aWxlKHZhbHVlLCAwLjgwLCBuYS5ybSA9IFRSVUUpPHZhbHVlKSU+JQ0KICBzZWxlY3QocHJvZmlsZV9pZCwgZ2VuZXJhbF9maWVsZCwgeWVhciwgbWVhc3VyZSwgdmFsdWUpDQoNCnRvcF8yMF9hdHRuJG1lYXN1cmUgPC0gcGFzdGUwKHRvcF8yMF9hdHRuJG1lYXN1cmUsICJfdG9wXzIwIikNCg0KDQp0b3BfMjBfYXR0biA8LSB0b3BfMjBfYXR0biAlPiUNCiAgcGl2b3Rfd2lkZXIobmFtZXNfZnJvbSA9ICJtZWFzdXJlIiklPiUNCiAgbXV0YXRlKGFjcm9zcyhjb250YWlucygndG9wXzIwJyksICB+aWZlbHNlKGlzLm5hKC4pLCAwLCAxKSkpDQoNCnByb2ZfcGFuZWxfZmlsdGVyIDwtIG1lcmdlKHByb2ZfcGFuZWxfZmlsdGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wXzIwX2F0dG5bYygieWVhciIsICJwcm9maWxlX2lkIiwgImdlbmVyYWxfZmllbGQiLCAiYWx0X29ubGluZV9hbGxfdG9wXzIwIiwgImFsdF9vbmxpbmVfbmFtZV9hbGxfdG9wXzIwIiwgImFsdF90d2l0dGVyX3RvcF8yMCIsICJuZXdzX2FsbF90b3BfMjAiKV0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICBieSA9IGMoInByb2ZpbGVfaWQiLCAieWVhciIsICJnZW5lcmFsX2ZpZWxkIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueCA9IFRSVUUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBhbGwueSA9IEZBTFNFKQ0KDQpwcm9mX3BhbmVsX2ZpbHRlciA8LSBmaWx0ZXIocHJvZl9wYW5lbF9maWx0ZXIsICFpcy5uYShnZW5lcmFsX2ZpZWxkKSkNCmBgYA0KDQpTcGxpdCBkYXRhc2V0cyBwZXIgZmllbGQ6DQpgYGB7cn0NCnN0ZW0gPC0gZmlsdGVyKHByb2ZfcGFuZWxfZmlsdGVyLCBnZW5lcmFsX2ZpZWxkID09ICJTVEVNIikNCnNvY19zY2kgPC0gZmlsdGVyKHByb2ZfcGFuZWxfZmlsdGVyLCBnZW5lcmFsX2ZpZWxkID09ICJTb2NpYWwgc2NpZW5jZXMiKQ0KYXJ0cyA8LSBmaWx0ZXIocHJvZl9wYW5lbF9maWx0ZXIsIGdlbmVyYWxfZmllbGQgPT0gIkFydHMgJiBIdW1hbml0aWVzIikNCm1lZGljaW5lIDwtIGZpbHRlcihwcm9mX3BhbmVsX2ZpbHRlciwgZ2VuZXJhbF9maWVsZCA9PSAiTWVkaWNpbmUiKQ0KYGBgDQoNCg0KIyMgQ291bnQgbW9kZWxzDQoNCiMjIyBOZXdzDQpUaGlzIHRpbWUgcGVyaW9kJ3MgbmV3cyBnaXZlbiBvbmUncyB0b3RhbCBjaXRhdGlvbnMvcHVibGljYXRpb25zLCBwYXN0IHRvdGFsIA0KYXR0ZW50aW9uLCBjb250cm9sbGluZyBmb3IgdGhlIGZpZWxkIGFuZCB5ZWFyIChMZXhpcyBzYW1wbGUgb25seSkuIFBvb2xlZCBtb2RlbA0Kd2l0aCBjbHVzdGVyZWQgU0VzOg0KYGBge3Igd2FybmluZyA9IEZ9DQpmaWVsZHMgPC0gYygic3RlbSIsICJzb2Nfc2NpIiwgIm1lZGljaW5lIiwgImFydHMiKQ0KDQphbGxfcHJlZGljdGlvbnNfbmV3cyA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gNywgbnJvdyA9IDApKQ0KYWxsX21vZGVsc19uZXdzIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSAxMCwgbnJvdyA9IDApKQ0KYWxsX2NvbXBhcmlzb25zX25ld3MgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDYsIG5yb3cgPSAwKSkNCg0KZm9yIChmaWVsZCBpbiBmaWVsZHMpew0KICANCiAgZmllbGRfZGF0YXNldCA8LSBnZXQoZmllbGQpDQogIA0KICBuZXdzX21vZGVsIDwtIGxtKG5ld3NfYWxsIH4gIyBwcm9mZXNzb3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBuZXdzX2FsbF9sICsgDQogICAgICAgICAgICAgICAgICAgICBjaXRlZF9ieV90b3RhbF9hbGxfbCArIA0KICAgICAgICAgICAgICAgICAgICAgIyBnZW5kZXINCiAgICAgICAgICAgICAgICAgICAgIGluZmVycmVkX2dlbmRlciArDQogICAgICAgICAgICAgICAgICAgICAjIGF0dGVudGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGFsdF9vbmxpbmVfYWxsX3RvdGFsX2wgKyBhbHRfdHdpdHRlcl90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgICMgY29hdXRob3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBjb2FfdG90X2NpdGVkX2J5X3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGNvYV9vbmxpbmVfbmV3c190b3RhbF9sICsgY29hX3R3aXR0ZXJfdG90YWxfbCthcy5mYWN0b3IoeWVhciksDQogICAgICAgICAgICAgICAgICAgZGF0YSA9IGZpZWxkX2RhdGFzZXQpIA0KICANCiAgbW9kZWxfcmVzdWx0IDwtIGNvZWZ0ZXN0KG5ld3NfbW9kZWwsIHZjb3YgPSB2Y292Q0wsIGNsdXN0ZXIgPSB+cHJvZmlsZV9pZClbLF0gJT4lIA0KICAgIGFzLmRhdGEuZnJhbWUoKSAlPiUgDQogICAgdGliYmxlOjpyb3duYW1lc190b19jb2x1bW4odmFyID0gInRlcm0iKQ0KICANCiAgbW9kZWxfcmVzdWx0W25yb3cobW9kZWxfcmVzdWx0KSsxLCAxXSA8LSAiUl4yIg0KICBtb2RlbF9yZXN1bHRbbnJvdyhtb2RlbF9yZXN1bHQpLCAyOm5jb2wobW9kZWxfcmVzdWx0KV0gPC0gcm91bmQoc3VtbWFyeShuZXdzX21vZGVsKSRyLnNxdWFyZWQsMykNCiAgbW9kZWxfcmVzdWx0JGZpZWxkIDwtIGZpZWxkDQogIA0KICBhbGxfbW9kZWxzX25ld3MgPC0gcmJpbmQoYWxsX21vZGVsc19uZXdzLA0KICAgICAgICAgICAgICAgICAgICAgIG1vZGVsX3Jlc3VsdCkNCiAgDQogIHByZWRpY3Rpb24gPC0gcHJlZGljdF9yZXNwb25zZShuZXdzX21vZGVsLCBjKCJpbmZlcnJlZF9nZW5kZXIiKSwgdmNvdl9mdW4gPSAidmNvdkNMIiwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Y292X3R5cGUgPSAiSEMwIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZjb3YuYXJncyA9IGxpc3QoY2x1c3RlciA9IGZpZWxkX2RhdGFzZXQkcHJvZmlsZV9pZCkpDQogIHByZWRpY3Rpb24kZmllbGQgPC0gZmllbGQNCiAgDQogIGdlbmRlcl9jb21wYXJpc29uIDwtIHRlc3RfcHJlZGljdGlvbnMobmV3c19tb2RlbCwgYygiaW5mZXJyZWRfZ2VuZGVyIiksIHZjb3ZfZnVuID0gInZjb3ZDTCIpDQogIGdlbmRlcl9jb21wYXJpc29uJGZpZWxkIDwtIGZpZWxkDQogIA0KICBhbGxfY29tcGFyaXNvbnNfbmV3cyA8LSByYmluZChhbGxfY29tcGFyaXNvbnNfbmV3cywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmRlcl9jb21wYXJpc29uKQ0KICANCiAgYWxsX3ByZWRpY3Rpb25zX25ld3MgPC0gcmJpbmQoYWxsX3ByZWRpY3Rpb25zX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWN0aW9uKQ0KICANCiAgDQp9DQoNCmFsbF9tb2RlbHNfbmV3cyRzdGFycyA8LSBpZmVsc2UoYWxsX21vZGVsc19uZXdzJGBQcig+fHR8KWAgPD0gMC4wMDEsICIqKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9tb2RlbHNfbmV3cyRgUHIoPnx0fClgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfbW9kZWxzX25ld3MkYFByKD58dHwpYCA8PSAwLjA1LCAiKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfbW9kZWxzX25ld3MkYFByKD58dHwpYCA8PSAwLjEsICIuIiwgIiIpKSkpDQoNCmFsbF9jb21wYXJpc29uc19uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfY29tcGFyaXNvbnNfbmV3cyRgcC52YWx1ZWAgPD0gMC4wMDEsICIqKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9jb21wYXJpc29uc19uZXdzJGBwLnZhbHVlYCA8PSAwLjAwMSwgIioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2NvbXBhcmlzb25zX25ld3MkYHAudmFsdWVgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9jb21wYXJpc29uc19uZXdzJGBwLnZhbHVlYCA8PSAwLjEsICIuIiwgIiIpKSkpDQoNCmFsbF9jb21wYXJpc29uc19uZXdzJGdyb3VwMSA8LSBzdHJfc3BsaXRfaShhbGxfY29tcGFyaXNvbnNfbmV3cyRpbmZlcnJlZF9nZW5kZXIsICItIiwgMSkNCmFsbF9jb21wYXJpc29uc19uZXdzJGdyb3VwMiA8LSBzdHJfc3BsaXRfaShhbGxfY29tcGFyaXNvbnNfbmV3cyRpbmZlcnJlZF9nZW5kZXIsICItIiwgMikNCg0KYWxsX2NvbXBhcmlzb25zX25ld3MkcF9yb3VuZGVkIDwtIHJvdW5kKGFsbF9jb21wYXJpc29uc19uZXdzJHAudmFsdWUsIDQpDQpgYGANCg0KUGxvdCBnZW5kZXIgZGlmZmVyZW5jZXM6DQpgYGB7ciBmaWcuaGVpZ2h0PTMsIGZpZ2gud2lkdGggPSA0fQ0KbmV3c19nZW5kZXJfcGxvdCA8LSBhbGxfcHJlZGljdGlvbnNfbmV3cyAlPiUNCiAgIGdncGxvdChhZXMoeCA9IGZjdF9yZXYoZmllbGQpLA0KICAgICAgICAgICAgICB5ID0gcHJlZGljdGVkLA0KICAgICAgICAgICAgICB5bWluID0gY29uZi5sb3csDQogICAgICAgICAgICAgIHltYXggPSBjb25mLmhpZ2gsDQogICAgICAgICAgICAgIGNvbG9yID0geCkpICsNCiAgIGdlb21fcG9pbnRyYW5nZShwb3NpdGlvbiA9IHBvc2l0aW9uX2RvZGdlKHdpZHRoID0gMC41KSwNCiAgICAgICAgICAgICAgICAgICBzaXplID0gMC41KSsNCiAgIGdndGl0bGUoIihhKSBQcmVkaWN0ZWQgdmFsdWVzIG9mIG5ld3MgYXR0ZW50aW9uIikrDQogICAgIHN0YXRfcHZhbHVlX21hbnVhbCgNCiAgICBhbGxfY29tcGFyaXNvbnNfbmV3cywNCiAgICB5LnBvc2l0aW9uID0gYyg0LjYsIDQuNiwgNCwgNCksDQogICAgbGFiZWwuc2l6ZSA9IDMsDQogICAgbGFiZWwgPSAie3N0YXJzfSIsDQogICAgcmVtb3ZlLmJyYWNrZXQgPSBGQUxTRSwNCiAgICBicmFja2V0Lm51ZGdlLnkgPSAtMiwNCiAgICB4ID0gImZpZWxkIg0KICAgICkrDQogICAgeGxhYigiRmllbGQiKSsNCiAgIHNjYWxlX3hfZGlzY3JldGUobGFiZWxzPWMoImFydHMiID0gIkFydHMgJiBIdW1hbml0aWVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1lZGljaW5lIiA9ICJNZWRpY2luZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzb2Nfc2NpIiA9ICJTb2NpYWwgc2NpZW5jZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzdGVtIiA9ICJTVEVNIikpKw0KICAgeWxhYigiTmV3cyBhdHRlbnRpb24gcGVyIHllYXIiKSsNCiAgIGxhYnMoY29sb3IgPSAiSW5mZXJyZWQgZ2VuZGVyIikrDQogICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygiIzM0ZDM5OSIsICIjZmJiZjI0IiksIGxhYmVscyA9IGMoIk1hbiIsICJXb21hbiIpKSsNCiAgIHRoZW1lX21pbmltYWxfaGdyaWQoKSsNCiAgIHRoZW1lKHBsb3QudGl0bGUgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDgpLA0KICAgICAgICAgYXhpcy50ZXh0LnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDgpLA0KICAgICAgICAgYXhpcy50aXRsZS55ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgICBheGlzLnRleHQueCA9IGVsZW1lbnRfdGV4dChzaXplID0gOCkgLA0KICAgICAgICAgYXhpcy50aXRsZS54ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgICBsZWdlbmQudGl0bGU9ZWxlbWVudF90ZXh0KHNpemU9OCksIA0KICAgICAgICAgbGVnZW5kLnRleHQ9ZWxlbWVudF90ZXh0KHNpemU9NykpDQpgYGANCg0KYGBge3J9DQprbml0cjo6a2FibGUoYWxsX21vZGVsc19uZXdzKQ0KYGBgDQoNCg0KIyMjIE9ubGluZSBOZXdzDQpUaGlzIHRpbWUgcGVyaW9kJ3MgbmV3cyBnaXZlbiBvbmUncyB0b3RhbCBjaXRhdGlvbnMvcHVibGljYXRpb25zLCBwYXN0IHRvdGFsIA0KYXR0ZW50aW9uLCBjb250cm9sbGluZyBmb3IgdGhlIGZpZWxkIGFuZCB5ZWFyIChMZXhpcyBzYW1wbGUgb25seSkuIFBvb2xlZCBtb2RlbA0Kd2l0aCBjbHVzdGVyZWQgU0VzOg0KYGBge3J9DQpmaWVsZHMgPC0gYygic3RlbSIsICJzb2Nfc2NpIiwgIm1lZGljaW5lIiwgImFydHMiKQ0KDQphbGxfcHJlZGljdGlvbnNfb25saW5lX25ld3MgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDcsIG5yb3cgPSAwKSkNCmFsbF9tb2RlbHNfb25saW5lX25ld3MgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDEwLCBucm93ID0gMCkpDQphbGxfY29tcGFyaXNvbnNfb25saW5lX25ld3MgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDYsIG5yb3cgPSAwKSkNCg0KZm9yIChmaWVsZCBpbiBmaWVsZHMpew0KICANCiAgZmllbGRfZGF0YXNldCA8LSBnZXQoZmllbGQpDQogIA0KICBuZXdzX21vZGVsIDwtIGxtKGFsdF9vbmxpbmVfYWxsIH4gIyBwcm9mZXNzb3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgYWx0X29ubGluZV9hbGxfbCsNCiAgICAgICAgICAgICAgICAgICAgICAgICBjaXRlZF9ieV90b3RhbF9hbGxfbCArIA0KICAgICAgICAgICAgICAgICAgICAgICAgICMgZ2VuZGVyDQogICAgICAgICAgICAgICAgICAgICAgICAgaW5mZXJyZWRfZ2VuZGVyICArDQogICAgICAgICAgICAgICAgICAgICAgICAgIyBhdHRlbnRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgbmV3c19hbGxfdG90YWxfbCArIGFsdF90d2l0dGVyX3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICMgY29hdXRob3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgY29hX3RvdF9jaXRlZF9ieV90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAjIGNvYXV0aG9yIHB1YmxpY2F0aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgIGNvYV9vbmxpbmVfbmV3c190b3RhbF9sICsgY29hX3R3aXR0ZXJfdG90YWxfbCthcy5mYWN0b3IoeWVhciksDQogICAgICAgICAgICAgICAgICAgZGF0YSA9IGZpZWxkX2RhdGFzZXQpIA0KICANCiAgbW9kZWxfcmVzdWx0IDwtIGNvZWZ0ZXN0KG5ld3NfbW9kZWwsIHZjb3YgPSB2Y292Q0wsIGNsdXN0ZXIgPSB+cHJvZmlsZV9pZClbLF0gJT4lIA0KICAgIGFzLmRhdGEuZnJhbWUoKSAlPiUgDQogICAgdGliYmxlOjpyb3duYW1lc190b19jb2x1bW4odmFyID0gInRlcm0iKQ0KICANCiAgbW9kZWxfcmVzdWx0W25yb3cobW9kZWxfcmVzdWx0KSsxLCAxXSA8LSAiUl4yIg0KICBtb2RlbF9yZXN1bHRbbnJvdyhtb2RlbF9yZXN1bHQpLCAyOm5jb2wobW9kZWxfcmVzdWx0KV0gPC0gcm91bmQoc3VtbWFyeShuZXdzX21vZGVsKSRyLnNxdWFyZWQsMykNCiAgbW9kZWxfcmVzdWx0JGZpZWxkIDwtIGZpZWxkDQogIA0KICBhbGxfbW9kZWxzX29ubGluZV9uZXdzIDwtIHJiaW5kKGFsbF9tb2RlbHNfb25saW5lX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgbW9kZWxfcmVzdWx0KQ0KICANCiAgcHJlZGljdGlvbiA8LSBwcmVkaWN0X3Jlc3BvbnNlKG5ld3NfbW9kZWwsIGMoImluZmVycmVkX2dlbmRlciIpLCB2Y292X2Z1biA9ICJ2Y292Q0wiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZjb3ZfdHlwZSA9ICJIQzAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmNvdi5hcmdzID0gbGlzdChjbHVzdGVyID0gZmllbGRfZGF0YXNldCRwcm9maWxlX2lkKSkNCiAgcHJlZGljdGlvbiRmaWVsZCA8LSBmaWVsZA0KICANCiAgZ2VuZGVyX2NvbXBhcmlzb24gPC0gdGVzdF9wcmVkaWN0aW9ucyhuZXdzX21vZGVsLCBjKCJpbmZlcnJlZF9nZW5kZXIiKSwgdmNvdl9mdW4gPSAidmNvdkNMIikNCiAgZ2VuZGVyX2NvbXBhcmlzb24kZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyA8LSByYmluZChhbGxfY29tcGFyaXNvbnNfb25saW5lX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5kZXJfY29tcGFyaXNvbikNCiAgDQogIGFsbF9wcmVkaWN0aW9uc19vbmxpbmVfbmV3cyA8LSByYmluZChhbGxfcHJlZGljdGlvbnNfb25saW5lX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWN0aW9uKQ0KICANCiAgDQp9DQoNCmFsbF9tb2RlbHNfb25saW5lX25ld3Mkc3RhcnMgPC0gaWZlbHNlKGFsbF9tb2RlbHNfb25saW5lX25ld3MkYFByKD58dHwpYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx0fClgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfbW9kZWxzX29ubGluZV9uZXdzJGBQcig+fHR8KWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx0fClgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2NvbXBhcmlzb25zX29ubGluZV9uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRgcC52YWx1ZWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfY29tcGFyaXNvbnNfb25saW5lX25ld3MkZ3JvdXAxIDwtIHN0cl9zcGxpdF9pKGFsbF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRpbmZlcnJlZF9nZW5kZXIsICItIiwgMSkNCmFsbF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRncm91cDIgPC0gc3RyX3NwbGl0X2koYWxsX2NvbXBhcmlzb25zX29ubGluZV9uZXdzJGluZmVycmVkX2dlbmRlciwgIi0iLCAyKQ0KDQphbGxfY29tcGFyaXNvbnNfb25saW5lX25ld3MkcF9yb3VuZGVkIDwtIHJvdW5kKGFsbF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRwLnZhbHVlLCA0KQ0KYGBgDQoNClBsb3QgZ2VuZGVyIGRpZmZlcmVuY2VzOg0KYGBge3IgZmlnLmhlaWdodD0zLCBmaWdoLndpZHRoID0gNH0NCm9ubGluZV9uZXdzX2dlbmRlcl9wbG90IDwtIGFsbF9wcmVkaWN0aW9uc19vbmxpbmVfbmV3cyAlPiUNCiAgIGdncGxvdChhZXMoeCA9IGZjdF9yZXYoZmllbGQpLA0KICAgICAgICAgICAgICB5ID0gcHJlZGljdGVkLA0KICAgICAgICAgICAgICB5bWluID0gY29uZi5sb3csDQogICAgICAgICAgICAgIHltYXggPSBjb25mLmhpZ2gsDQogICAgICAgICAgICAgIGNvbG9yID0geCkpICsNCiAgIGdlb21fcG9pbnRyYW5nZShwb3NpdGlvbiA9IHBvc2l0aW9uX2RvZGdlKHdpZHRoID0gMC41KSwNCiAgICAgICAgICAgICAgICAgICBzaXplID0gMC41KSsNCiAgICN5bGltKDIsIDUuNSkrDQogICBnZ3RpdGxlKCIoYikgUHJlZGljdGVkIHZhbHVlcyBvZiBvbmxpbmUgbmV3cyBhdHRlbnRpb24iKSsNCiAgICAgc3RhdF9wdmFsdWVfbWFudWFsKA0KICAgIGFsbF9jb21wYXJpc29uc19vbmxpbmVfbmV3cywNCiAgICB5LnBvc2l0aW9uID0gYyg3LCA3LCA0LCA0KSwNCiAgICBsYWJlbC5zaXplID0gMywNCiAgICBsYWJlbCA9ICJ7c3RhcnN9IiwNCiAgICByZW1vdmUuYnJhY2tldCA9IEZBTFNFLA0KICAgIGJyYWNrZXQubnVkZ2UueSA9IC0yLA0KICAgIHggPSAiZmllbGQiDQogICAgKSsNCiAgICB4bGFiKCJGaWVsZCIpKw0KICAgc2NhbGVfeF9kaXNjcmV0ZSgpKw0KICAgc2NhbGVfeF9kaXNjcmV0ZShsYWJlbHM9YygiYXJ0cyIgPSAiQXJ0cyAmIEh1bWFuaXRpZXMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWVkaWNpbmUiID0gIk1lZGljaW5lIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNvY19zY2kiID0gIlNvY2lhbCBzY2llbmNlIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInN0ZW0iID0gIlNURU0iKSkrDQogICB5bGFiKCJPbmxpbmUgbmV3cyBhdHRlbnRpb24gcGVyIHllYXIiKSsNCiAgIGxhYnMoY29sb3IgPSAiSW5mZXJyZWQgZ2VuZGVyIikrDQogICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygiIzM0ZDM5OSIsICIjZmJiZjI0IiksIGxhYmVscyA9IGMoIk1hbiIsICJXb21hbiIpKSsNCiAgIHRoZW1lX21pbmltYWxfaGdyaWQoKSsNCiAgIHRoZW1lKHBsb3QudGl0bGUgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDgpLA0KICAgICAgICAgYXhpcy50ZXh0LnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDgpLA0KICAgICAgICAgYXhpcy50aXRsZS55ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgICBheGlzLnRleHQueCA9IGVsZW1lbnRfdGV4dChzaXplID0gOCkgLA0KICAgICAgICAgYXhpcy50aXRsZS54ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgICBsZWdlbmQudGl0bGU9ZWxlbWVudF90ZXh0KHNpemU9OCksIA0KICAgICAgICAgbGVnZW5kLnRleHQ9ZWxlbWVudF90ZXh0KHNpemU9NykpDQpgYGANCg0KYGBge3J9DQprbml0cjo6a2FibGUoYWxsX21vZGVsc19vbmxpbmVfbmV3cykNCmBgYA0KDQoNCiMjIyBUd2l0dGVyDQpUaGlzIHRpbWUgcGVyaW9kJ3MgbmV3cyBnaXZlbiBvbmUncyB0b3RhbCBjaXRhdGlvbnMvcHVibGljYXRpb25zLCBwYXN0IHRvdGFsIA0KYXR0ZW50aW9uLCBjb250cm9sbGluZyBmb3IgdGhlIGZpZWxkIGFuZCB5ZWFyIChMZXhpcyBzYW1wbGUgb25seSkuIFBvb2xlZCBtb2RlbA0Kd2l0aCBjbHVzdGVyZWQgU0VzOg0KYGBge3J9DQpmaWVsZHMgPC0gYygic3RlbSIsICJzb2Nfc2NpIiwgIm1lZGljaW5lIiwgImFydHMiKQ0KDQphbGxfcHJlZGljdGlvbnNfdHdpdHRlciA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gNywgbnJvdyA9IDApKQ0KYWxsX21vZGVsc190d2l0dGVyIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSAxMCwgbnJvdyA9IDApKQ0KYWxsX2NvbXBhcmlzb25zX3R3aXR0ZXIgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDYsIG5yb3cgPSAwKSkNCg0KZm9yIChmaWVsZCBpbiBmaWVsZHMpew0KICANCiAgZmllbGRfZGF0YXNldCA8LSBnZXQoZmllbGQpDQogIA0KICBuZXdzX21vZGVsIDwtIGxtKGFsdF90d2l0dGVyIH4gIyBwcm9mZXNzb3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBhbHRfdHdpdHRlcl9sICsgDQogICAgICAgICAgICAgICAgICAgICBjb3VudF9wdWJzX3RvdGFsX2wgKyBjaXRlZF9ieV90b3RhbF9hbGxfbCArIA0KICAgICAgICAgICAgICAgICAgICAgIyBnZW5kZXINCiAgICAgICAgICAgICAgICAgICAgIGluZmVycmVkX2dlbmRlciArDQogICAgICAgICAgICAgICAgICAgICAjIGF0dGVudGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIG5ld3NfYWxsX3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgYWx0X29ubGluZV9hbGxfdG90YWxfbCArDQogICAgICAgICAgICAgICAgICAgICAjIGNvYXV0aG9yIHB1YmxpY2F0aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgY29hX3RvdF9jaXRlZF9ieV90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgICMgY29hdXRob3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBjb2Ffb25saW5lX25ld3NfdG90YWxfbCArIGNvYV90d2l0dGVyX3RvdGFsX2wrYXMuZmFjdG9yKHllYXIpLA0KICAgICAgICAgICAgICAgICAgIGRhdGEgPSBmaWVsZF9kYXRhc2V0KSANCiAgDQogIG1vZGVsX3Jlc3VsdCA8LSBjb2VmdGVzdChuZXdzX21vZGVsLCB2Y292ID0gdmNvdkNMLCBjbHVzdGVyID0gfnByb2ZpbGVfaWQpWyxdICU+JSANCiAgICBhcy5kYXRhLmZyYW1lKCkgJT4lIA0KICAgIHRpYmJsZTo6cm93bmFtZXNfdG9fY29sdW1uKHZhciA9ICJ0ZXJtIikNCiAgDQogIG1vZGVsX3Jlc3VsdFtucm93KG1vZGVsX3Jlc3VsdCkrMSwgMV0gPC0gIlJeMiINCiAgbW9kZWxfcmVzdWx0W25yb3cobW9kZWxfcmVzdWx0KSwgMjpuY29sKG1vZGVsX3Jlc3VsdCldIDwtIHJvdW5kKHN1bW1hcnkobmV3c19tb2RlbCkkci5zcXVhcmVkLDMpDQogIG1vZGVsX3Jlc3VsdCRmaWVsZCA8LSBmaWVsZA0KICANCiAgYWxsX21vZGVsc190d2l0dGVyIDwtIHJiaW5kKGFsbF9tb2RlbHNfdHdpdHRlciwNCiAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9yZXN1bHQpDQogIA0KICBwcmVkaWN0aW9uIDwtIHByZWRpY3RfcmVzcG9uc2UobmV3c19tb2RlbCwgYygiaW5mZXJyZWRfZ2VuZGVyIiksIHZjb3ZfZnVuID0gInZjb3ZDTCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmNvdl90eXBlID0gIkhDMCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Y292LmFyZ3MgPSBsaXN0KGNsdXN0ZXIgPSBmaWVsZF9kYXRhc2V0JHByb2ZpbGVfaWQpKQ0KICBwcmVkaWN0aW9uJGZpZWxkIDwtIGZpZWxkDQogIA0KICBnZW5kZXJfY29tcGFyaXNvbiA8LSB0ZXN0X3ByZWRpY3Rpb25zKG5ld3NfbW9kZWwsIGMoImluZmVycmVkX2dlbmRlciIpLCB2Y292X2Z1biA9ICJ2Y292Q0wiKQ0KICBnZW5kZXJfY29tcGFyaXNvbiRmaWVsZCA8LSBmaWVsZA0KICANCiAgYWxsX2NvbXBhcmlzb25zX3R3aXR0ZXIgPC0gcmJpbmQoYWxsX2NvbXBhcmlzb25zX3R3aXR0ZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5kZXJfY29tcGFyaXNvbikNCiAgDQogIGFsbF9wcmVkaWN0aW9uc190d2l0dGVyIDwtIHJiaW5kKGFsbF9wcmVkaWN0aW9uc190d2l0dGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljdGlvbikNCiAgDQogIA0KfQ0KDQphbGxfbW9kZWxzX3R3aXR0ZXIkc3RhcnMgPC0gaWZlbHNlKGFsbF9tb2RlbHNfdHdpdHRlciRgUHIoPnx0fClgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfbW9kZWxzX3R3aXR0ZXIkYFByKD58dHwpYCA8PSAwLjAwMSwgIioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX21vZGVsc190d2l0dGVyJGBQcig+fHR8KWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX21vZGVsc190d2l0dGVyJGBQcig+fHR8KWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfY29tcGFyaXNvbnNfdHdpdHRlciRzdGFycyA8LSBpZmVsc2UoYWxsX2NvbXBhcmlzb25zX3R3aXR0ZXIkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY29tcGFyaXNvbnNfdHdpdHRlciRgcC52YWx1ZWAgPD0gMC4wMDEsICIqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9jb21wYXJpc29uc190d2l0dGVyJGBwLnZhbHVlYCA8PSAwLjA1LCAiKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY29tcGFyaXNvbnNfdHdpdHRlciRgcC52YWx1ZWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfY29tcGFyaXNvbnNfdHdpdHRlciRncm91cDEgPC0gc3RyX3NwbGl0X2koYWxsX2NvbXBhcmlzb25zX3R3aXR0ZXIkaW5mZXJyZWRfZ2VuZGVyLCAiLSIsIDEpDQphbGxfY29tcGFyaXNvbnNfdHdpdHRlciRncm91cDIgPC0gc3RyX3NwbGl0X2koYWxsX2NvbXBhcmlzb25zX3R3aXR0ZXIkaW5mZXJyZWRfZ2VuZGVyLCAiLSIsIDIpDQoNCmFsbF9jb21wYXJpc29uc190d2l0dGVyJHBfcm91bmRlZCA8LSByb3VuZChhbGxfY29tcGFyaXNvbnNfdHdpdHRlciRwLnZhbHVlLCA0KQ0KYGBgDQoNClBsb3QgZ2VuZGVyIGRpZmZlcmVuY2VzOg0KYGBge3IgZmlnLmhlaWdodD0zLCBmaWdoLndpZHRoID0gNH0NCnR3aXR0ZXJfZ2VuZGVyX3Bsb3QgPC0gYWxsX3ByZWRpY3Rpb25zX3R3aXR0ZXIgJT4lDQogICBnZ3Bsb3QoYWVzKHggPSBmY3RfcmV2KGZpZWxkKSwNCiAgICAgICAgICAgICAgeSA9IHByZWRpY3RlZCwNCiAgICAgICAgICAgICAgeW1pbiA9IGNvbmYubG93LA0KICAgICAgICAgICAgICB5bWF4ID0gY29uZi5oaWdoLA0KICAgICAgICAgICAgICBjb2xvciA9IHgpKSArDQogICBnZW9tX3BvaW50cmFuZ2UocG9zaXRpb24gPSBwb3NpdGlvbl9kb2RnZSh3aWR0aCA9IDAuNSksDQogICAgICAgICAgICAgICAgICAgc2l6ZSA9IDAuNSkrDQogICAjeWxpbSgyLCA1LjUpKw0KICAgZ2d0aXRsZSgiKGMpIFByZWRpY3RlZCB2YWx1ZXMgb2YgVHdpdHRlciBhdHRlbnRpb24iKSsNCiAgICAgc3RhdF9wdmFsdWVfbWFudWFsKA0KICAgIGFsbF9jb21wYXJpc29uc190d2l0dGVyLA0KICAgIHkucG9zaXRpb24gPSBjKDAsIDI2LCAwLCAxMCksDQogICAgbGFiZWwuc2l6ZSA9IDMsDQogICAgbGFiZWwgPSAie3N0YXJzfSIsDQogICAgcmVtb3ZlLmJyYWNrZXQgPSBGQUxTRSwNCiAgICBicmFja2V0Lm51ZGdlLnkgPSAtMiwNCiAgICB4ID0gImZpZWxkIg0KICAgICkrDQogICAgeGxhYigiRmllbGQiKSsNCiAgIHNjYWxlX3hfZGlzY3JldGUoKSsNCiAgIHNjYWxlX3hfZGlzY3JldGUobGFiZWxzPWMoImFydHMiID0gIkFydHMgJiBIdW1hbml0aWVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1lZGljaW5lIiA9ICJNZWRpY2luZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzb2Nfc2NpIiA9ICJTb2NpYWwgc2NpZW5jZSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzdGVtIiA9ICJTVEVNIikpKw0KICAgeWxhYigiTmV3cyBhdHRlbnRpb24gcGVyIHllYXIiKSsNCiAgIGxhYnMoY29sb3IgPSAiSW5mZXJyZWQgZ2VuZGVyIikrDQogICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygiIzM0ZDM5OSIsICIjZmJiZjI0IiksIGxhYmVscyA9IGMoIk1hbiIsICJXb21hbiIpKSsNCiAgIHRoZW1lX21pbmltYWxfaGdyaWQoKSsNCiAgIHRoZW1lKHBsb3QudGl0bGUgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDgpLA0KICAgICAgICAgYXhpcy50ZXh0LnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDgpLA0KICAgICAgICAgYXhpcy50aXRsZS55ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgICBheGlzLnRleHQueCA9IGVsZW1lbnRfdGV4dChzaXplID0gOCkgLA0KICAgICAgICAgYXhpcy50aXRsZS54ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgICBsZWdlbmQudGl0bGU9ZWxlbWVudF90ZXh0KHNpemU9OCksIA0KICAgICAgICAgbGVnZW5kLnRleHQ9ZWxlbWVudF90ZXh0KHNpemU9NykpDQpgYGANCg0KYGBge3J9DQprbml0cjo6a2FibGUoYWxsX21vZGVsc190d2l0dGVyKQ0KYGBgDQoNCg0KIyMjIFdyaXRlIG91dCB0aGUgbW9kZWxzDQpgYGB7cn0NCndyaXRlX2NzdihhbGxfbW9kZWxzX25ld3MsICJQbG90c19hcHJpbC9yZWdfbW9kX29sc19uZXdzLmNzdiIpDQp3cml0ZV9jc3YoYWxsX21vZGVsc19vbmxpbmVfbmV3cywgIlBsb3RzX2FwcmlsL3JlZ19tb2Rfb2xzX29ubGluZV9uZXdzLmNzdiIpDQp3cml0ZV9jc3YoYWxsX21vZGVsc190d2l0dGVyLCAiUGxvdHNfYXByaWwvcmVnX21vZF9vbHNfdHdpdHRlci5jc3YiKQ0KYGBgDQoNCg0KIyMjIENvbWJpbmUgdGhlIHBsb3RzDQoNClBsb3QgaXQgYWxsIHRvZ2V0aGVyOg0KYGBge3IgZmlnLndpZHRoPTExLCBmaWcuaGVpZ2h0PTN9DQpsZWdlbmQgPC0gZ2V0X2xlZ2VuZCgNCiAgIyBjcmVhdGUgc29tZSBzcGFjZSB0byB0aGUgbGVmdCBvZiB0aGUgbGVnZW5kDQogIG5ld3NfZ2VuZGVyX3Bsb3QNCikNCg0KY29tYmlfcGxvdCA8LSBjb3dwbG90OjpwbG90X2dyaWQobmV3c19nZW5kZXJfcGxvdCArIHRoZW1lKGxlZ2VuZC5wb3NpdGlvbj0ibm9uZSIpLCANCiAgICAgICAgICAgICAgICAgICAgb25saW5lX25ld3NfZ2VuZGVyX3Bsb3QgKyB0aGVtZShsZWdlbmQucG9zaXRpb249Im5vbmUiKSwNCiAgICAgICAgICAgICAgICAgICAgdHdpdHRlcl9nZW5kZXJfcGxvdCArIHRoZW1lKGxlZ2VuZC5wb3NpdGlvbj0ibm9uZSIpLA0KICAgICAgICAgICAgICAgICAgICBsZWdlbmQsDQogICAgICAgICAgICAgICAgICAgIG5jb2wgPSA0LA0KICAgICAgICAgICAgICAgICAgICByZWxfd2lkdGhzID0gYygxLCAxLCAxLCAwLjMpKQ0KDQpjb21iaV9wbG90DQpnZ3NhdmUyKA0KICBmaWxlbmFtZSA9ICJQbG90c19hcHJpbC9QbG90XzJfY291bnRzLnBuZyIsDQogIHBsb3QgPSBjb21iaV9wbG90LA0KICB3aWR0aCA9IDExLA0KICBoZWlnaHQgPSAzLA0KICB1bml0cyA9IGMoImluIiksDQogIGRwaSA9IDYwMCwNCiAgYmcgPSAid2hpdGUiDQopDQpgYGANCg0KDQoNCg0KDQojIyBDb3VudCBtb2RlbHMgLSBQb2lzc29uDQoNCiMjIyBOZXdzDQoNCkNoZWNrIGhvdyBtYW55IHplcm9lcyBkbyB3ZSBoYXZlOg0KYGBge3J9DQoxMDAqc3VtKHByb2ZfcGFuZWxfZmlsdGVyJG5ld3MgPT0gMCkvbnJvdyhwcm9mX3BhbmVsX2ZpbHRlcikNCmBgYA0KQWxtb3N0IDcwJSENCg0KVGhpcyB0aW1lIHBlcmlvZCdzIG5ld3MgZ2l2ZW4gb25lJ3MgdG90YWwgY2l0YXRpb25zL3B1YmxpY2F0aW9ucywgcGFzdCB0b3RhbCANCmF0dGVudGlvbiwgY29udHJvbGxpbmcgZm9yIHRoZSBmaWVsZCBhbmQgeWVhciAoTGV4aXMgc2FtcGxlIG9ubHkpLiBQb29sZWQgbW9kZWwNCndpdGggY2x1c3RlcmVkIFNFczoNCmBgYHtyfQ0KZmllbGRzIDwtIGMoInN0ZW0iLCAic29jX3NjaSIsICJtZWRpY2luZSIsICJhcnRzIikNCg0KYWxsX2NvdW50X3ByZWRpY3Rpb25zX25ld3MgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDcsIG5yb3cgPSAwKSkNCmFsbF9jb3VudF9tb2RlbHNfbmV3cyA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gMTAsIG5yb3cgPSAwKSkNCmFsbF9jb3VudF9jb21wYXJpc29uc19uZXdzIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSA2LCBucm93ID0gMCkpDQoNCmZvciAoZmllbGQgaW4gZmllbGRzKXsNCiAgDQogIGZpZWxkX2RhdGFzZXQgPC0gZ2V0KGZpZWxkKQ0KICANCiAgbmV3c19tb2RlbCA8LSBnbG0obmV3c19hbGwgfiAjIHByb2Zlc3NvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIG5ld3NfYWxsX2wgKyANCiAgICAgICAgICAgICAgICAgICAgIGNpdGVkX2J5X3RvdGFsX2FsbF9sICsgDQogICAgICAgICAgICAgICAgICAgICAjIGdlbmRlcg0KICAgICAgICAgICAgICAgICAgICAgaW5mZXJyZWRfZ2VuZGVyICsNCiAgICAgICAgICAgICAgICAgICAgICMgYXR0ZW50aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgYWx0X29ubGluZV9hbGxfdG90YWxfbCArIGFsdF90d2l0dGVyX3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGNvYV90b3RfY2l0ZWRfYnlfdG90YWxfbCArDQogICAgICAgICAgICAgICAgICAgICAjIGNvYXV0aG9yIHB1YmxpY2F0aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgY29hX29ubGluZV9uZXdzX3RvdGFsX2wgKyBjb2FfdHdpdHRlcl90b3RhbF9sK2FzLmZhY3Rvcih5ZWFyKSwNCiAgICAgICAgICAgICAgICAgICBkYXRhID0gZmllbGRfZGF0YXNldCwgZmFtaWx5ID0gJ3BvaXNzb24nKSANCiAgDQogIG1vZGVsX3Jlc3VsdCA8LSBjb2VmdGVzdChuZXdzX21vZGVsLCB2Y292ID0gdmNvdkNMLCBjbHVzdGVyID0gfnByb2ZpbGVfaWQpWyxdICU+JSANCiAgICBhcy5kYXRhLmZyYW1lKCkgJT4lIA0KICAgIHRpYmJsZTo6cm93bmFtZXNfdG9fY29sdW1uKHZhciA9ICJ0ZXJtIikNCiAgDQogICMgbW9kZWxfcmVzdWx0W25yb3cobW9kZWxfcmVzdWx0KSsxLCAxXSA8LSAiUl4yIg0KICAjIG1vZGVsX3Jlc3VsdFtucm93KG1vZGVsX3Jlc3VsdCksIDI6bmNvbChtb2RlbF9yZXN1bHQpXSA8LSByb3VuZChzdW1tYXJ5KG5ld3NfbW9kZWwpJHIuc3F1YXJlZCwzKQ0KICBtb2RlbF9yZXN1bHQkZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9jb3VudF9tb2RlbHNfbmV3cyA8LSByYmluZChhbGxfY291bnRfbW9kZWxzX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgbW9kZWxfcmVzdWx0KQ0KICANCiAgcHJlZGljdGlvbiA8LSBwcmVkaWN0X3Jlc3BvbnNlKG5ld3NfbW9kZWwsIGMoImluZmVycmVkX2dlbmRlciIpLCB2Y292X2Z1biA9ICJ2Y292Q0wiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZjb3ZfdHlwZSA9ICJIQzAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmNvdi5hcmdzID0gbGlzdChjbHVzdGVyID0gZmllbGRfZGF0YXNldCRwcm9maWxlX2lkKSkNCiAgcHJlZGljdGlvbiRmaWVsZCA8LSBmaWVsZA0KICANCiAgZ2VuZGVyX2NvbXBhcmlzb24gPC0gdGVzdF9wcmVkaWN0aW9ucyhuZXdzX21vZGVsLCBjKCJpbmZlcnJlZF9nZW5kZXIiKSwgdmNvdl9mdW4gPSAidmNvdkNMIikNCiAgZ2VuZGVyX2NvbXBhcmlzb24kZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9jb3VudF9jb21wYXJpc29uc19uZXdzIDwtIHJiaW5kKGFsbF9jb3VudF9jb21wYXJpc29uc19uZXdzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyX2NvbXBhcmlzb24pDQogIA0KICBhbGxfY291bnRfcHJlZGljdGlvbnNfbmV3cyA8LSByYmluZChhbGxfY291bnRfcHJlZGljdGlvbnNfbmV3cywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY3Rpb24pDQogIA0KICANCn0NCg0KYWxsX2NvdW50X21vZGVsc19uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfY291bnRfbW9kZWxzX25ld3MkYFByKD58enwpYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2NvdW50X21vZGVsc19uZXdzJGBQcig+fHp8KWAgPD0gMC4wMDEsICIqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9jb3VudF9tb2RlbHNfbmV3cyRgUHIoPnx6fClgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9jb3VudF9tb2RlbHNfbmV3cyRgUHIoPnx6fClgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2NvdW50X2NvbXBhcmlzb25zX25ld3Mkc3RhcnMgPC0gaWZlbHNlKGFsbF9jb3VudF9jb21wYXJpc29uc19uZXdzJGBwLnZhbHVlYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2NvdW50X2NvbXBhcmlzb25zX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY291bnRfY29tcGFyaXNvbnNfbmV3cyRgcC52YWx1ZWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2NvdW50X2NvbXBhcmlzb25zX25ld3MkYHAudmFsdWVgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2NvdW50X2NvbXBhcmlzb25zX25ld3MkZ3JvdXAxIDwtIHN0cl9zcGxpdF9pKGFsbF9jb3VudF9jb21wYXJpc29uc19uZXdzJGluZmVycmVkX2dlbmRlciwgIi0iLCAxKQ0KYWxsX2NvdW50X2NvbXBhcmlzb25zX25ld3MkZ3JvdXAyIDwtIHN0cl9zcGxpdF9pKGFsbF9jb3VudF9jb21wYXJpc29uc19uZXdzJGluZmVycmVkX2dlbmRlciwgIi0iLCAyKQ0KDQphbGxfY291bnRfY29tcGFyaXNvbnNfbmV3cyRwX3JvdW5kZWQgPC0gcm91bmQoYWxsX2NvdW50X2NvbXBhcmlzb25zX25ld3MkcC52YWx1ZSwgNCkNCmBgYA0KDQpgYGB7cn0NCmtuaXRyOjprYWJsZShhbGxfY291bnRfbW9kZWxzX25ld3MpDQpgYGANCg0KIyMjIE9ubGluZSBOZXdzDQoNCkNoZWNrIGhvdyBtYW55IHplcm9lcyBkbyB3ZSBoYXZlOg0KYGBge3J9DQoxMDAqc3VtKHByb2ZfcGFuZWxfZmlsdGVyJGFsdF9vbmxpbmVfYWxsID09IDAsIG5hLnJtID0gVFJVRSkvbnJvdyhwcm9mX3BhbmVsX2ZpbHRlcikNCmBgYA0KQXJvdW5kIDI3JS4NCg0KVGhpcyB0aW1lIHBlcmlvZCdzIG5ld3MgZ2l2ZW4gb25lJ3MgdG90YWwgY2l0YXRpb25zL3B1YmxpY2F0aW9ucywgcGFzdCB0b3RhbCANCmF0dGVudGlvbiwgY29udHJvbGxpbmcgZm9yIHRoZSBmaWVsZCBhbmQgeWVhciAoTGV4aXMgc2FtcGxlIG9ubHkpLiBQb29sZWQgbW9kZWwNCndpdGggY2x1c3RlcmVkIFNFczoNCmBgYHtyfQ0KZmllbGRzIDwtIGMoInN0ZW0iLCAic29jX3NjaSIsICJtZWRpY2luZSIsICJhcnRzIikNCg0KYWxsX2NvdW50X3ByZWRpY3Rpb25zX29ubGluZV9uZXdzIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSA3LCBucm93ID0gMCkpDQphbGxfY291bnRfbW9kZWxzX29ubGluZV9uZXdzIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSAxMCwgbnJvdyA9IDApKQ0KYWxsX2NvdW50X2NvbXBhcmlzb25zX29ubGluZV9uZXdzIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSA2LCBucm93ID0gMCkpDQoNCmZvciAoZmllbGQgaW4gZmllbGRzKXsNCiAgDQogIGZpZWxkX2RhdGFzZXQgPC0gZ2V0KGZpZWxkKQ0KICANCiAgbmV3c19tb2RlbCA8LSBnbG0oYWx0X29ubGluZV9hbGwgfiAjIHByb2Zlc3NvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICBhbHRfb25saW5lX2FsbF9sKw0KICAgICAgICAgICAgICAgICAgICAgICAgIGNpdGVkX2J5X3RvdGFsX2FsbF9sICsgDQogICAgICAgICAgICAgICAgICAgICAgICAgIyBnZW5kZXINCiAgICAgICAgICAgICAgICAgICAgICAgICBpbmZlcnJlZF9nZW5kZXIgICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAjIGF0dGVudGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICBuZXdzX2FsbF90b3RhbF9sICsgYWx0X3R3aXR0ZXJfdG90YWxfbCArDQogICAgICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb2FfdG90X2NpdGVkX2J5X3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICMgY29hdXRob3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgY29hX29ubGluZV9uZXdzX3RvdGFsX2wgKyBjb2FfdHdpdHRlcl90b3RhbF9sK2FzLmZhY3Rvcih5ZWFyKSwNCiAgICAgICAgICAgICAgICAgICBkYXRhID0gZmllbGRfZGF0YXNldCwgZmFtaWx5ID0gJ3BvaXNzb24nKSAgDQogIA0KICBtb2RlbF9yZXN1bHQgPC0gY29lZnRlc3QobmV3c19tb2RlbCwgdmNvdiA9IHZjb3ZDTCwgY2x1c3RlciA9IH5wcm9maWxlX2lkKVssXSAlPiUgDQogICAgYXMuZGF0YS5mcmFtZSgpICU+JSANCiAgICB0aWJibGU6OnJvd25hbWVzX3RvX2NvbHVtbih2YXIgPSAidGVybSIpDQogIA0KICAjIG1vZGVsX3Jlc3VsdFtucm93KG1vZGVsX3Jlc3VsdCkrMSwgMV0gPC0gIlJeMiINCiAgIyBtb2RlbF9yZXN1bHRbbnJvdyhtb2RlbF9yZXN1bHQpLCAyOm5jb2wobW9kZWxfcmVzdWx0KV0gPC0gcm91bmQoc3VtbWFyeShuZXdzX21vZGVsKSRyLnNxdWFyZWQsMykNCiAgbW9kZWxfcmVzdWx0JGZpZWxkIDwtIGZpZWxkDQogIA0KICBhbGxfY291bnRfbW9kZWxzX29ubGluZV9uZXdzIDwtIHJiaW5kKGFsbF9jb3VudF9tb2RlbHNfb25saW5lX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgbW9kZWxfcmVzdWx0KQ0KICANCiAgcHJlZGljdGlvbiA8LSBwcmVkaWN0X3Jlc3BvbnNlKG5ld3NfbW9kZWwsIGMoImluZmVycmVkX2dlbmRlciIpLCB2Y292X2Z1biA9ICJ2Y292Q0wiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZjb3ZfdHlwZSA9ICJIQzAiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmNvdi5hcmdzID0gbGlzdChjbHVzdGVyID0gZmllbGRfZGF0YXNldCRwcm9maWxlX2lkKSkNCiAgcHJlZGljdGlvbiRmaWVsZCA8LSBmaWVsZA0KICANCiAgZ2VuZGVyX2NvbXBhcmlzb24gPC0gdGVzdF9wcmVkaWN0aW9ucyhuZXdzX21vZGVsLCBjKCJpbmZlcnJlZF9nZW5kZXIiKSwgdmNvdl9mdW4gPSAidmNvdkNMIikNCiAgZ2VuZGVyX2NvbXBhcmlzb24kZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9jb3VudF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyA8LSByYmluZChhbGxfY291bnRfY29tcGFyaXNvbnNfb25saW5lX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5kZXJfY29tcGFyaXNvbikNCiAgDQogIGFsbF9jb3VudF9wcmVkaWN0aW9uc19vbmxpbmVfbmV3cyA8LSByYmluZChhbGxfY291bnRfcHJlZGljdGlvbnNfb25saW5lX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVkaWN0aW9uKQ0KICANCiAgDQp9DQoNCmFsbF9jb3VudF9tb2RlbHNfb25saW5lX25ld3Mkc3RhcnMgPC0gaWZlbHNlKGFsbF9jb3VudF9tb2RlbHNfb25saW5lX25ld3MkYFByKD58enwpYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2NvdW50X21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx6fClgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY291bnRfbW9kZWxzX29ubGluZV9uZXdzJGBQcig+fHp8KWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2NvdW50X21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx6fClgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2NvdW50X2NvbXBhcmlzb25zX29ubGluZV9uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfY291bnRfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY291bnRfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY291bnRfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9jb3VudF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRgcC52YWx1ZWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfY291bnRfY29tcGFyaXNvbnNfb25saW5lX25ld3MkZ3JvdXAxIDwtIHN0cl9zcGxpdF9pKGFsbF9jb3VudF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRpbmZlcnJlZF9nZW5kZXIsICItIiwgMSkNCmFsbF9jb3VudF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRncm91cDIgPC0gc3RyX3NwbGl0X2koYWxsX2NvdW50X2NvbXBhcmlzb25zX29ubGluZV9uZXdzJGluZmVycmVkX2dlbmRlciwgIi0iLCAyKQ0KDQphbGxfY291bnRfY29tcGFyaXNvbnNfb25saW5lX25ld3MkcF9yb3VuZGVkIDwtIHJvdW5kKGFsbF9jb3VudF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRwLnZhbHVlLCA0KQ0KYGBgDQoNCmBgYHtyfQ0Ka25pdHI6OmthYmxlKGFsbF9jb3VudF9tb2RlbHNfb25saW5lX25ld3MpDQpgYGANCg0KDQojIyMgVHdpdHRlcg0KDQpDaGVjayBob3cgbWFueSB6ZXJvZXMgZG8gd2UgaGF2ZToNCmBgYHtyfQ0KMTAwKnN1bShwcm9mX3BhbmVsX2ZpbHRlciRhbHRfdHdpdHRlciA9PSAwLCBuYS5ybSA9IFRSVUUpL25yb3cocHJvZl9wYW5lbF9maWx0ZXIpDQpgYGANCg0KVGhpcyB0aW1lIHBlcmlvZCdzIG5ld3MgZ2l2ZW4gb25lJ3MgdG90YWwgY2l0YXRpb25zL3B1YmxpY2F0aW9ucywgcGFzdCB0b3RhbCANCmF0dGVudGlvbiwgY29udHJvbGxpbmcgZm9yIHRoZSBmaWVsZCBhbmQgeWVhciAoTGV4aXMgc2FtcGxlIG9ubHkpLiBQb29sZWQgbW9kZWwNCndpdGggY2x1c3RlcmVkIFNFczoNCmBgYHtyfQ0KZmllbGRzIDwtIGMoInN0ZW0iLCAic29jX3NjaSIsICJtZWRpY2luZSIsICJhcnRzIikNCg0KYWxsX2NvdW50X3ByZWRpY3Rpb25zX3R3aXR0ZXIgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDcsIG5yb3cgPSAwKSkNCmFsbF9jb3VudF9tb2RlbHNfdHdpdHRlciA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gMTAsIG5yb3cgPSAwKSkNCmFsbF9jb3VudF9jb21wYXJpc29uc190d2l0dGVyIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSA2LCBucm93ID0gMCkpDQoNCmZvciAoZmllbGQgaW4gZmllbGRzKXsNCiAgDQogIGZpZWxkX2RhdGFzZXQgPC0gZ2V0KGZpZWxkKQ0KICANCiAgbmV3c19tb2RlbCA8LSBnbG0oYWx0X3R3aXR0ZXIgfiAjIHByb2Zlc3NvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGFsdF90d2l0dGVyX2wgKyAgY2l0ZWRfYnlfdG90YWxfYWxsX2wgKyANCiAgICAgICAgICAgICAgICAgICAgICMgZ2VuZGVyDQogICAgICAgICAgICAgICAgICAgICBpbmZlcnJlZF9nZW5kZXIgKw0KICAgICAgICAgICAgICAgICAgICAgIyBhdHRlbnRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBuZXdzX2FsbF90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgIGFsdF9vbmxpbmVfYWxsX3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGNvYV90b3RfY2l0ZWRfYnlfdG90YWxfbCArDQogICAgICAgICAgICAgICAgICAgICAjIGNvYXV0aG9yIHB1YmxpY2F0aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgY29hX29ubGluZV9uZXdzX3RvdGFsX2wgKyBjb2FfdHdpdHRlcl90b3RhbF9sK2FzLmZhY3Rvcih5ZWFyKSwNCiAgICAgICAgICAgICAgICAgICBkYXRhID0gZmllbGRfZGF0YXNldCwgZmFtaWx5ID0gJ3BvaXNzb24nKQ0KICANCiAgbW9kZWxfcmVzdWx0IDwtIGNvZWZ0ZXN0KG5ld3NfbW9kZWwsIHZjb3YgPSB2Y292Q0wsIGNsdXN0ZXIgPSB+cHJvZmlsZV9pZClbLF0gJT4lIA0KICAgIGFzLmRhdGEuZnJhbWUoKSAlPiUgDQogICAgdGliYmxlOjpyb3duYW1lc190b19jb2x1bW4odmFyID0gInRlcm0iKQ0KICANCiAgIyBtb2RlbF9yZXN1bHRbbnJvdyhtb2RlbF9yZXN1bHQpKzEsIDFdIDwtICJSXjIiDQogICMgbW9kZWxfcmVzdWx0W25yb3cobW9kZWxfcmVzdWx0KSwgMjpuY29sKG1vZGVsX3Jlc3VsdCldIDwtIHJvdW5kKHN1bW1hcnkobmV3c19tb2RlbCkkci5zcXVhcmVkLDMpDQogIG1vZGVsX3Jlc3VsdCRmaWVsZCA8LSBmaWVsZA0KICANCiAgYWxsX2NvdW50X21vZGVsc190d2l0dGVyIDwtIHJiaW5kKGFsbF9jb3VudF9tb2RlbHNfdHdpdHRlciwNCiAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9yZXN1bHQpDQogIA0KICBwcmVkaWN0aW9uIDwtIHByZWRpY3RfcmVzcG9uc2UobmV3c19tb2RlbCwgYygiaW5mZXJyZWRfZ2VuZGVyIiksIHZjb3ZfZnVuID0gInZjb3ZDTCIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmNvdl90eXBlID0gIkhDMCIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2Y292LmFyZ3MgPSBsaXN0KGNsdXN0ZXIgPSBmaWVsZF9kYXRhc2V0JHByb2ZpbGVfaWQpKQ0KICBwcmVkaWN0aW9uJGZpZWxkIDwtIGZpZWxkDQogIA0KICBnZW5kZXJfY29tcGFyaXNvbiA8LSB0ZXN0X3ByZWRpY3Rpb25zKG5ld3NfbW9kZWwsIGMoImluZmVycmVkX2dlbmRlciIpLCB2Y292X2Z1biA9ICJ2Y292Q0wiKQ0KICBnZW5kZXJfY29tcGFyaXNvbiRmaWVsZCA8LSBmaWVsZA0KICANCiAgYWxsX2NvdW50X2NvbXBhcmlzb25zX3R3aXR0ZXIgPC0gcmJpbmQoYWxsX2NvdW50X2NvbXBhcmlzb25zX3R3aXR0ZXIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5kZXJfY29tcGFyaXNvbikNCiAgDQogIGFsbF9jb3VudF9wcmVkaWN0aW9uc190d2l0dGVyIDwtIHJiaW5kKGFsbF9jb3VudF9wcmVkaWN0aW9uc190d2l0dGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljdGlvbikNCiAgDQogIA0KfQ0KDQphbGxfY291bnRfbW9kZWxzX3R3aXR0ZXIkc3RhcnMgPC0gaWZlbHNlKGFsbF9jb3VudF9tb2RlbHNfdHdpdHRlciRgUHIoPnx6fClgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY291bnRfbW9kZWxzX3R3aXR0ZXIkYFByKD58enwpYCA8PSAwLjAwMSwgIioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2NvdW50X21vZGVsc190d2l0dGVyJGBQcig+fHp8KWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2NvdW50X21vZGVsc190d2l0dGVyJGBQcig+fHp8KWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfY291bnRfY29tcGFyaXNvbnNfdHdpdHRlciRzdGFycyA8LSBpZmVsc2UoYWxsX2NvdW50X2NvbXBhcmlzb25zX3R3aXR0ZXIkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY291bnRfY29tcGFyaXNvbnNfdHdpdHRlciRgcC52YWx1ZWAgPD0gMC4wMDEsICIqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9jb3VudF9jb21wYXJpc29uc190d2l0dGVyJGBwLnZhbHVlYCA8PSAwLjA1LCAiKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfY291bnRfY29tcGFyaXNvbnNfdHdpdHRlciRgcC52YWx1ZWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfY291bnRfY29tcGFyaXNvbnNfdHdpdHRlciRncm91cDEgPC0gc3RyX3NwbGl0X2koYWxsX2NvdW50X2NvbXBhcmlzb25zX3R3aXR0ZXIkaW5mZXJyZWRfZ2VuZGVyLCAiLSIsIDEpDQphbGxfY291bnRfY29tcGFyaXNvbnNfdHdpdHRlciRncm91cDIgPC0gc3RyX3NwbGl0X2koYWxsX2NvdW50X2NvbXBhcmlzb25zX3R3aXR0ZXIkaW5mZXJyZWRfZ2VuZGVyLCAiLSIsIDIpDQoNCmFsbF9jb3VudF9jb21wYXJpc29uc190d2l0dGVyJHBfcm91bmRlZCA8LSByb3VuZChhbGxfY291bnRfY29tcGFyaXNvbnNfdHdpdHRlciRwLnZhbHVlLCA0KQ0KDQoNCmBgYA0KDQpgYGB7cn0NCmtuaXRyOjprYWJsZShhbGxfY291bnRfbW9kZWxzX3R3aXR0ZXIpDQpgYGANCg0KDQojIyMgV3JpdGUgb3V0IHRoZSBtb2RlbHMNCmBgYHtyfQ0Kd3JpdGVfY3N2KGFsbF9jb3VudF9tb2RlbHNfbmV3cywgIlBsb3RzX2FwcmlsL3JlZ19tb2RfcG9pc3Nvbl9uZXdzLmNzdiIpDQp3cml0ZV9jc3YoYWxsX2NvdW50X21vZGVsc19vbmxpbmVfbmV3cywgIlBsb3RzX2FwcmlsL3JlZ19tb2RfcG9pc3Nvbl9vbmxpbmVfbmV3cy5jc3YiKQ0Kd3JpdGVfY3N2KGFsbF9jb3VudF9tb2RlbHNfdHdpdHRlciwgIlBsb3RzX2FwcmlsL3JlZ19tb2RfcG9pc3Nvbl90d2l0dGVyLmNzdiIpDQpgYGANCg0KDQojIyBCaW5hcnkgbW9kZWxzIC0gYW55IGF0dGVudGlvbg0KDQojIyMgTmV3cw0KVGhpcyB0aW1lIHBlcmlvZCdzIG5ld3MgZ2l2ZW4gb25lJ3MgdG90YWwgY2l0YXRpb25zL3B1YmxpY2F0aW9ucywgcGFzdCB0b3RhbCANCmF0dGVudGlvbiwgY29udHJvbGxpbmcgZm9yIHRoZSBmaWVsZCBhbmQgeWVhciAoTGV4aXMgc2FtcGxlIG9ubHkpLiBQb29sZWQgbW9kZWwNCndpdGggY2x1c3RlcmVkIFNFczoNCmBgYHtyfQ0KZmllbGRzIDwtIGMoInN0ZW0iLCAic29jX3NjaSIsICJtZWRpY2luZSIsICJhcnRzIikNCg0KYWxsX2Jpbl9tb2RlbHNfbmV3cyA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gMTAsIG5yb3cgPSAwKSkNCmFsbF9iaW5fY29tcGFyaXNvbnNfbmV3cyA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gNiwgbnJvdyA9IDApKQ0KDQpmb3IgKGZpZWxkIGluIGZpZWxkcyl7DQogIA0KICBmaWVsZF9kYXRhc2V0IDwtIGdldChmaWVsZCkNCiAgDQogIG5ld3NfbW9kZWwgPC0gZ2xtKGFueV9uZXdzIH4gIyBwcm9mZXNzb3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBuZXdzX2FsbF9sICsgDQogICAgICAgICAgICAgICAgICAgICBjaXRlZF9ieV90b3RhbF9hbGxfbCArIA0KICAgICAgICAgICAgICAgICAgICAgIyBnZW5kZXINCiAgICAgICAgICAgICAgICAgICAgIGluZmVycmVkX2dlbmRlciArDQogICAgICAgICAgICAgICAgICAgICAjIGF0dGVudGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGFsdF9vbmxpbmVfYWxsX3RvdGFsX2wgKyBhbHRfdHdpdHRlcl90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgICMgY29hdXRob3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBjb2FfdG90X2NpdGVkX2J5X3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGNvYV9vbmxpbmVfbmV3c190b3RhbF9sICsgY29hX3R3aXR0ZXJfdG90YWxfbCthcy5mYWN0b3IoeWVhciksDQogICAgICAgICAgICAgICAgICAgZGF0YSA9IGZpZWxkX2RhdGFzZXQsIGZhbWlseSA9ICdiaW5vbWlhbCcpIA0KICANCiAgbW9kZWxfcmVzdWx0IDwtIGNvZWZ0ZXN0KG5ld3NfbW9kZWwsIHR5cGUgPSAiSEMwIiwgY2x1c3RlciA9IH5wcm9maWxlX2lkKVssXSAlPiUgDQogICAgYXMuZGF0YS5mcmFtZSgpICU+JSANCiAgICB0aWJibGU6OnJvd25hbWVzX3RvX2NvbHVtbih2YXIgPSAidGVybSIpDQogIA0KICBtb2RlbF9yZXN1bHRbbnJvdyhtb2RlbF9yZXN1bHQpKzEsIDFdIDwtICJSXjIiDQogIG1vZGVsX3Jlc3VsdFtucm93KG1vZGVsX3Jlc3VsdCksIDI6bmNvbChtb2RlbF9yZXN1bHQpXSA8LSByb3VuZChQc2V1ZG9SMihuZXdzX21vZGVsKSwzKQ0KICBtb2RlbF9yZXN1bHQkZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9iaW5fbW9kZWxzX25ld3MgPC0gcmJpbmQoYWxsX2Jpbl9tb2RlbHNfbmV3cywNCiAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9yZXN1bHQpDQogIA0KICBnZW5kZXJfY29tcGFyaXNvbiA8LSB0ZXN0X3ByZWRpY3Rpb25zKG5ld3NfbW9kZWwsIGMoImluZmVycmVkX2dlbmRlciIpLCB2Y292X2Z1biA9ICJIQzAiKQ0KICBnZW5kZXJfY29tcGFyaXNvbiRmaWVsZCA8LSBmaWVsZA0KICANCiAgYWxsX2Jpbl9jb21wYXJpc29uc19uZXdzIDwtIHJiaW5kKGFsbF9iaW5fY29tcGFyaXNvbnNfbmV3cywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmRlcl9jb21wYXJpc29uKQ0KICANCiAgDQp9DQoNCmFsbF9iaW5fbW9kZWxzX25ld3Mkc3RhcnMgPC0gaWZlbHNlKGFsbF9iaW5fbW9kZWxzX25ld3MkYFByKD58enwpYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2Jpbl9tb2RlbHNfbmV3cyRgUHIoPnx6fClgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluX21vZGVsc19uZXdzJGBQcig+fHp8KWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2Jpbl9tb2RlbHNfbmV3cyRgUHIoPnx6fClgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2Jpbl9jb21wYXJpc29uc19uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfYmluX2NvbXBhcmlzb25zX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluX2NvbXBhcmlzb25zX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluX2NvbXBhcmlzb25zX25ld3MkYHAudmFsdWVgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW5fY29tcGFyaXNvbnNfbmV3cyRgcC52YWx1ZWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfYmluX2NvbXBhcmlzb25zX25ld3MkZ3JvdXAxIDwtIHN0cl9zcGxpdF9pKGFsbF9iaW5fY29tcGFyaXNvbnNfbmV3cyRpbmZlcnJlZF9nZW5kZXIsICItIiwgMSkNCmFsbF9iaW5fY29tcGFyaXNvbnNfbmV3cyRncm91cDIgPC0gc3RyX3NwbGl0X2koYWxsX2Jpbl9jb21wYXJpc29uc19uZXdzJGluZmVycmVkX2dlbmRlciwgIi0iLCAyKQ0KDQphbGxfYmluX2NvbXBhcmlzb25zX25ld3MkcF9yb3VuZGVkIDwtIHJvdW5kKGFsbF9iaW5fY29tcGFyaXNvbnNfbmV3cyRwLnZhbHVlLCA0KQ0KDQpgYGANCg0KYGBge3J9DQprbml0cjo6a2FibGUoYWxsX2Jpbl9tb2RlbHNfbmV3cykNCmBgYA0KDQojIyMgT25saW5lIE5ld3MNClRoaXMgdGltZSBwZXJpb2QncyBuZXdzIGdpdmVuIG9uZSdzIHRvdGFsIGNpdGF0aW9ucy9wdWJsaWNhdGlvbnMsIHBhc3QgdG90YWwgDQphdHRlbnRpb24sIGNvbnRyb2xsaW5nIGZvciB0aGUgZmllbGQgYW5kIHllYXIgKExleGlzIHNhbXBsZSBvbmx5KS4gUG9vbGVkIG1vZGVsDQp3aXRoIGNsdXN0ZXJlZCBTRXM6DQpgYGB7cn0NCmZpZWxkcyA8LSBjKCJzdGVtIiwgInNvY19zY2kiLCAibWVkaWNpbmUiLCAiYXJ0cyIpDQoNCmFsbF9iaW5fbW9kZWxzX29ubGluZV9uZXdzIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSAxMCwgbnJvdyA9IDApKQ0KYWxsX2Jpbl9jb21wYXJpc29uc19vbmxpbmVfbmV3cyA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gNiwgbnJvdyA9IDApKQ0KDQpmb3IgKGZpZWxkIGluIGZpZWxkcyl7DQogIA0KICBmaWVsZF9kYXRhc2V0IDwtIGdldChmaWVsZCkNCiAgDQogIG5ld3NfbW9kZWwgPC0gZ2xtKGFueV9vbmxpbmVfbmV3cyB+ICMgcHJvZmVzc29yIHB1YmxpY2F0aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgIGFsdF9vbmxpbmVfYWxsX2wrDQogICAgICAgICAgICAgICAgICAgICAgICAgY2l0ZWRfYnlfdG90YWxfYWxsX2wgKyANCiAgICAgICAgICAgICAgICAgICAgICAgICAjIGdlbmRlcg0KICAgICAgICAgICAgICAgICAgICAgICAgIGluZmVycmVkX2dlbmRlciAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICMgYXR0ZW50aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgIG5ld3NfYWxsX3RvdGFsX2wgKyBhbHRfdHdpdHRlcl90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAjIGNvYXV0aG9yIHB1YmxpY2F0aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgICAgIGNvYV90b3RfY2l0ZWRfYnlfdG90YWxfbCArDQogICAgICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb2Ffb25saW5lX25ld3NfdG90YWxfbCArIGNvYV90d2l0dGVyX3RvdGFsX2wrYXMuZmFjdG9yKHllYXIpLA0KICAgICAgICAgICAgICAgICAgIGRhdGEgPSBmaWVsZF9kYXRhc2V0LCBmYW1pbHkgPSAnYmlub21pYWwnKSAgDQogIA0KICBtb2RlbF9yZXN1bHQgPC0gY29lZnRlc3QobmV3c19tb2RlbCwgdHlwZSA9ICJIQzAiLCBjbHVzdGVyID0gfnByb2ZpbGVfaWQpWyxdICU+JSANCiAgICBhcy5kYXRhLmZyYW1lKCkgJT4lIA0KICAgIHRpYmJsZTo6cm93bmFtZXNfdG9fY29sdW1uKHZhciA9ICJ0ZXJtIikNCiAgDQogIG1vZGVsX3Jlc3VsdFtucm93KG1vZGVsX3Jlc3VsdCkrMSwgMV0gPC0gIlJeMiINCiAgbW9kZWxfcmVzdWx0W25yb3cobW9kZWxfcmVzdWx0KSwgMjpuY29sKG1vZGVsX3Jlc3VsdCldIDwtIHJvdW5kKFBzZXVkb1IyKG5ld3NfbW9kZWwpLDMpDQogIG1vZGVsX3Jlc3VsdCRmaWVsZCA8LSBmaWVsZA0KICANCiAgYWxsX2Jpbl9tb2RlbHNfb25saW5lX25ld3MgPC0gcmJpbmQoYWxsX2Jpbl9tb2RlbHNfb25saW5lX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgbW9kZWxfcmVzdWx0KQ0KICANCiAgZ2VuZGVyX2NvbXBhcmlzb24gPC0gdGVzdF9wcmVkaWN0aW9ucyhuZXdzX21vZGVsLCBjKCJpbmZlcnJlZF9nZW5kZXIiKSwgdmNvdl9mdW4gPSAidmNvdkNMIikNCiAgZ2VuZGVyX2NvbXBhcmlzb24kZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9iaW5fY29tcGFyaXNvbnNfb25saW5lX25ld3MgPC0gcmJpbmQoYWxsX2Jpbl9jb21wYXJpc29uc19vbmxpbmVfbmV3cywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmRlcl9jb21wYXJpc29uKQ0KICANCiAgDQp9DQoNCmFsbF9iaW5fbW9kZWxzX29ubGluZV9uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfYmluX21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx6fClgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluX21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx6fClgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluX21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx6fClgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW5fbW9kZWxzX29ubGluZV9uZXdzJGBQcig+fHp8KWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfYmluX2NvbXBhcmlzb25zX29ubGluZV9uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfYmluX2NvbXBhcmlzb25zX29ubGluZV9uZXdzJGBwLnZhbHVlYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2Jpbl9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRgcC52YWx1ZWAgPD0gMC4wMDEsICIqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW5fY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW5fY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2Jpbl9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRncm91cDEgPC0gc3RyX3NwbGl0X2koYWxsX2Jpbl9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRpbmZlcnJlZF9nZW5kZXIsICItIiwgMSkNCmFsbF9iaW5fY29tcGFyaXNvbnNfb25saW5lX25ld3MkZ3JvdXAyIDwtIHN0cl9zcGxpdF9pKGFsbF9iaW5fY29tcGFyaXNvbnNfb25saW5lX25ld3MkaW5mZXJyZWRfZ2VuZGVyLCAiLSIsIDIpDQoNCmFsbF9iaW5fY29tcGFyaXNvbnNfb25saW5lX25ld3MkcF9yb3VuZGVkIDwtIHJvdW5kKGFsbF9iaW5fY29tcGFyaXNvbnNfb25saW5lX25ld3MkcC52YWx1ZSwgNCkNCg0KYGBgDQoNCmBgYHtyfQ0Ka25pdHI6OmthYmxlKGFsbF9iaW5fbW9kZWxzX29ubGluZV9uZXdzKQ0KYGBgDQoNCg0KIyMjIFR3aXR0ZXINClRoaXMgdGltZSBwZXJpb2QncyBuZXdzIGdpdmVuIG9uZSdzIHRvdGFsIGNpdGF0aW9ucy9wdWJsaWNhdGlvbnMsIHBhc3QgdG90YWwgDQphdHRlbnRpb24sIGNvbnRyb2xsaW5nIGZvciB0aGUgZmllbGQgYW5kIHllYXIgKExleGlzIHNhbXBsZSBvbmx5KS4gUG9vbGVkIG1vZGVsDQp3aXRoIGNsdXN0ZXJlZCBTRXM6DQpgYGB7cn0NCmZpZWxkcyA8LSBjKCJzdGVtIiwgInNvY19zY2kiLCAibWVkaWNpbmUiLCAiYXJ0cyIpDQoNCmFsbF9iaW5fcHJlZGljdGlvbnNfdHdpdHRlciA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gNywgbnJvdyA9IDApKQ0KYWxsX2Jpbl9tb2RlbHNfdHdpdHRlciA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gMTAsIG5yb3cgPSAwKSkNCmFsbF9iaW5fY29tcGFyaXNvbnNfdHdpdHRlciA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gNiwgbnJvdyA9IDApKQ0KDQpmb3IgKGZpZWxkIGluIGZpZWxkcyl7DQogIA0KICBmaWVsZF9kYXRhc2V0IDwtIGdldChmaWVsZCkNCiAgDQogIG5ld3NfbW9kZWwgPC0gZ2xtKGFueV90d2l0dGVyIH4gIyBwcm9mZXNzb3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBhbHRfdHdpdHRlcl9sICsgIGNpdGVkX2J5X3RvdGFsX2FsbF9sICsgDQogICAgICAgICAgICAgICAgICAgICAjIGdlbmRlcg0KICAgICAgICAgICAgICAgICAgICAgaW5mZXJyZWRfZ2VuZGVyICsNCiAgICAgICAgICAgICAgICAgICAgICMgYXR0ZW50aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgbmV3c19hbGxfdG90YWxfbCArDQogICAgICAgICAgICAgICAgICAgICBhbHRfb25saW5lX2FsbF90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgICMgY29hdXRob3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBjb2FfdG90X2NpdGVkX2J5X3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGNvYV9vbmxpbmVfbmV3c190b3RhbF9sICsgY29hX3R3aXR0ZXJfdG90YWxfbCthcy5mYWN0b3IoeWVhciksDQogICAgICAgICAgICAgICAgICAgZGF0YSA9IGZpZWxkX2RhdGFzZXQsIGZhbWlseSA9ICdiaW5vbWlhbCcpDQogIA0KICBtb2RlbF9yZXN1bHQgPC0gY29lZnRlc3QobmV3c19tb2RlbCwgdHlwZSA9ICJIQzAiLCBjbHVzdGVyID0gfnByb2ZpbGVfaWQpWyxdICU+JSANCiAgICBhcy5kYXRhLmZyYW1lKCkgJT4lIA0KICAgIHRpYmJsZTo6cm93bmFtZXNfdG9fY29sdW1uKHZhciA9ICJ0ZXJtIikNCiAgDQogIG1vZGVsX3Jlc3VsdFtucm93KG1vZGVsX3Jlc3VsdCkrMSwgMV0gPC0gIlJeMiINCiAgbW9kZWxfcmVzdWx0W25yb3cobW9kZWxfcmVzdWx0KSwgMjpuY29sKG1vZGVsX3Jlc3VsdCldIDwtIHJvdW5kKFBzZXVkb1IyKG5ld3NfbW9kZWwpLDMpDQogIG1vZGVsX3Jlc3VsdCRmaWVsZCA8LSBmaWVsZA0KICANCiAgYWxsX2Jpbl9tb2RlbHNfdHdpdHRlciA8LSByYmluZChhbGxfYmluX21vZGVsc190d2l0dGVyLA0KICAgICAgICAgICAgICAgICAgICAgIG1vZGVsX3Jlc3VsdCkNCiAgDQogIGdlbmRlcl9jb21wYXJpc29uIDwtIHRlc3RfcHJlZGljdGlvbnMobmV3c19tb2RlbCwgYygiaW5mZXJyZWRfZ2VuZGVyIiksIHZjb3ZfZnVuID0gInZjb3ZDTCIpDQogIGdlbmRlcl9jb21wYXJpc29uJGZpZWxkIDwtIGZpZWxkDQogIA0KICBhbGxfYmluX2NvbXBhcmlzb25zX3R3aXR0ZXIgPC0gcmJpbmQoYWxsX2Jpbl9jb21wYXJpc29uc190d2l0dGVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyX2NvbXBhcmlzb24pDQogIA0KICANCn0NCg0KYWxsX2Jpbl9tb2RlbHNfdHdpdHRlciRzdGFycyA8LSBpZmVsc2UoYWxsX2Jpbl9tb2RlbHNfdHdpdHRlciRgUHIoPnx6fClgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluX21vZGVsc190d2l0dGVyJGBQcig+fHp8KWAgPD0gMC4wMDEsICIqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW5fbW9kZWxzX3R3aXR0ZXIkYFByKD58enwpYCA8PSAwLjA1LCAiKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluX21vZGVsc190d2l0dGVyJGBQcig+fHp8KWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfYmluX2NvbXBhcmlzb25zX3R3aXR0ZXIkc3RhcnMgPC0gaWZlbHNlKGFsbF9iaW5fY29tcGFyaXNvbnNfdHdpdHRlciRgcC52YWx1ZWAgPD0gMC4wMDEsICIqKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW5fY29tcGFyaXNvbnNfdHdpdHRlciRgcC52YWx1ZWAgPD0gMC4wMDEsICIqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW5fY29tcGFyaXNvbnNfdHdpdHRlciRgcC52YWx1ZWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2Jpbl9jb21wYXJpc29uc190d2l0dGVyJGBwLnZhbHVlYCA8PSAwLjEsICIuIiwgIiIpKSkpDQoNCmFsbF9iaW5fY29tcGFyaXNvbnNfdHdpdHRlciRncm91cDEgPC0gc3RyX3NwbGl0X2koYWxsX2Jpbl9jb21wYXJpc29uc190d2l0dGVyJGluZmVycmVkX2dlbmRlciwgIi0iLCAxKQ0KYWxsX2Jpbl9jb21wYXJpc29uc190d2l0dGVyJGdyb3VwMiA8LSBzdHJfc3BsaXRfaShhbGxfYmluX2NvbXBhcmlzb25zX3R3aXR0ZXIkaW5mZXJyZWRfZ2VuZGVyLCAiLSIsIDIpDQoNCmFsbF9iaW5fY29tcGFyaXNvbnNfdHdpdHRlciRwX3JvdW5kZWQgPC0gcm91bmQoYWxsX2Jpbl9jb21wYXJpc29uc190d2l0dGVyJHAudmFsdWUsIDQpDQpgYGANCg0KYGBge3J9DQprbml0cjo6a2FibGUoYWxsX2Jpbl9tb2RlbHNfdHdpdHRlcikNCmBgYA0KDQoNCiMjIyBXcml0ZSBvdXQgdGhlIG1vZGVscw0KYGBge3J9DQp3cml0ZV9jc3YoYWxsX2Jpbl9tb2RlbHNfbmV3cywgIlBsb3RzX2FwcmlsL3JlZ19tb2RfYmluX25ld3MuY3N2IikNCndyaXRlX2NzdihhbGxfYmluX21vZGVsc19vbmxpbmVfbmV3cywgIlBsb3RzX2FwcmlsL3JlZ19tb2RfYmluX29ubGluZV9uZXdzLmNzdiIpDQp3cml0ZV9jc3YoYWxsX2Jpbl9tb2RlbHNfdHdpdHRlciwgIlBsb3RzX2FwcmlsL3JlZ19tb2RfYmluX3R3aXR0ZXIuY3N2IikNCmBgYA0KDQoNCiMjIEJpbmFyeSBtb2RlbHMgLSB0b3AgMTANCg0KIyMjIE5ld3MNClRoaXMgdGltZSBwZXJpb2QncyBuZXdzIGdpdmVuIG9uZSdzIHRvdGFsIGNpdGF0aW9ucy9wdWJsaWNhdGlvbnMsIHBhc3QgdG90YWwgDQphdHRlbnRpb24sIGNvbnRyb2xsaW5nIGZvciB0aGUgZmllbGQgYW5kIHllYXIgKExleGlzIHNhbXBsZSBvbmx5KS4gUG9vbGVkIG1vZGVsDQp3aXRoIGNsdXN0ZXJlZCBTRXM6DQpgYGB7cn0NCmZpZWxkcyA8LSBjKCJzdGVtIiwgInNvY19zY2kiLCAibWVkaWNpbmUiLCAiYXJ0cyIpDQoNCmFsbF9iaW4xMF9tb2RlbHNfbmV3cyA8LSBkYXRhLmZyYW1lKG1hdHJpeChuY29sID0gMTAsIG5yb3cgPSAwKSkNCmFsbF9iaW4xMF9jb21wYXJpc29uc19uZXdzIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSA2LCBucm93ID0gMCkpDQoNCmZvciAoZmllbGQgaW4gZmllbGRzKXsNCiAgDQogIGZpZWxkX2RhdGFzZXQgPC0gZ2V0KGZpZWxkKQ0KICANCiAgbmV3c19tb2RlbCA8LSBnbG0obmV3c19hbGxfdG9wXzEwIH4gIyBwcm9mZXNzb3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBuZXdzX2FsbF9sICsgDQogICAgICAgICAgICAgICAgICAgICBjaXRlZF9ieV90b3RhbF9hbGxfbCArIA0KICAgICAgICAgICAgICAgICAgICAgIyBnZW5kZXINCiAgICAgICAgICAgICAgICAgICAgIGluZmVycmVkX2dlbmRlciArDQogICAgICAgICAgICAgICAgICAgICAjIGF0dGVudGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGFsdF9vbmxpbmVfYWxsX3RvdGFsX2wgKyBhbHRfdHdpdHRlcl90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgICMgY29hdXRob3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBjb2FfdG90X2NpdGVkX2J5X3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGNvYV9vbmxpbmVfbmV3c190b3RhbF9sICsgY29hX3R3aXR0ZXJfdG90YWxfbCthcy5mYWN0b3IoeWVhciksDQogICAgICAgICAgICAgICAgICAgZGF0YSA9IGZpZWxkX2RhdGFzZXQsIGZhbWlseSA9ICdiaW5vbWlhbCcpIA0KICANCiAgbW9kZWxfcmVzdWx0IDwtIGNvZWZ0ZXN0KG5ld3NfbW9kZWwsIHR5cGUgPSAiSEMwIiwgY2x1c3RlciA9IH5wcm9maWxlX2lkKVssXSAlPiUgDQogICAgYXMuZGF0YS5mcmFtZSgpICU+JSANCiAgICB0aWJibGU6OnJvd25hbWVzX3RvX2NvbHVtbih2YXIgPSAidGVybSIpDQogIA0KICBtb2RlbF9yZXN1bHRbbnJvdyhtb2RlbF9yZXN1bHQpKzEsIDFdIDwtICJSXjIiDQogIG1vZGVsX3Jlc3VsdFtucm93KG1vZGVsX3Jlc3VsdCksIDI6bmNvbChtb2RlbF9yZXN1bHQpXSA8LSByb3VuZChQc2V1ZG9SMihuZXdzX21vZGVsKSwzKQ0KICBtb2RlbF9yZXN1bHQkZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9iaW4xMF9tb2RlbHNfbmV3cyA8LSByYmluZChhbGxfYmluMTBfbW9kZWxzX25ld3MsDQogICAgICAgICAgICAgICAgICAgICAgbW9kZWxfcmVzdWx0KQ0KICANCiAgZ2VuZGVyX2NvbXBhcmlzb24gPC0gdGVzdF9wcmVkaWN0aW9ucyhuZXdzX21vZGVsLCBjKCJpbmZlcnJlZF9nZW5kZXIiKSwgdmNvdl9mdW4gPSAiSEMwIikNCiAgZ2VuZGVyX2NvbXBhcmlzb24kZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9iaW4xMF9jb21wYXJpc29uc19uZXdzIDwtIHJiaW5kKGFsbF9iaW4xMF9jb21wYXJpc29uc19uZXdzLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyX2NvbXBhcmlzb24pDQogIA0KICANCn0NCg0KYWxsX2JpbjEwX21vZGVsc19uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfYmluMTBfbW9kZWxzX25ld3MkYFByKD58enwpYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2JpbjEwX21vZGVsc19uZXdzJGBQcig+fHp8KWAgPD0gMC4wMDEsICIqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW4xMF9tb2RlbHNfbmV3cyRgUHIoPnx6fClgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW4xMF9tb2RlbHNfbmV3cyRgUHIoPnx6fClgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2JpbjEwX2NvbXBhcmlzb25zX25ld3Mkc3RhcnMgPC0gaWZlbHNlKGFsbF9iaW4xMF9jb21wYXJpc29uc19uZXdzJGBwLnZhbHVlYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2JpbjEwX2NvbXBhcmlzb25zX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluMTBfY29tcGFyaXNvbnNfbmV3cyRgcC52YWx1ZWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2JpbjEwX2NvbXBhcmlzb25zX25ld3MkYHAudmFsdWVgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2JpbjEwX2NvbXBhcmlzb25zX25ld3MkZ3JvdXAxIDwtIHN0cl9zcGxpdF9pKGFsbF9iaW4xMF9jb21wYXJpc29uc19uZXdzJGluZmVycmVkX2dlbmRlciwgIi0iLCAxKQ0KYWxsX2JpbjEwX2NvbXBhcmlzb25zX25ld3MkZ3JvdXAyIDwtIHN0cl9zcGxpdF9pKGFsbF9iaW4xMF9jb21wYXJpc29uc19uZXdzJGluZmVycmVkX2dlbmRlciwgIi0iLCAyKQ0KDQphbGxfYmluMTBfY29tcGFyaXNvbnNfbmV3cyRwX3JvdW5kZWQgPC0gcm91bmQoYWxsX2JpbjEwX2NvbXBhcmlzb25zX25ld3MkcC52YWx1ZSwgNCkNCg0KYGBgDQoNCmBgYHtyfQ0Ka25pdHI6OmthYmxlKGFsbF9iaW4xMF9tb2RlbHNfbmV3cykNCmBgYA0KDQojIyMgT25saW5lIE5ld3MNClRoaXMgdGltZSBwZXJpb2QncyBuZXdzIGdpdmVuIG9uZSdzIHRvdGFsIGNpdGF0aW9ucy9wdWJsaWNhdGlvbnMsIHBhc3QgdG90YWwgDQphdHRlbnRpb24sIGNvbnRyb2xsaW5nIGZvciB0aGUgZmllbGQgYW5kIHllYXIgKExleGlzIHNhbXBsZSBvbmx5KS4gUG9vbGVkIG1vZGVsDQp3aXRoIGNsdXN0ZXJlZCBTRXM6DQpgYGB7cn0NCmZpZWxkcyA8LSBjKCJzdGVtIiwgInNvY19zY2kiLCAibWVkaWNpbmUiLCAiYXJ0cyIpDQoNCmFsbF9iaW4xMF9tb2RlbHNfb25saW5lX25ld3MgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDEwLCBucm93ID0gMCkpDQphbGxfYmluMTBfY29tcGFyaXNvbnNfb25saW5lX25ld3MgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDYsIG5yb3cgPSAwKSkNCg0KZm9yIChmaWVsZCBpbiBmaWVsZHMpew0KICANCiAgZmllbGRfZGF0YXNldCA8LSBnZXQoZmllbGQpDQogIA0KICBuZXdzX21vZGVsIDwtIGdsbShhbHRfb25saW5lX2FsbF90b3BfMTAgfiAjIHByb2Zlc3NvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICBhbHRfb25saW5lX2FsbF9sKw0KICAgICAgICAgICAgICAgICAgICAgICAgIGNpdGVkX2J5X3RvdGFsX2FsbF9sICsgDQogICAgICAgICAgICAgICAgICAgICAgICAgIyBnZW5kZXINCiAgICAgICAgICAgICAgICAgICAgICAgICBpbmZlcnJlZF9nZW5kZXIgICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAjIGF0dGVudGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICBuZXdzX2FsbF90b3RhbF9sICsgYWx0X3R3aXR0ZXJfdG90YWxfbCArDQogICAgICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICBjb2FfdG90X2NpdGVkX2J5X3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICMgY29hdXRob3IgcHVibGljYXRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICAgICAgY29hX29ubGluZV9uZXdzX3RvdGFsX2wgKyBjb2FfdHdpdHRlcl90b3RhbF9sK2FzLmZhY3Rvcih5ZWFyKSwNCiAgICAgICAgICAgICAgICAgICBkYXRhID0gZmllbGRfZGF0YXNldCwgZmFtaWx5ID0gJ2Jpbm9taWFsJykgIA0KICANCiAgbW9kZWxfcmVzdWx0IDwtIGNvZWZ0ZXN0KG5ld3NfbW9kZWwsIHR5cGUgPSAiSEMwIiwgY2x1c3RlciA9IH5wcm9maWxlX2lkKVssXSAlPiUgDQogICAgYXMuZGF0YS5mcmFtZSgpICU+JSANCiAgICB0aWJibGU6OnJvd25hbWVzX3RvX2NvbHVtbih2YXIgPSAidGVybSIpDQogIA0KICBtb2RlbF9yZXN1bHRbbnJvdyhtb2RlbF9yZXN1bHQpKzEsIDFdIDwtICJSXjIiDQogIG1vZGVsX3Jlc3VsdFtucm93KG1vZGVsX3Jlc3VsdCksIDI6bmNvbChtb2RlbF9yZXN1bHQpXSA8LSByb3VuZChQc2V1ZG9SMihuZXdzX21vZGVsKSwzKQ0KICBtb2RlbF9yZXN1bHQkZmllbGQgPC0gZmllbGQNCiAgDQogIGFsbF9iaW4xMF9tb2RlbHNfb25saW5lX25ld3MgPC0gcmJpbmQoYWxsX2JpbjEwX21vZGVsc19vbmxpbmVfbmV3cywNCiAgICAgICAgICAgICAgICAgICAgICBtb2RlbF9yZXN1bHQpDQogIA0KICBnZW5kZXJfY29tcGFyaXNvbiA8LSB0ZXN0X3ByZWRpY3Rpb25zKG5ld3NfbW9kZWwsIGMoImluZmVycmVkX2dlbmRlciIpLCB2Y292X2Z1biA9ICJ2Y292Q0wiKQ0KICBnZW5kZXJfY29tcGFyaXNvbiRmaWVsZCA8LSBmaWVsZA0KICANCiAgYWxsX2JpbjEwX2NvbXBhcmlzb25zX29ubGluZV9uZXdzIDwtIHJiaW5kKGFsbF9iaW4xMF9jb21wYXJpc29uc19vbmxpbmVfbmV3cywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmRlcl9jb21wYXJpc29uKQ0KICANCiAgDQp9DQoNCmFsbF9iaW4xMF9tb2RlbHNfb25saW5lX25ld3Mkc3RhcnMgPC0gaWZlbHNlKGFsbF9iaW4xMF9tb2RlbHNfb25saW5lX25ld3MkYFByKD58enwpYCA8PSAwLjAwMSwgIioqKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2JpbjEwX21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx6fClgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluMTBfbW9kZWxzX29ubGluZV9uZXdzJGBQcig+fHp8KWAgPD0gMC4wNSwgIioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2JpbjEwX21vZGVsc19vbmxpbmVfbmV3cyRgUHIoPnx6fClgIDw9IDAuMSwgIi4iLCAiIikpKSkNCg0KYWxsX2JpbjEwX2NvbXBhcmlzb25zX29ubGluZV9uZXdzJHN0YXJzIDwtIGlmZWxzZShhbGxfYmluMTBfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluMTBfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluMTBfY29tcGFyaXNvbnNfb25saW5lX25ld3MkYHAudmFsdWVgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW4xMF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRgcC52YWx1ZWAgPD0gMC4xLCAiLiIsICIiKSkpKQ0KDQphbGxfYmluMTBfY29tcGFyaXNvbnNfb25saW5lX25ld3MkZ3JvdXAxIDwtIHN0cl9zcGxpdF9pKGFsbF9iaW4xMF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRpbmZlcnJlZF9nZW5kZXIsICItIiwgMSkNCmFsbF9iaW4xMF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRncm91cDIgPC0gc3RyX3NwbGl0X2koYWxsX2JpbjEwX2NvbXBhcmlzb25zX29ubGluZV9uZXdzJGluZmVycmVkX2dlbmRlciwgIi0iLCAyKQ0KDQphbGxfYmluMTBfY29tcGFyaXNvbnNfb25saW5lX25ld3MkcF9yb3VuZGVkIDwtIHJvdW5kKGFsbF9iaW4xMF9jb21wYXJpc29uc19vbmxpbmVfbmV3cyRwLnZhbHVlLCA0KQ0KDQpgYGANCg0KYGBge3J9DQprbml0cjo6a2FibGUoYWxsX2JpbjEwX21vZGVsc19vbmxpbmVfbmV3cykNCmBgYA0KDQojIyMgVHdpdHRlcg0KVGhpcyB0aW1lIHBlcmlvZCdzIG5ld3MgZ2l2ZW4gb25lJ3MgdG90YWwgY2l0YXRpb25zL3B1YmxpY2F0aW9ucywgcGFzdCB0b3RhbCANCmF0dGVudGlvbiwgY29udHJvbGxpbmcgZm9yIHRoZSBmaWVsZCBhbmQgeWVhciAoTGV4aXMgc2FtcGxlIG9ubHkpLiBQb29sZWQgbW9kZWwNCndpdGggY2x1c3RlcmVkIFNFczoNCmBgYHtyfQ0KZmllbGRzIDwtIGMoInN0ZW0iLCAic29jX3NjaSIsICJtZWRpY2luZSIsICJhcnRzIikNCg0KYWxsX2JpbjEwX21vZGVsc190d2l0dGVyIDwtIGRhdGEuZnJhbWUobWF0cml4KG5jb2wgPSAxMCwgbnJvdyA9IDApKQ0KYWxsX2JpbjEwX2NvbXBhcmlzb25zX3R3aXR0ZXIgPC0gZGF0YS5mcmFtZShtYXRyaXgobmNvbCA9IDYsIG5yb3cgPSAwKSkNCg0KZm9yIChmaWVsZCBpbiBmaWVsZHMpew0KICANCiAgZmllbGRfZGF0YXNldCA8LSBnZXQoZmllbGQpDQogIA0KICBuZXdzX21vZGVsIDwtIGdsbShhbHRfdHdpdHRlcl90b3BfMTAgfiAjIHByb2Zlc3NvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGFsdF90d2l0dGVyX2wgKyAgY2l0ZWRfYnlfdG90YWxfYWxsX2wgKyANCiAgICAgICAgICAgICAgICAgICAgICMgZ2VuZGVyDQogICAgICAgICAgICAgICAgICAgICBpbmZlcnJlZF9nZW5kZXIgKw0KICAgICAgICAgICAgICAgICAgICAgIyBhdHRlbnRpb24gdmFyaWFibGVzDQogICAgICAgICAgICAgICAgICAgICBuZXdzX2FsbF90b3RhbF9sICsNCiAgICAgICAgICAgICAgICAgICAgIGFsdF9vbmxpbmVfYWxsX3RvdGFsX2wgKw0KICAgICAgICAgICAgICAgICAgICAgIyBjb2F1dGhvciBwdWJsaWNhdGlvbiB2YXJpYWJsZXMNCiAgICAgICAgICAgICAgICAgICAgIGNvYV90b3RfY2l0ZWRfYnlfdG90YWxfbCArDQogICAgICAgICAgICAgICAgICAgICAjIGNvYXV0aG9yIHB1YmxpY2F0aW9uIHZhcmlhYmxlcw0KICAgICAgICAgICAgICAgICAgICAgY29hX29ubGluZV9uZXdzX3RvdGFsX2wgKyBjb2FfdHdpdHRlcl90b3RhbF9sK2FzLmZhY3Rvcih5ZWFyKSwNCiAgICAgICAgICAgICAgICAgICBkYXRhID0gZmllbGRfZGF0YXNldCwgZmFtaWx5ID0gJ2Jpbm9taWFsJykNCiAgDQogIG1vZGVsX3Jlc3VsdCA8LSBjb2VmdGVzdChuZXdzX21vZGVsLCB0eXBlID0gIkhDMCIsIGNsdXN0ZXIgPSB+cHJvZmlsZV9pZClbLF0gJT4lIA0KICAgIGFzLmRhdGEuZnJhbWUoKSAlPiUgDQogICAgdGliYmxlOjpyb3duYW1lc190b19jb2x1bW4odmFyID0gInRlcm0iKQ0KICANCiAgbW9kZWxfcmVzdWx0W25yb3cobW9kZWxfcmVzdWx0KSsxLCAxXSA8LSAiUl4yIg0KICBtb2RlbF9yZXN1bHRbbnJvdyhtb2RlbF9yZXN1bHQpLCAyOm5jb2wobW9kZWxfcmVzdWx0KV0gPC0gcm91bmQoUHNldWRvUjIobmV3c19tb2RlbCksMykNCiAgbW9kZWxfcmVzdWx0JGZpZWxkIDwtIGZpZWxkDQogIA0KICBhbGxfYmluMTBfbW9kZWxzX3R3aXR0ZXIgPC0gcmJpbmQoYWxsX2JpbjEwX21vZGVsc190d2l0dGVyLA0KICAgICAgICAgICAgICAgICAgICAgIG1vZGVsX3Jlc3VsdCkNCiAgDQogIGdlbmRlcl9jb21wYXJpc29uIDwtIHRlc3RfcHJlZGljdGlvbnMobmV3c19tb2RlbCwgYygiaW5mZXJyZWRfZ2VuZGVyIiksIHZjb3ZfZnVuID0gInZjb3ZDTCIpDQogIGdlbmRlcl9jb21wYXJpc29uJGZpZWxkIDwtIGZpZWxkDQogIA0KICBhbGxfYmluMTBfY29tcGFyaXNvbnNfdHdpdHRlciA8LSByYmluZChhbGxfYmluMTBfY29tcGFyaXNvbnNfdHdpdHRlciwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmRlcl9jb21wYXJpc29uKQ0KICANCiAgDQp9DQoNCmFsbF9iaW4xMF9tb2RlbHNfdHdpdHRlciRzdGFycyA8LSBpZmVsc2UoYWxsX2JpbjEwX21vZGVsc190d2l0dGVyJGBQcig+fHp8KWAgPD0gMC4wMDEsICIqKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW4xMF9tb2RlbHNfdHdpdHRlciRgUHIoPnx6fClgIDw9IDAuMDAxLCAiKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluMTBfbW9kZWxzX3R3aXR0ZXIkYFByKD58enwpYCA8PSAwLjA1LCAiKiIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShhbGxfYmluMTBfbW9kZWxzX3R3aXR0ZXIkYFByKD58enwpYCA8PSAwLjEsICIuIiwgIiIpKSkpDQoNCmFsbF9iaW4xMF9jb21wYXJpc29uc190d2l0dGVyJHN0YXJzIDwtIGlmZWxzZShhbGxfYmluMTBfY29tcGFyaXNvbnNfdHdpdHRlciRgcC52YWx1ZWAgPD0gMC4wMDEsICIqKioiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW4xMF9jb21wYXJpc29uc190d2l0dGVyJGBwLnZhbHVlYCA8PSAwLjAwMSwgIioqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoYWxsX2JpbjEwX2NvbXBhcmlzb25zX3R3aXR0ZXIkYHAudmFsdWVgIDw9IDAuMDUsICIqIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGFsbF9iaW4xMF9jb21wYXJpc29uc190d2l0dGVyJGBwLnZhbHVlYCA8PSAwLjEsICIuIiwgIiIpKSkpDQoNCmFsbF9iaW4xMF9jb21wYXJpc29uc190d2l0dGVyJGdyb3VwMSA8LSBzdHJfc3BsaXRfaShhbGxfYmluMTBfY29tcGFyaXNvbnNfdHdpdHRlciRpbmZlcnJlZF9nZW5kZXIsICItIiwgMSkNCmFsbF9iaW4xMF9jb21wYXJpc29uc190d2l0dGVyJGdyb3VwMiA8LSBzdHJfc3BsaXRfaShhbGxfYmluMTBfY29tcGFyaXNvbnNfdHdpdHRlciRpbmZlcnJlZF9nZW5kZXIsICItIiwgMikNCg0KYWxsX2JpbjEwX2NvbXBhcmlzb25zX3R3aXR0ZXIkcF9yb3VuZGVkIDwtIHJvdW5kKGFsbF9iaW4xMF9jb21wYXJpc29uc190d2l0dGVyJHAudmFsdWUsIDQpDQpgYGANCiMjIFdyaXRlIG91dCB0aGUgbW9kZWxzDQpgYGB7cn0NCndyaXRlX2NzdihhbGxfYmluMTBfbW9kZWxzX25ld3MsICJQbG90c19hcHJpbC9yZWdfbW9kX2JpbjEwX25ld3MuY3N2IikNCndyaXRlX2NzdihhbGxfYmluMTBfbW9kZWxzX29ubGluZV9uZXdzLCAiUGxvdHNfYXByaWwvcmVnX21vZF9iaW4xMF9vbmxpbmVfbmV3cy5jc3YiKQ0Kd3JpdGVfY3N2KGFsbF9iaW4xMF9tb2RlbHNfdHdpdHRlciwgIlBsb3RzX2FwcmlsL3JlZ19tb2RfYmluMTBfdHdpdHRlci5jc3YiKQ0KYGBgDQoNCmBgYHtyfQ0Ka25pdHI6OmthYmxlKGFsbF9iaW4xMF9tb2RlbHNfdHdpdHRlcikNCmBgYA0KDQojIE1vYmlsaXR5IHBlciBnZW5kZXINCg0KTGV0IHVzIGxvb2sgb25seSBhdCBwZW9wbGUgd2hvIGhhdmUgZW50ZXJlZCB0aGUgZGF0YXNldCBiZWZvcmUgMjAxMiBhbmQgbGltaXQgdGhlIA0KZGF0YXNldCB0byB0aGUgcGVyaW9kIGFmdGVyIDIwMTI6DQpgYGB7cn0NCnByb2ZfcGFuZWxfbW9iaWxpdHkgPC0gZmlsdGVyKHByb2ZfcGFuZWxfZmlsdGVyLCBmaXJzdF9wdWIgPD0gMjAxMiAmIHllYXIgPj0gMjAxMikNCg0KIyBzcGxpdCB0aGUgcGVyaW9kcyBpbnRvIDINCnByb2ZfcGFuZWxfbW9iaWxpdHkkcGVyaW9kIDwtIGlmZWxzZShwcm9mX3BhbmVsX21vYmlsaXR5JHllYXIgPD0gMjAxNywgImZpcnN0IiwgInNlY29uZCIpDQpgYGANCg0KTm93LCBzZWxlY3QgcHJvZmVzc29ycycgYXR0ZW50aW9uIGluIHRoZXNlIHllYXJzIGFuZCBhZGQgaXQgdXAgcGVyIHBlcmlvZDoNCg0KR2V0IHRyYW5zaXRpb24gbWF0cmljZXMgcGVyIGdlbmRlcjoNCihzZWUgdGhlICJoZWxwZXJfZnVuY3Rpb25zLlIiIGZpbGUgZm9yIHRoZSBhY3R1YWwgZnVuY3Rpb24pDQpgYGB7ciBtZXNzYWdlPUZ9DQpzcGxpdHMgPC0gMTANCg0KZ2VuZGVyX21hdHJpY2VzIDwtIGdlbl90cmFuc2l0aW9uX21hdHJpeChwcm9mX3BhbmVsX21vYmlsaXR5LCBzcGxpdF9ieSA9ICJnZW5kZXIiLCBicmFja2V0cyA9IHNwbGl0cykNCmBgYA0KDQpHZXQgdHJhbnNpdGlvbiBtYXRyaWNlcyBwZXIgZ2VuZGVyIGFuZCBmaWVsZDoNCmBgYHtyIG1lc3NhZ2U9Rn0NCmdlbmRlcl9maWVsZF9tYXRyaWNlcyA8LSBnZW5fdHJhbnNpdGlvbl9tYXRyaXgocHJvZl9wYW5lbF9tb2JpbGl0eSwgc3BsaXRfYnkgPSAiZ2VuZGVyICYgZmllbGQiLCBicmFja2V0cyA9IHNwbGl0cykNCmBgYA0KDQpHZXQgcGxvdHMgZm9yOg0KIyMjIE92ZXJhbGwgdHJhbnNpdGlvbnM6DQpgYGB7cn0NCmxvb3BfbGlzdCA8LSBjKCJwdWJfdHJhbnNpdGlvbnMiLCAiY2l0X3RyYW5zaXRpb25zIiwNCiAgICAgICAgICAib25saW5lX25ld3NfdHJhbnNpdGlvbnMiLCAibmV3c190cmFuc2l0aW9ucyIsIA0KICAgICAgICAgICJ0d2l0dGVyX3RyYW5zaXRpb25zIikNCg0KdGl0bGVzIDwtIGMoIlB1YmxpY2F0aW9ucyIsICJDaXRhdGlvbnMiLA0KICAgICAgICAgICAgIk9ubGluZSBuZXdzIGF0dGVudGlvbiIsICJOZXdzIGF0dGVudGlvbiIsDQogICAgICAgICAgICAiVHdpdHRlciBhdHRlbnRpb24iKQ0KDQoNCmNvbG9yX2xpc3QgPC0gYygiI2ZiOTIzYyIsICIjZmJiZjI0IiwgIiMzNGQzOTkiLCAiIzIyZDNlZSIsICIjODE4Y2Y4IikNCg0Kb3ZlcmFsbF90cmFuc2l0aW9uX3Bsb3RzIDwtIGxpc3QoKQ0KDQpmb3IgKG1hdHJpeCBpbiBsb29wX2xpc3Qpew0KICBtYXRyaXhfY3VycmVudCA8LSBnZW5kZXJfbWF0cmljZXNbW21hdHJpeF1dW1siYWxsIl1dDQogIA0KICBwbG90X2N1cnJlbnQgPC0gbWF0cml4X2N1cnJlbnQgJT4lIA0KICAgIGFzLmRhdGEuZnJhbWUoKSAlPiUNCiAgICByb3duYW1lc190b19jb2x1bW4oInAxIikgJT4lDQogICAgcGl2b3RfbG9uZ2VyKC1jKHAxKSwgbmFtZXNfdG8gPSAicDIiLCB2YWx1ZXNfdG8gPSAicHJvYiIpJT4lDQogICAgZ2dwbG90KGFlcyh4PWFzLmludGVnZXIocDEpLCB5PWFzLmludGVnZXIocDIpLCBmaWxsPXByb2IpKSArIA0KICAgIGdlb21fdGlsZSgpICsNCiAgICBzY2FsZV9maWxsX2dyYWRpZW50Mihsb3cgPSAiI2Y4NzE3MSIsIG1pZCA9ICJ3aGl0ZSIsIGhpZ2ggPSBjb2xvcl9saXN0W3doaWNoKGxvb3BfbGlzdCA9PSBtYXRyaXgpXSkrDQogICAgc2NhbGVfeF9jb250aW51b3VzKGJyZWFrcz1zZXEoMCwgc3BsaXRzLCAxKSwgZXhwYW5kID0gYygwLCAwKSkrDQogICAgc2NhbGVfeV9jb250aW51b3VzKGJyZWFrcz1zZXEoMCwgc3BsaXRzLCAxKSwgdHJhbnMgPSAicmV2ZXJzZSIsIGV4cGFuZCA9IGMoMCwgMCkpKw0KICAgIHhsYWIoIlBlcmlvZCAxOiAyMDExLTIwMTciKSsNCiAgICB5bGFiKCJQZXJpb2QgMjogMjAxOC0yMDIzIikrDQogICAgdGhlbWVfbWluaW1hbCgpKw0KICAgIGdndGl0bGUodGl0bGVzW3doaWNoKGxvb3BfbGlzdCA9PSBtYXRyaXgpXSkrDQogICAgZ3VpZGVzKGZpbGw9Z3VpZGVfbGVnZW5kKHRpdGxlPSJQcm9iYWJpbGl0eSIpKSsNCiAgICB0aGVtZShwbG90LnRpdGxlID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgICAgYXhpcy50ZXh0LnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDEwKSwNCiAgICAgICAgICBheGlzLnRpdGxlLnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDExKSwNCiAgICAgICAgICBheGlzLnRleHQueCA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApICwNCiAgICAgICAgICBheGlzLnRpdGxlLnggPSBlbGVtZW50X3RleHQoc2l6ZSA9IDExKSwNCiAgICAgICAgICBsZWdlbmQudGl0bGU9ZWxlbWVudF90ZXh0KHNpemU9MTApLCANCiAgICAgICAgICBsZWdlbmQudGV4dD1lbGVtZW50X3RleHQoc2l6ZT04KSkNCiAgDQogIG92ZXJhbGxfdHJhbnNpdGlvbl9wbG90c1tbbWF0cml4XV0gPC0gcGxvdF9jdXJyZW50DQogIA0KfQ0KYGBgDQpQbG90IHRoZXNlOg0KYGBge3IgZmlnLndpZHRoPTgsIGZpZy5oZWlnaHQ9N30NCmdyaWQuYXJyYW5nZShncm9icyA9IG92ZXJhbGxfdHJhbnNpdGlvbl9wbG90cywgbmNvbCA9IDIpDQpgYGANCg0KIyMjIE92ZXJhbGwgdHJhbnNpdGlvbnMgcGVyIGZpZWxkOg0KYGBge3J9DQpsb29wX2xpc3QgPC0gYygicHViX3RyYW5zaXRpb25zIiwgImNpdF90cmFuc2l0aW9ucyIsDQogICAgICAgICAgIm9ubGluZV9uZXdzX3RyYW5zaXRpb25zIiwgIm5ld3NfdHJhbnNpdGlvbnMiLCANCiAgICAgICAgICAidHdpdHRlcl90cmFuc2l0aW9ucyIpDQoNCnRpdGxlcyA8LSBjKCJQdWJsaWNhdGlvbnMiLCAiQ2l0YXRpb25zIiwNCiAgICAgICAgICAgICJPbmxpbmUgbmV3cyBhdHRlbnRpb24iLCAiTmV3cyBhdHRlbnRpb24iLA0KICAgICAgICAgICAgIlR3aXR0ZXIgYXR0ZW50aW9uIikNCg0KDQpjb2xvcl9saXN0IDwtIGMoIiNmYjkyM2MiLCAiI2ZiYmYyNCIsICIjMzRkMzk5IiwgIiMyMmQzZWUiLCAiIzgxOGNmOCIpDQoNCm92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90cyA8LSBsaXN0KCkNCg0KZm9yIChtYXRyaXggaW4gbG9vcF9saXN0KXsNCiAgZmllbGRzIDwtIGMoIlNURU0iLCAiU29jaWFsIHNjaWVuY2VzIiwgIk1lZGljaW5lIiwgIkFydHMgJiBIdW1hbml0aWVzIikNCiAgDQogIGZvciAoZmllbGQgaW4gZmllbGRzKXsNCiAgbWF0cml4X2N1cnJlbnQgPC0gZ2VuZGVyX2ZpZWxkX21hdHJpY2VzW1ttYXRyaXhdXVtbZmllbGRdXVtbImFsbCJdXQ0KICANCiAgcGxvdF9jdXJyZW50IDwtIG1hdHJpeF9jdXJyZW50ICU+JSANCiAgICBhcy5kYXRhLmZyYW1lKCkgJT4lDQogICAgcm93bmFtZXNfdG9fY29sdW1uKCJwMSIpICU+JQ0KICAgIHBpdm90X2xvbmdlcigtYyhwMSksIG5hbWVzX3RvID0gInAyIiwgdmFsdWVzX3RvID0gInByb2IiKSU+JQ0KICAgIGdncGxvdChhZXMoeD1hcy5pbnRlZ2VyKHAxKSwgeT1hcy5pbnRlZ2VyKHAyKSwgZmlsbD1wcm9iKSkgKyANCiAgICBnZW9tX3RpbGUoKSArDQogICAgc2NhbGVfZmlsbF9ncmFkaWVudDIobG93ID0gIiNmODcxNzEiLCBtaWQgPSAid2hpdGUiLCBoaWdoID0gY29sb3JfbGlzdFt3aGljaChsb29wX2xpc3QgPT0gbWF0cml4KV0pKw0KICAgIHNjYWxlX3hfY29udGludW91cyhicmVha3M9c2VxKDAsIHNwbGl0cywgMSksIGV4cGFuZCA9IGMoMCwgMCkpKw0KICAgIHNjYWxlX3lfY29udGludW91cyhicmVha3M9c2VxKDAsIHNwbGl0cywgMSksIHRyYW5zID0gInJldmVyc2UiLCBleHBhbmQgPSBjKDAsIDApKSsNCiAgICB4bGFiKCJQZXJpb2QgMTogMjAxMS0yMDE3IikrDQogICAgeWxhYigiUGVyaW9kIDI6IDIwMTgtMjAyMyIpKw0KICAgIHRoZW1lX21pbmltYWwoKSsNCiAgICBnZ3RpdGxlKHRpdGxlc1t3aGljaChsb29wX2xpc3QgPT0gbWF0cml4KV0pKw0KICAgIGd1aWRlcyhmaWxsPWd1aWRlX2xlZ2VuZCh0aXRsZT0iUHJvYmFiaWxpdHkiKSkrDQogIHRoZW1lKHBsb3QudGl0bGUgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDEwKSwNCiAgICAgICAgYXhpcy50ZXh0LnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDkpLA0KICAgICAgICBheGlzLnRpdGxlLnkgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDEwKSwNCiAgICAgICAgYXhpcy50ZXh0LnggPSBlbGVtZW50X3RleHQoc2l6ZSA9IDkpICwNCiAgICAgICAgYXhpcy50aXRsZS54ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxMCksDQogICAgICAgIGxlZ2VuZC50aXRsZT1lbGVtZW50X3RleHQoc2l6ZT0xMCksIA0KICAgICAgICBsZWdlbmQudGV4dD1lbGVtZW50X3RleHQoc2l6ZT04KSkNCiAgDQogIG92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90c1tbZmllbGRdXVtbbWF0cml4XV0gPC0gcGxvdF9jdXJyZW50DQogIA0KICB9DQogIA0KfQ0KYGBgDQoNClByZXBhcmUgdHJhbnNpdGlvbiBwbG90cyBwZXIgZmllbGQ6DQpgYGB7ciBmaWcud2lkdGg9MTIsIGZpZy5oZWlnaHQ9MTJ9DQpwbG90MSA8LSBvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNbWydTVEVNJ11dWzRdW1sibmV3c190cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaSkgTmV3cyBhdHRlbnRpb24iKQ0KcGxvdDIgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzW1snU1RFTSddXVszXVtbIm9ubGluZV9uZXdzX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpaSkgT25saW5lIGF0dGVudGlvbiIpDQpwbG90MyA8LSBvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNbWydTVEVNJ11dWzVdW1sidHdpdHRlcl90cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaWlpKSBUd2l0dGVyIGF0dGVudGlvbiIpDQoNCiMgbm93IGFkZCB0aGUgdGl0bGUNCnRpdGxlIDwtIGdnZHJhdygpICsgDQogIGRyYXdfbGFiZWwoDQogICAgIihhKSBTVEVNIiwNCiAgICB4ID0gMCwNCiAgICBoanVzdCA9IDANCiAgKSArDQogIHRoZW1lKA0KICAgICMgYWRkIG1hcmdpbiBvbiB0aGUgbGVmdCBvZiB0aGUgZHJhd2luZyBjYW52YXMsDQogICAgIyBzbyB0aXRsZSBpcyBhbGlnbmVkIHdpdGggbGVmdCBlZGdlIG9mIGZpcnN0IHBsb3QNCiAgICBwbG90Lm1hcmdpbiA9IG1hcmdpbigwLCAwLCAwLCA3KQ0KICApDQpzdGVtIDwtIHBsb3RfZ3JpZChwbG90MSwNCiAgICAgICAgICAgICAgICAgIHBsb3QyLA0KICAgICAgICAgICAgICAgICAgcGxvdDMsIG5jb2wgPSAzLCBucm93ID0gMSkNCg0Kc3RlbSA8LSBwbG90X2dyaWQoDQogIHRpdGxlLCBzdGVtLA0KICBuY29sID0gMSwNCiAgIyByZWxfaGVpZ2h0cyB2YWx1ZXMgY29udHJvbCB2ZXJ0aWNhbCB0aXRsZSBtYXJnaW5zDQogIHJlbF9oZWlnaHRzID0gYygwLjEsIDEpDQopDQoNCnBsb3QxIDwtIG92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90c1tbJ1NvY2lhbCBzY2llbmNlcyddXVs0XVtbIm5ld3NfdHJhbnNpdGlvbnMiXV0rZ2d0aXRsZSgiKGkpIE5ld3MgYXR0ZW50aW9uIikNCnBsb3QyIDwtIG92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90c1tbJ1NvY2lhbCBzY2llbmNlcyddXVszXVtbIm9ubGluZV9uZXdzX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpaSkgT25saW5lIGF0dGVudGlvbiIpDQpwbG90MyA8LSBvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNbWydTb2NpYWwgc2NpZW5jZXMnXV1bNV1bWyJ0d2l0dGVyX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpaWkpIFR3aXR0ZXIgYXR0ZW50aW9uIikNCg0Kc29jX3NjaSA8LSBwbG90X2dyaWQocGxvdDEsDQogICAgICAgICAgICAgICAgICAgICBwbG90MiwNCiAgICAgICAgICAgICAgICAgICAgIHBsb3QzLCBuY29sID0gMywgbnJvdyA9IDEpDQoNCnRpdGxlIDwtIGdnZHJhdygpICsgDQogIGRyYXdfbGFiZWwoDQogICAgIihiKSBTb2NpYWwgc2NpZW5jZSIsDQogICAgeCA9IDAsDQogICAgaGp1c3QgPSAwDQogICkgKw0KICB0aGVtZSgNCiAgICAjIGFkZCBtYXJnaW4gb24gdGhlIGxlZnQgb2YgdGhlIGRyYXdpbmcgY2FudmFzLA0KICAgICMgc28gdGl0bGUgaXMgYWxpZ25lZCB3aXRoIGxlZnQgZWRnZSBvZiBmaXJzdCBwbG90DQogICAgcGxvdC5tYXJnaW4gPSBtYXJnaW4oMCwgMCwgMCwgNykNCiAgKQ0KDQpzb2Nfc2NpIDwtIHBsb3RfZ3JpZCgNCiAgdGl0bGUsIHNvY19zY2ksDQogIG5jb2wgPSAxLA0KICAjIHJlbF9oZWlnaHRzIHZhbHVlcyBjb250cm9sIHZlcnRpY2FsIHRpdGxlIG1hcmdpbnMNCiAgcmVsX2hlaWdodHMgPSBjKDAuMSwgMSkNCikNCg0KcGxvdDEgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzW1snTWVkaWNpbmUnXV1bNF1bWyJuZXdzX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpKSBOZXdzIGF0dGVudGlvbiIpDQpwbG90MiA8LSBvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNbWydNZWRpY2luZSddXVszXVtbIm9ubGluZV9uZXdzX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpaSkgT25saW5lIGF0dGVudGlvbiIpDQpwbG90MyA8LSBvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNbWydNZWRpY2luZSddXVs1XVtbInR3aXR0ZXJfdHJhbnNpdGlvbnMiXV0rZ2d0aXRsZSgiKGlpaSkgVHdpdHRlciBhdHRlbnRpb24iKQ0KDQptZWRpY2luZSA8LSBwbG90X2dyaWQocGxvdDEsDQogICAgICAgICAgcGxvdDIsDQogICAgICAgICAgcGxvdDMsIG5jb2wgPSAzLCBucm93ID0gMSkNCg0KdGl0bGUgPC0gZ2dkcmF3KCkgKyANCiAgZHJhd19sYWJlbCgNCiAgICAiKGMpIE1lZGljaW5lIiwNCiAgICB4ID0gMCwNCiAgICBoanVzdCA9IDANCiAgKSArDQogIHRoZW1lKA0KICAgICMgYWRkIG1hcmdpbiBvbiB0aGUgbGVmdCBvZiB0aGUgZHJhd2luZyBjYW52YXMsDQogICAgIyBzbyB0aXRsZSBpcyBhbGlnbmVkIHdpdGggbGVmdCBlZGdlIG9mIGZpcnN0IHBsb3QNCiAgICBwbG90Lm1hcmdpbiA9IG1hcmdpbigwLCAwLCAwLCA3KQ0KICApDQoNCm1lZGljaW5lIDwtIHBsb3RfZ3JpZCgNCiAgdGl0bGUsIG1lZGljaW5lLA0KICBuY29sID0gMSwNCiAgIyByZWxfaGVpZ2h0cyB2YWx1ZXMgY29udHJvbCB2ZXJ0aWNhbCB0aXRsZSBtYXJnaW5zDQogIHJlbF9oZWlnaHRzID0gYygwLjEsIDEpDQopDQoNCnBsb3QxIDwtIG92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90c1tbJ0FydHMgJiBIdW1hbml0aWVzJ11dWzRdW1sibmV3c190cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaSkgTmV3cyBhdHRlbnRpb24iKQ0KcGxvdDIgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzW1snQXJ0cyAmIEh1bWFuaXRpZXMnXV1bM11bWyJvbmxpbmVfbmV3c190cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaWkpIE9ubGluZSBhdHRlbnRpb24iKQ0KcGxvdDMgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzW1snQXJ0cyAmIEh1bWFuaXRpZXMnXV1bNV1bWyJ0d2l0dGVyX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpaWkpIFR3aXR0ZXIgYXR0ZW50aW9uIikNCg0KYXJ0c19odW0gPC0gcGxvdF9ncmlkKHBsb3QxLA0KICAgICAgICAgIHBsb3QyLA0KICAgICAgICAgIHBsb3QzLCBuY29sID0gMywgbnJvdyA9IDEpDQoNCnRpdGxlIDwtIGdnZHJhdygpICsgDQogIGRyYXdfbGFiZWwoDQogICAgIihkKSBBcnRzICYgSHVtYW5pdGllcyIsDQogICAgeCA9IDAsDQogICAgaGp1c3QgPSAwDQogICkgKw0KICB0aGVtZSgNCiAgICAjIGFkZCBtYXJnaW4gb24gdGhlIGxlZnQgb2YgdGhlIGRyYXdpbmcgY2FudmFzLA0KICAgICMgc28gdGl0bGUgaXMgYWxpZ25lZCB3aXRoIGxlZnQgZWRnZSBvZiBmaXJzdCBwbG90DQogICAgcGxvdC5tYXJnaW4gPSBtYXJnaW4oMCwgMCwgMCwgNykNCiAgKQ0KDQphcnRzX2h1bSA8LSBwbG90X2dyaWQoDQogIHRpdGxlLCBhcnRzX2h1bSwNCiAgbmNvbCA9IDEsDQogICMgcmVsX2hlaWdodHMgdmFsdWVzIGNvbnRyb2wgdmVydGljYWwgdGl0bGUgbWFyZ2lucw0KICByZWxfaGVpZ2h0cyA9IGMoMC4xLCAxKQ0KKQ0KDQpgYGANCg0KU2F2ZSB0aGUgcGxvdDoNCmBgYHtyIGZpZy53aWR0aD0xMCwgZmlnLmhlaWdodD0xMH0NCmdnc2F2ZShmaWxlPSJQbG90c19hcHJpbC9TdXBwbGVtZW50YWwvUF9vdmVyYWxsX3RyYW5zaXRpb25zLnBuZyIsIA0KICAgICAgIGdyaWQuYXJyYW5nZShzdGVtLCBzb2Nfc2NpLA0KICAgICAgICAgICAgICAgICAgICBtZWRpY2luZSwgYXJ0c19odW0sDQogICAgICAgICAgICAgICAgICAgIG5jb2wgPSAxLCBucm93ID0gNCksDQogICAgICAgd2lkdGggPSAxMCwNCiAgICAgICBoZWlnaHQgPSAxMCwNCiAgICAgICB1bml0cyA9ICJpbiIpDQpgYGANCg0KIyMjIERpZmZlcmVuY2VzIGluIHRyYW5zaXRpb25zOg0KYGBge3J9DQpsb29wX2xpc3QgPC0gYygib25saW5lX25ld3NfdHJhbnNpdGlvbnMiLCAibmV3c190cmFuc2l0aW9ucyIsIA0KICAgICAgICAgICJ0d2l0dGVyX3RyYW5zaXRpb25zIikNCg0KdGl0bGVzIDwtIGMoIk9ubGluZSBuZXdzIGF0dGVudGlvbiIsICJOZXdzIGF0dGVudGlvbiIsDQogICAgICAgICAgICAiVHdpdHRlciBhdHRlbnRpb24iKQ0KDQoNCmNvbG9yX2xpc3QgPC0gYygiI2ZiOTIzYyIsICIjZmJiZjI0IiwgIiMzNGQzOTkiLCAiIzIyZDNlZSIsICIjODE4Y2Y4IikNCmNvbG9yX2xpc3QyIDwtIGMoIiNmZmY3ZWQiLCAiI2ZmZmJlYiIsICIjZWNmZGY1IiwgIiNlY2ZlZmYiLCAiI2VlZjJmZiIpDQoNCm92ZXJhbGxfZGlmZl9wbG90cyA8LSBsaXN0KCkNCg0KZm9yIChtYXRyaXggaW4gbG9vcF9saXN0KXsNCiAgbWF0cml4X2N1cnJlbnRfbWVuIDwtIGdlbmRlcl9tYXRyaWNlc1tbbWF0cml4XV1bWyJtZW4iXV0NCiAgbWF0cml4X2N1cnJlbnRfd29tZW4gPC0gZ2VuZGVyX21hdHJpY2VzW1ttYXRyaXhdXVtbIndvbWVuIl1dDQogIG1hdHJpeF9kaWZmIDwtIG1hdHJpeF9jdXJyZW50X3dvbWVuIC0gbWF0cml4X2N1cnJlbnRfbWVuDQogIHBsb3RfY3VycmVudCA8LSBtYXRyaXhfZGlmZiAlPiUgDQogICAgYXMuZGF0YS5mcmFtZSgpICU+JQ0KICAgIHJvd25hbWVzX3RvX2NvbHVtbigicDEiKSAlPiUNCiAgICBwaXZvdF9sb25nZXIoLWMocDEpLCBuYW1lc190byA9ICJwMiIsIHZhbHVlc190byA9ICJwcm9iIiklPiUNCiAgICBnZ3Bsb3QoYWVzKHg9YXMuaW50ZWdlcihwMSksIHk9YXMuaW50ZWdlcihwMiksIGZpbGw9cHJvYikpICsgDQogICAgZ2VvbV90aWxlKCkgKw0KICAgIHNjYWxlX2ZpbGxfZ3JhZGllbnQyKGxvdyA9ICIjZjg3MTcxIiwgbWlkID0gIndoaXRlIiwgaGlnaCA9IGNvbG9yX2xpc3Rbd2hpY2gobG9vcF9saXN0ID09IG1hdHJpeCldKSsNCiAgICBzY2FsZV94X2NvbnRpbnVvdXMoYnJlYWtzPXNlcSgwLCBzcGxpdHMsIDEpLCBleHBhbmQgPSBjKDAsIDApKSsNCiAgICBzY2FsZV95X2NvbnRpbnVvdXMoYnJlYWtzPXNlcSgwLCBzcGxpdHMsIDEpLCB0cmFucyA9ICJyZXZlcnNlIiwgZXhwYW5kID0gYygwLCAwKSkrDQogICAgeGxhYigicF8xIikrDQogICAgeWxhYigicF8yIikrDQogICAgdGhlbWVfbWluaW1hbCgpKw0KICAgIGdndGl0bGUodGl0bGVzW3doaWNoKGxvb3BfbGlzdCA9PSBtYXRyaXgpXSkrDQogICAgZ3VpZGVzKGZpbGw9Z3VpZGVfbGVnZW5kKHRpdGxlPSJEaWZmLiAodyAtIG0pIikpDQogIA0KICBvdmVyYWxsX2RpZmZfcGxvdHNbW21hdHJpeF1dIDwtIHBsb3RfY3VycmVudA0KICANCn0NCmBgYA0KDQpQbG90IHRoZXNlOg0KYGBge3IgZmlnLndpZHRoPTEyLCBmaWcuaGVpZ2h0PTN9DQpncmlkLmFycmFuZ2UoZ3JvYnMgPSBvdmVyYWxsX2RpZmZfcGxvdHMsIG5jb2wgPSAzKQ0KYGBgDQoNCkRpZmZlcmVuY2VzIHBlciBmaWVsZDoNCmBgYHtyfQ0KbG9vcF9saXN0IDwtIGMoInB1Yl90cmFuc2l0aW9ucyIsICJjaXRfdHJhbnNpdGlvbnMiLA0KICAgICAgICAgICJvbmxpbmVfbmV3c190cmFuc2l0aW9ucyIsICJuZXdzX3RyYW5zaXRpb25zIiwgDQogICAgICAgICAgInR3aXR0ZXJfdHJhbnNpdGlvbnMiKQ0KDQp0aXRsZXMgPC0gYygiUHVibGljYXRpb25zIiwgIkNpdGF0aW9ucyIsDQogICAgICAgICAgICAiT25saW5lIG5ld3MgYXR0ZW50aW9uIiwgIk5ld3MgYXR0ZW50aW9uIiwNCiAgICAgICAgICAgICJUd2l0dGVyIGF0dGVudGlvbiIpDQoNCg0KY29sb3JfbGlzdCA8LSBjKCIjZmI5MjNjIiwgIiNmYmJmMjQiLCAiIzM0ZDM5OSIsICIjMjJkM2VlIiwgIiM4MThjZjgiKQ0KDQpvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNfZGlmZiA8LSBsaXN0KCkNCg0KZm9yIChtYXRyaXggaW4gbG9vcF9saXN0KXsNCiAgZmllbGRzIDwtIGMoIlNURU0iLCAiU29jaWFsIHNjaWVuY2VzIiwgIk1lZGljaW5lIiwgIkFydHMgJiBIdW1hbml0aWVzIikNCiAgDQogIGZvciAoZmllbGQgaW4gZmllbGRzKXsNCiAgbWF0cml4X2N1cnJlbnRfbWVuIDwtIGdlbmRlcl9maWVsZF9tYXRyaWNlc1tbbWF0cml4XV1bW2ZpZWxkXV1bWyJtZW4iXV0NCiAgbWF0cml4X2N1cnJlbnRfd29tZW4gPC0gZ2VuZGVyX2ZpZWxkX21hdHJpY2VzW1ttYXRyaXhdXVtbZmllbGRdXVtbIndvbWVuIl1dDQogIG1hdHJpeF9kaWZmIDwtIG1hdHJpeF9jdXJyZW50X3dvbWVuIC0gbWF0cml4X2N1cnJlbnRfbWVuDQogIA0KICBwbG90X2N1cnJlbnQgPC0gbWF0cml4X2RpZmYgJT4lIA0KICAgIGFzLmRhdGEuZnJhbWUoKSAlPiUNCiAgICByb3duYW1lc190b19jb2x1bW4oInAxIikgJT4lDQogICAgcGl2b3RfbG9uZ2VyKC1jKHAxKSwgbmFtZXNfdG8gPSAicDIiLCB2YWx1ZXNfdG8gPSAicHJvYiIpJT4lDQogICAgZ2dwbG90KGFlcyh4PWFzLmludGVnZXIocDEpLCB5PWFzLmludGVnZXIocDIpLCBmaWxsPXByb2IpKSArIA0KICAgIGdlb21fdGlsZSgpICsNCiAgICBzY2FsZV9maWxsX2dyYWRpZW50Mihsb3cgPSAiI2Y4NzE3MSIsIG1pZCA9ICJ3aGl0ZSIsIGhpZ2ggPSBjb2xvcl9saXN0W3doaWNoKGxvb3BfbGlzdCA9PSBtYXRyaXgpXSwgbGltaXRzPWMoLTAuNCwgMC40KSwgYnJlYWtzPXNlcShyb3VuZCgtMC40LCAxKSxyb3VuZCgwLjQsMSksYnk9MC4yKSkrDQogICAgc2NhbGVfeF9jb250aW51b3VzKGJyZWFrcz1zZXEoMCwgc3BsaXRzLCAxKSwgZXhwYW5kID0gYygwLCAwKSkrDQogICAgc2NhbGVfeV9jb250aW51b3VzKGJyZWFrcz1zZXEoMCwgc3BsaXRzLCAxKSwgdHJhbnMgPSAicmV2ZXJzZSIsIGV4cGFuZCA9IGMoMCwgMCkpKw0KICAgIHhsYWIoIlBlcmlvZCAxOiAyMDExLTIwMTciKSsNCiAgICB5bGFiKCJQZXJpb2QgMjogMjAxOC0yMDIzIikrDQogICAgdGhlbWVfbWluaW1hbCgpKw0KICAgIGdndGl0bGUodGl0bGVzW3doaWNoKGxvb3BfbGlzdCA9PSBtYXRyaXgpXSkrDQogICAgZ3VpZGVzKGZpbGw9Z3VpZGVfbGVnZW5kKHRpdGxlPSJQcm9iLiBkaWZmLiAody1tKSIpKSsNCiAgdGhlbWUocGxvdC50aXRsZSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApLA0KICAgICAgICBheGlzLnRleHQueSA9IGVsZW1lbnRfdGV4dChzaXplID0gOSksDQogICAgICAgIGF4aXMudGl0bGUueSA9IGVsZW1lbnRfdGV4dChzaXplID0gMTApLA0KICAgICAgICBheGlzLnRleHQueCA9IGVsZW1lbnRfdGV4dChzaXplID0gOSkgLA0KICAgICAgICBheGlzLnRpdGxlLnggPSBlbGVtZW50X3RleHQoc2l6ZSA9IDEwKSwNCiAgICAgICAgbGVnZW5kLnRpdGxlPWVsZW1lbnRfdGV4dChzaXplPTEwKSwgDQogICAgICAgIGxlZ2VuZC50ZXh0PWVsZW1lbnRfdGV4dChzaXplPTgpKQ0KICANCiAgb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzX2RpZmZbW2ZpZWxkXV1bW21hdHJpeF1dIDwtIHBsb3RfY3VycmVudA0KICANCiAgfQ0KICANCn0NCmBgYA0KDQpQcmVwYXJlIHRyYW5zaXRpb24gZGlmZmVyZW5jZSBwbG90cyBwZXIgZmllbGQ6DQpgYGB7ciBmaWcud2lkdGg9MTIsIGZpZy5oZWlnaHQ9MTJ9DQpwbG90MSA8LSBvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNfZGlmZltbJ1NURU0nXV1bNF1bWyJuZXdzX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpKSBOZXdzIGF0dGVudGlvbiIpDQpwbG90MiA8LSBvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNfZGlmZltbJ1NURU0nXV1bM11bWyJvbmxpbmVfbmV3c190cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaWkpIE9ubGluZSBhdHRlbnRpb24iKQ0KcGxvdDMgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzX2RpZmZbWydTVEVNJ11dWzVdW1sidHdpdHRlcl90cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaWlpKSBUd2l0dGVyIGF0dGVudGlvbiIpDQoNCiMgbm93IGFkZCB0aGUgdGl0bGUNCnRpdGxlIDwtIGdnZHJhdygpICsgDQogIGRyYXdfbGFiZWwoDQogICAgIihhKSBTVEVNIiwNCiAgICB4ID0gMCwNCiAgICBoanVzdCA9IDANCiAgKSArDQogIHRoZW1lKA0KICAgICMgYWRkIG1hcmdpbiBvbiB0aGUgbGVmdCBvZiB0aGUgZHJhd2luZyBjYW52YXMsDQogICAgIyBzbyB0aXRsZSBpcyBhbGlnbmVkIHdpdGggbGVmdCBlZGdlIG9mIGZpcnN0IHBsb3QNCiAgICBwbG90Lm1hcmdpbiA9IG1hcmdpbigwLCAwLCAwLCA3KQ0KICApDQpzdGVtIDwtIHBsb3RfZ3JpZChwbG90MSwNCiAgICAgICAgICAgICAgICAgIHBsb3QyLA0KICAgICAgICAgICAgICAgICAgcGxvdDMsIG5jb2wgPSAzLCBucm93ID0gMSkNCg0Kc3RlbSA8LSBwbG90X2dyaWQoDQogIHRpdGxlLCBzdGVtLA0KICBuY29sID0gMSwNCiAgIyByZWxfaGVpZ2h0cyB2YWx1ZXMgY29udHJvbCB2ZXJ0aWNhbCB0aXRsZSBtYXJnaW5zDQogIHJlbF9oZWlnaHRzID0gYygwLjEsIDEpDQopDQoNCnBsb3QxIDwtIG92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90c19kaWZmW1snU29jaWFsIHNjaWVuY2VzJ11dWzRdW1sibmV3c190cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaSkgTmV3cyBhdHRlbnRpb24iKQ0KcGxvdDIgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzX2RpZmZbWydTb2NpYWwgc2NpZW5jZXMnXV1bM11bWyJvbmxpbmVfbmV3c190cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaWkpIE9ubGluZSBhdHRlbnRpb24iKQ0KcGxvdDMgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzX2RpZmZbWydTb2NpYWwgc2NpZW5jZXMnXV1bNV1bWyJ0d2l0dGVyX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpaWkpIFR3aXR0ZXIgYXR0ZW50aW9uIikNCg0Kc29jX3NjaSA8LSBwbG90X2dyaWQocGxvdDEsDQogICAgICAgICAgICAgICAgICAgICBwbG90MiwNCiAgICAgICAgICAgICAgICAgICAgIHBsb3QzLCBuY29sID0gMywgbnJvdyA9IDEpDQoNCnRpdGxlIDwtIGdnZHJhdygpICsgDQogIGRyYXdfbGFiZWwoDQogICAgIihiKSBTb2NpYWwgc2NpZW5jZSIsDQogICAgeCA9IDAsDQogICAgaGp1c3QgPSAwDQogICkgKw0KICB0aGVtZSgNCiAgICAjIGFkZCBtYXJnaW4gb24gdGhlIGxlZnQgb2YgdGhlIGRyYXdpbmcgY2FudmFzLA0KICAgICMgc28gdGl0bGUgaXMgYWxpZ25lZCB3aXRoIGxlZnQgZWRnZSBvZiBmaXJzdCBwbG90DQogICAgcGxvdC5tYXJnaW4gPSBtYXJnaW4oMCwgMCwgMCwgNykNCiAgKQ0KDQpzb2Nfc2NpIDwtIHBsb3RfZ3JpZCgNCiAgdGl0bGUsIHNvY19zY2ksDQogIG5jb2wgPSAxLA0KICAjIHJlbF9oZWlnaHRzIHZhbHVlcyBjb250cm9sIHZlcnRpY2FsIHRpdGxlIG1hcmdpbnMNCiAgcmVsX2hlaWdodHMgPSBjKDAuMSwgMSkNCikNCg0KcGxvdDEgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzX2RpZmZbWydNZWRpY2luZSddXVs0XVtbIm5ld3NfdHJhbnNpdGlvbnMiXV0rZ2d0aXRsZSgiKGkpIE5ld3MgYXR0ZW50aW9uIikNCnBsb3QyIDwtIG92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90c19kaWZmW1snTWVkaWNpbmUnXV1bM11bWyJvbmxpbmVfbmV3c190cmFuc2l0aW9ucyJdXStnZ3RpdGxlKCIoaWkpIE9ubGluZSBhdHRlbnRpb24iKQ0KcGxvdDMgPC0gb3ZlcmFsbF9maWVsZF90cmFuc2l0aW9uX3Bsb3RzX2RpZmZbWydNZWRpY2luZSddXVs1XVtbInR3aXR0ZXJfdHJhbnNpdGlvbnMiXV0rZ2d0aXRsZSgiKGlpaSkgVHdpdHRlciBhdHRlbnRpb24iKQ0KDQptZWRpY2luZSA8LSBwbG90X2dyaWQocGxvdDEsDQogICAgICAgICAgcGxvdDIsDQogICAgICAgICAgcGxvdDMsIG5jb2wgPSAzLCBucm93ID0gMSkNCg0KdGl0bGUgPC0gZ2dkcmF3KCkgKyANCiAgZHJhd19sYWJlbCgNCiAgICAiKGMpIE1lZGljaW5lIiwNCiAgICB4ID0gMCwNCiAgICBoanVzdCA9IDANCiAgKSArDQogIHRoZW1lKA0KICAgICMgYWRkIG1hcmdpbiBvbiB0aGUgbGVmdCBvZiB0aGUgZHJhd2luZyBjYW52YXMsDQogICAgIyBzbyB0aXRsZSBpcyBhbGlnbmVkIHdpdGggbGVmdCBlZGdlIG9mIGZpcnN0IHBsb3QNCiAgICBwbG90Lm1hcmdpbiA9IG1hcmdpbigwLCAwLCAwLCA3KQ0KICApDQoNCm1lZGljaW5lIDwtIHBsb3RfZ3JpZCgNCiAgdGl0bGUsIG1lZGljaW5lLA0KICBuY29sID0gMSwNCiAgIyByZWxfaGVpZ2h0cyB2YWx1ZXMgY29udHJvbCB2ZXJ0aWNhbCB0aXRsZSBtYXJnaW5zDQogIHJlbF9oZWlnaHRzID0gYygwLjEsIDEpDQopDQoNCnBsb3QxIDwtIG92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90c19kaWZmW1snQXJ0cyAmIEh1bWFuaXRpZXMnXV1bNF1bWyJuZXdzX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpKSBOZXdzIGF0dGVudGlvbiIpDQpwbG90MiA8LSBvdmVyYWxsX2ZpZWxkX3RyYW5zaXRpb25fcGxvdHNfZGlmZltbJ0FydHMgJiBIdW1hbml0aWVzJ11dWzNdW1sib25saW5lX25ld3NfdHJhbnNpdGlvbnMiXV0rZ2d0aXRsZSgiKGlpKSBPbmxpbmUgYXR0ZW50aW9uIikNCnBsb3QzIDwtIG92ZXJhbGxfZmllbGRfdHJhbnNpdGlvbl9wbG90c19kaWZmW1snQXJ0cyAmIEh1bWFuaXRpZXMnXV1bNV1bWyJ0d2l0dGVyX3RyYW5zaXRpb25zIl1dK2dndGl0bGUoIihpaWkpIFR3aXR0ZXIgYXR0ZW50aW9uIikNCg0KYXJ0c19odW0gPC0gcGxvdF9ncmlkKHBsb3QxLA0KICAgICAgICAgIHBsb3QyLA0KICAgICAgICAgIHBsb3QzLCBuY29sID0gMywgbnJvdyA9IDEpDQoNCnRpdGxlIDwtIGdnZHJhdygpICsgDQogIGRyYXdfbGFiZWwoDQogICAgIihkKSBBcnRzICYgSHVtYW5pdGllcyIsDQogICAgeCA9IDAsDQogICAgaGp1c3QgPSAwDQogICkgKw0KICB0aGVtZSgNCiAgICAjIGFkZCBtYXJnaW4gb24gdGhlIGxlZnQgb2YgdGhlIGRyYXdpbmcgY2FudmFzLA0KICAgICMgc28gdGl0bGUgaXMgYWxpZ25lZCB3aXRoIGxlZnQgZWRnZSBvZiBmaXJzdCBwbG90DQogICAgcGxvdC5tYXJnaW4gPSBtYXJnaW4oMCwgMCwgMCwgNykNCiAgKQ0KDQphcnRzX2h1bSA8LSBwbG90X2dyaWQoDQogIHRpdGxlLCBhcnRzX2h1bSwNCiAgbmNvbCA9IDEsDQogICMgcmVsX2hlaWdodHMgdmFsdWVzIGNvbnRyb2wgdmVydGljYWwgdGl0bGUgbWFyZ2lucw0KICByZWxfaGVpZ2h0cyA9IGMoMC4xLCAxKQ0KKQ0KDQpgYGANCg0KU2F2ZSB0aGUgcGxvdDoNCmBgYHtyIGZpZy53aWR0aD0xMCwgZmlnLmhlaWdodD0xMH0NCmdnc2F2ZShmaWxlPSJQbG90c19hcHJpbC9TdXBwbGVtZW50YWwvUF90cmFuc2l0aW9uX2RpZmYucG5nIiwgDQogICAgICAgZ3JpZC5hcnJhbmdlKHN0ZW0sIHNvY19zY2ksDQogICAgICAgICAgICAgICAgICAgIG1lZGljaW5lLCBhcnRzX2h1bSwNCiAgICAgICAgICAgICAgICAgICAgbmNvbCA9IDEsIG5yb3cgPSA0KSwNCiAgICAgICB3aWR0aCA9IDEwLA0KICAgICAgIGhlaWdodCA9IDEwLA0KICAgICAgIHVuaXRzID0gImluIikNCmBgYA0K</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("April_analyses.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
